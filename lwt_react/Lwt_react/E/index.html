<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>E (lwt_react.Lwt_react.E)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">lwt_react</a> &#x00BB; <a href="../index.html">Lwt_react</a> &#x00BB; E</nav><header><h1>Module <code>Lwt_react.E</code></h1></header><nav class="toc"><ul><li><a href="#lwt-specific-utilities">Lwt-specific utilities</a></li><li><a href="#threaded-versions-of-react-transformation-functions">Threaded versions of React transformation functions</a></li></ul></nav><div class="content"><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../../react/React/E/index.html">React.E</a></code></span></summary><h2 id="prim"><a href="#prim" class="anchor"></a>Primitive and basics</h2><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span> = <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p>The type for events with occurrences of type <code>'a</code>.</p></div></div><div><div class="spec value" id="val-never" class="anchored"><a href="#val-never" class="anchor"></a><code><span class="keyword">val</span> never : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p>A never occuring event. For all t, [<code>never</code>]<sub>t</sub> <code>= None</code>.</p></div></div><div><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> * <span>(<span>?&#8288;step:<a href="../../../react/React/index.html#type-step">React.step</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span></code></div><div><p><code>create ()</code> is a primitive event <code>e</code> and a <code>send</code> function. The function <code>send</code> is such that:</p><ul><li><code>send v</code> generates an occurrence <code>v</code> of <code>e</code> at the time it is called and triggers an <span class="xref-unresolved">update step</span>.</li><li><code>send ~step v</code> generates an occurence <code>v</code> of <code>e</code> on the step <code>step</code> when <code>step</code> is <span class="xref-unresolved">executed</span>.</li><li><code>send ~step v</code> raises <code>Invalid_argument</code> if it was previously called with a step and this step has not executed yet or if the given <code>step</code> was already executed.</li></ul><p><b>Warning.</b> <code>send</code> must not be executed inside an update step.</p></div></div><div><div class="spec value" id="val-retain" class="anchored"><a href="#val-retain" class="anchor"></a><code><span class="keyword">val</span> retain : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span>[ <span>`R of unit <span>&#45;&gt;</span> unit</span> ]</span></code></div><div><p><code>retain e c</code> keeps a reference to the closure <code>c</code> in <code>e</code> and returns the previously retained value. <code>c</code> will <em>never</em> be invoked.</p><p><b>Raises.</b> <code>Invalid_argument</code> on <a href="index.html#val-never"><code>E.never</code></a>.</p></div></div><div><div class="spec value" id="val-stop" class="anchored"><a href="#val-stop" class="anchor"></a><code><span class="keyword">val</span> stop : <span>?&#8288;strong:bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> unit</code></div><div><p><code>stop e</code> stops <code>e</code> from occuring. It conceptually becomes <a href="index.html#val-never"><code>never</code></a> and cannot be restarted. Allows to disable <span class="xref-unresolved">effectful</span> events.</p><p>The <code>strong</code> argument should only be used on platforms where weak arrays have a strong semantics (i.e. JavaScript). See <span class="xref-unresolved">details</span>.</p><p><b>Note.</b> If executed in an <span class="xref-unresolved">update step</span> the event may still occur in the step.</p></div></div><div><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> bool</code></div><div><p><code>equal e e'</code> is <code>true</code> iff <code>e</code> and <code>e'</code> are equal. If both events are different from <a href="index.html#val-never"><code>never</code></a>, physical equality is used.</p></div></div><div><div class="spec value" id="val-trace" class="anchored"><a href="#val-trace" class="anchor"></a><code><span class="keyword">val</span> trace : <span>?&#8288;iff:<span>bool <a href="../../../react/React/index.html#type-signal">React.signal</a></span></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>trace iff tr e</code> is <code>e</code> except <code>tr</code> is invoked with e's occurence when <code>iff</code> is <code>true</code> (defaults to <code>S.const true</code>). For all t where [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>iff</code>]<sub>t</sub> = <code>true</code>, <code>tr</code> is invoked with <code>v</code>.</p></div></div><h2 id="transf"><a href="#transf" class="anchor"></a>Transforming and filtering</h2><div><div class="spec value" id="val-once" class="anchored"><a href="#val-once" class="anchor"></a><code><span class="keyword">val</span> once : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>once e</code> is <code>e</code> with only its next occurence.</p><ul><li>[<code>once e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>e</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>once e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-drop_once" class="anchored"><a href="#val-drop_once" class="anchor"></a><code><span class="keyword">val</span> drop_once : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>drop_once e</code> is <code>e</code> without its next occurrence.</p><ul><li>[<code>drop_once e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>e</code>]<sub>&lt;t</sub> <code>= Some _</code>.</li><li>[<code>drop_once e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-app" class="anchored"><a href="#val-app" class="anchor"></a><code><span class="keyword">val</span> app : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>app ef e</code> occurs when both <code>ef</code> and <code>e</code> occur <span class="xref-unresolved">simultaneously</span>. The value is <code>ef</code>'s occurence applied to <code>e</code>'s one.</p><ul><li>[<code>app ef e</code>]<sub>t</sub> <code>= Some v'</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code> and [<code>e</code>]<sub>t</sub> <code>= Some v</code> and <code>f v = v'</code>.</li><li>[<code>app ef e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>map f e</code> applies <code>f</code> to <code>e</code>'s occurrences.</p><ul><li>[<code>map f e</code>]<sub>t</sub> <code>= Some (f v)</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>map f e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-stamp" class="anchored"><a href="#val-stamp" class="anchor"></a><code><span class="keyword">val</span> stamp : <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>stamp e v</code> is <code>map (fun _ -&gt; v) e</code>.</p></div></div><div><div class="spec value" id="val-filter" class="anchored"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>filter p e</code> are <code>e</code>'s occurrences that satisfy <code>p</code>.</p><ul><li>[<code>filter p e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and <code>p v = true</code></li><li>[<code>filter p e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-fmap" class="anchored"><a href="#val-fmap" class="anchor"></a><code><span class="keyword">val</span> fmap : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>fmap fm e</code> are <code>e</code>'s occurrences filtered and mapped by <code>fm</code>.</p><ul><li>[<code>fmap fm e</code>]<sub>t</sub> <code>= Some v</code> if <code>fm</code> [<code>e</code>]<sub>t</sub> <code>= Some v</code></li><li>[<code>fmap fm e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-diff" class="anchored"><a href="#val-diff" class="anchor"></a><code><span class="keyword">val</span> diff : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>diff f e</code> occurs whenever <code>e</code> occurs except on the next occurence. Occurences are <code>f v v'</code> where <code>v</code> is <code>e</code>'s current occurrence and <code>v'</code> the previous one.</p><ul><li>[<code>diff f e</code>]<sub>t</sub> <code>= Some r</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>, [<code>e</code>]<sub>&lt;t</sub> <code>= Some v'</code> and <code>f v v' = r</code>.</li><li>[<code>diff f e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-changes" class="anchored"><a href="#val-changes" class="anchor"></a><code><span class="keyword">val</span> changes : <span>?&#8288;eq:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>changes eq e</code> is <code>e</code>'s occurrences with occurences equal to the previous one dropped. Equality is tested with <code>eq</code> (defaults to structural equality).</p><ul><li>[<code>changes eq e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and either [<code>e</code>]<sub>&lt;t</sub> <code>= None</code> or [<code>e</code>]<sub>&lt;t</sub> <code>= Some v'</code> and <code>eq v v' = false</code>.</li><li>[<code>changes eq e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-on" class="anchored"><a href="#val-on" class="anchor"></a><code><span class="keyword">val</span> on : <span>bool <a href="../../../react/React/index.html#type-signal">React.signal</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>on c e</code> is the occurrences of <code>e</code> when <code>c</code> is <code>true</code>.</p><ul><li>[<code>on c e</code>]<sub>t</sub> <code>= Some v</code> if [<code>c</code>]<sub>t</sub> <code>= true</code> and [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>on c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-when_" class="anchored"><a href="#val-when_" class="anchor"></a><code><span class="keyword">val</span> when_ : <span>bool <a href="../../../react/React/index.html#type-signal">React.signal</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><dl><dt>deprecated</dt><dd><p>Use <code>on</code>.</p></dd></dl></div></div><div><div class="spec value" id="val-dismiss" class="anchored"><a href="#val-dismiss" class="anchor"></a><code><span class="keyword">val</span> dismiss : <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>dismiss c e</code> is the occurences of <code>e</code> except the ones when <code>c</code> occurs.</p><ul><li>[<code>dimiss c e</code>]<sub>t</sub> <code>= Some v</code> if [<code>c</code>]<sub>t</sub> <code>= None</code> and [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>dimiss c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-until" class="anchored"><a href="#val-until" class="anchor"></a><code><span class="keyword">val</span> until : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>until c e</code> is <code>e</code>'s occurences until <code>c</code> occurs.</p><ul><li>[<code>until c e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>c</code>]<sub>&lt;=t</sub> <code>= None</code></li><li>[<code>until c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><h2 id="accum"><a href="#accum" class="anchor"></a>Accumulating</h2><div><div class="spec value" id="val-accum" class="anchored"><a href="#val-accum" class="anchor"></a><code><span class="keyword">val</span> accum : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>accum ef i</code> accumulates a value, starting with <code>i</code>, using <code>e</code>'s functional occurrences.</p><ul><li>[<code>accum ef i</code>]<sub>t</sub> <code>= Some (f i)</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code> and [<code>ef</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>accum ef i</code>]<sub>t</sub> <code>= Some (f acc)</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code> and [<code>accum ef i</code>]<sub>&lt;t</sub> <code>= Some acc</code>.</li><li>[<code>accum ef i</code>] <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-fold" class="anchored"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>fold f i e</code> accumulates <code>e</code>'s occurrences with <code>f</code> starting with <code>i</code>.</p><ul><li>[<code>fold f i e</code>]<sub>t</sub> <code>= Some (f i v)</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>e</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>fold f i e</code>]<sub>t</sub> <code>= Some (f acc v)</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>fold f i e</code>]<sub>&lt;t</sub> <code>= Some acc</code>.</li><li>[<code>fold f i e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><h2 id="combine"><a href="#combine" class="anchor"></a>Combining</h2><div><div class="spec value" id="val-select" class="anchored"><a href="#val-select" class="anchor"></a><code><span class="keyword">val</span> select : <span><span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>select el</code> is the occurrences of every event in <code>el</code>. If more than one event occurs <span class="xref-unresolved">simultaneously</span> the leftmost is taken and the others are lost.</p><ul><li>[<code>select el</code>]<sub>t</sub> <code>=</code> [<code>List.find (fun e -&gt; </code>[<code>e</code>]<sub>t</sub> <code>&lt;&gt; None) el</code>]<sub>t</sub>.</li><li>[<code>select el</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div><div><div class="spec value" id="val-merge" class="anchored"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>merge f a el</code> merges the <span class="xref-unresolved">simultaneous</span> occurrences of every event in <code>el</code> using <code>f</code> and the accumulator <code>a</code>.</p><p>[<code>merge f a el</code>]<sub>t</sub> <code>= List.fold_left f a (List.filter (fun o -&gt; o &lt;&gt; None)
           (List.map</code> []<sub>t</sub><code> el))</code>.</p></div></div><div><div class="spec value" id="val-switch" class="anchored"><a href="#val-switch" class="anchor"></a><code><span class="keyword">val</span> switch : <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div><p><code>switch e ee</code> is <code>e</code>'s occurrences until there is an occurrence <code>e'</code> on <code>ee</code>, the occurrences of <code>e'</code> are then used until there is a new occurrence on <code>ee</code>, etc..</p><ul><li>[<code>switch e ee</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t</sub> if [<code>ee</code>]<sub>&lt;=t</sub> <code>= None</code>.</li><li>[<code>switch e ee</code>]<sub>t</sub> <code>=</code> [<code>e'</code>]<sub>t</sub> if [<code>ee</code>]<sub>&lt;=t</sub> <code>= Some e'</code>.</li></ul></div></div><div><div class="spec value" id="val-fix" class="anchored"><a href="#val-fix" class="anchor"></a><code><span class="keyword">val</span> fix : <span>(<span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> * <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></div><div><p><code>fix ef</code> allows to refer to the value an event had an infinitesimal amount of time before.</p><p>In <code>fix ef</code>, <code>ef</code> is called with an event <code>e</code> that represents the event returned by <code>ef</code> delayed by an infinitesimal amount of time. If <code>e', r = ef e</code> then <code>r</code> is returned by <code>fix</code> and <code>e</code> is such that :</p><ul><li>[<code>e</code>]<sub>t</sub> <code>=</code> <code>None</code> if t = 0</li><li>[<code>e</code>]<sub>t</sub> <code>=</code> [<code>e'</code>]<sub>t-dt</sub> otherwise</li></ul><p><b>Raises.</b> <code>Invalid_argument</code> if <code>e'</code> is directly a delayed event (i.e. an event given to a fixing function).</p></div></div><h2 id="lifting"><a href="#lifting" class="anchor"></a>Lifting</h2><aside><p>Lifting combinators. For a given <code>n</code> the semantics is:</p><ul><li>[<code>ln f e1 ... en</code>]<sub>t</sub> <code>= Some (f v1 ... vn)</code> if for all i : [<code>ei</code>]<sub>t</sub> <code>= Some vi</code>.</li><li>[<code>ln f e1 ... en</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></aside><div class="spec value" id="val-l1" class="anchored"><a href="#val-l1" class="anchor"></a><code><span class="keyword">val</span> l1 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div class="spec value" id="val-l2" class="anchored"><a href="#val-l2" class="anchor"></a><code><span class="keyword">val</span> l2 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div class="spec value" id="val-l3" class="anchored"><a href="#val-l3" class="anchor"></a><code><span class="keyword">val</span> l3 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div class="spec value" id="val-l4" class="anchored"><a href="#val-l4" class="anchor"></a><code><span class="keyword">val</span> l4 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'e</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div class="spec value" id="val-l5" class="anchored"><a href="#val-l5" class="anchor"></a><code><span class="keyword">val</span> l5 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'f</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'e</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><div class="spec value" id="val-l6" class="anchored"><a href="#val-l6" class="anchor"></a><code><span class="keyword">val</span> l6 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'f</span> <span>&#45;&gt;</span> <span class="type-var">'g</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'e</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../../../react/React/index.html#type-event">React.event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'g</span> <a href="../../../react/React/index.html#type-event">React.event</a></span></code></div><h2 id="pervasives-support"><a href="#pervasives-support" class="anchor"></a>Pervasives support</h2><div><div class="spec module" id="module-Option" class="anchored"><a href="#module-Option" class="anchor"></a><code><span class="keyword">module</span> <a href="Option/index.html">Option</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><p>Events with option occurences.</p></div></div></details></div></div></div><h3 id="lwt-specific-utilities"><a href="#lwt-specific-utilities" class="anchor"></a>Lwt-specific utilities</h3><div><div class="spec value" id="val-with_finaliser" class="anchored"><a href="#val-with_finaliser" class="anchor"></a><code><span class="keyword">val</span> with_finaliser : <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div><p><code>with_finaliser f e</code> returns an event <code>e'</code> which behave as <code>e</code>, except that <code>f</code> is called when <code>e'</code> is garbage collected.</p></div></div><div><div class="spec value" id="val-next" class="anchored"><a href="#val-next" class="anchor"></a><code><span class="keyword">val</span> next : <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>next e</code> returns the next occurrence of <code>e</code>.</p><p>Avoid trying to create an &quot;asynchronous loop&quot; by calling <code>next e</code> again in a callback attached to the promise returned by <code>next e</code>:</p><ul><li>The callback is called within the React update step, so calling <code>next e</code> within it will return a promise that is fulfilled with the same value as the current occurrence.</li><li>If you instead arrange for the React update step to end (for example, by calling <code>Lwt.pause ()</code> within the callback), multiple React update steps may occur before the callback calls <code>next e</code> again, so some occurrences can be effectively &quot;lost.&quot;</li></ul><p>To robustly asynchronously process occurrences of <code>e</code> in a loop, use <code>to_stream e</code>, and repeatedly call <a href="../../../lwt/Lwt_stream/index.html#val-next"><code>Lwt_stream.next</code></a> on the resulting stream.</p></div></div><div><div class="spec value" id="val-limit" class="anchored"><a href="#val-limit" class="anchor"></a><code><span class="keyword">val</span> limit : <span>(unit <span>&#45;&gt;</span> <span>unit <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div><p><code>limit f e</code> limits the rate of <code>e</code> with <code>f</code>.</p><p>For example, to limit the rate of an event to 1 per second you can use: <code>limit (fun () -&gt; Lwt_unix.sleep 1.0) event</code>.</p></div></div><div><div class="spec value" id="val-from" class="anchored"><a href="#val-from" class="anchor"></a><code><span class="keyword">val</span> from : <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div><p><code>from f</code> creates an event which occurs each time <code>f ()</code> returns a value. If <code>f</code> raises an exception, the event is just stopped.</p></div></div><div><div class="spec value" id="val-to_stream" class="anchored"><a href="#val-to_stream" class="anchor"></a><code><span class="keyword">val</span> to_stream : <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt_stream/index.html#type-t">Lwt_stream.t</a></span></code></div><div><p>Creates a stream holding all values occurring on the given event</p></div></div><div><div class="spec value" id="val-of_stream" class="anchored"><a href="#val-of_stream" class="anchor"></a><code><span class="keyword">val</span> of_stream : <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt_stream/index.html#type-t">Lwt_stream.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div><p><code>of_stream stream</code> creates an event which occurs each time a value is available on the stream.</p></div></div><div><div class="spec value" id="val-delay" class="anchored"><a href="#val-delay" class="anchor"></a><code><span class="keyword">val</span> delay : <span><span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div><p><code>delay promise</code> is an event which does not occur until <code>promise</code> resolves. Then it behaves as the event returned by <code>promise</code>.</p></div></div><div><div class="spec value" id="val-keep" class="anchored"><a href="#val-keep" class="anchor"></a><code><span class="keyword">val</span> keep : <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> unit</code></div><div><p><code>keep e</code> keeps a reference to <code>e</code> so it will never be garbage collected.</p></div></div><h3 id="threaded-versions-of-react-transformation-functions"><a href="#threaded-versions-of-react-transformation-functions" class="anchor"></a>Threaded versions of React transformation functions</h3><aside><p>The following functions behave as their <code>React</code> counterpart, except that they take functions that may yield.</p><p>As usual the <code>_s</code> suffix is used when calls are serialized, and the <code>_p</code> suffix is used when they are not.</p><p>Note that <code>*_p</code> functions may not preserve event order.</p></aside><div class="spec value" id="val-app_s" class="anchored"><a href="#val-app_s" class="anchor"></a><code><span class="keyword">val</span> app_s : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-app_p" class="anchored"><a href="#val-app_p" class="anchor"></a><code><span class="keyword">val</span> app_p : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-map_s" class="anchored"><a href="#val-map_s" class="anchor"></a><code><span class="keyword">val</span> map_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-map_p" class="anchored"><a href="#val-map_p" class="anchor"></a><code><span class="keyword">val</span> map_p : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-filter_s" class="anchored"><a href="#val-filter_s" class="anchor"></a><code><span class="keyword">val</span> filter_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>bool <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-filter_p" class="anchored"><a href="#val-filter_p" class="anchor"></a><code><span class="keyword">val</span> filter_p : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>bool <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-fmap_s" class="anchored"><a href="#val-fmap_s" class="anchor"></a><code><span class="keyword">val</span> fmap_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> option</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-fmap_p" class="anchored"><a href="#val-fmap_p" class="anchor"></a><code><span class="keyword">val</span> fmap_p : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> option</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-diff_s" class="anchored"><a href="#val-diff_s" class="anchor"></a><code><span class="keyword">val</span> diff_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-accum_s" class="anchored"><a href="#val-accum_s" class="anchor"></a><code><span class="keyword">val</span> accum_s : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-fold_s" class="anchored"><a href="#val-fold_s" class="anchor"></a><code><span class="keyword">val</span> fold_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-merge_s" class="anchored"><a href="#val-merge_s" class="anchor"></a><code><span class="keyword">val</span> merge_s : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="../index.html#type-event">event</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-run_s" class="anchored"><a href="#val-run_s" class="anchor"></a><code><span class="keyword">val</span> run_s : <span><span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div><div class="spec value" id="val-run_p" class="anchored"><a href="#val-run_p" class="anchor"></a><code><span class="keyword">val</span> run_p : <span><span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <a href="../index.html#type-event">event</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></span></code></div></div></body></html>