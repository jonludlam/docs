<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tuple_pool__Tuple_pool_intf (core_kernel.Tuple_pool__Tuple_pool_intf)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">core_kernel</a> &#x00BB; Tuple_pool__Tuple_pool_intf</nav><header><h1>Module <code>Tuple_pool__Tuple_pool_intf</code></h1><p>A manual memory manager for a set of mutable tuples. The point of <code>Tuple_pool</code> is to allocate a single long-lived block of memory (the pool) that lives in the OCaml major heap, and then to reuse the block, rather than continually allocating blocks on the minor heap.</p><p>A pool stores a bounded-size set of tuples, where client code is responsible for explicitly controlling when the pool allocates and frees tuples. One <code>create</code>s a pool of a certain capacity, which returns an empty pool that can hold that many tuples. One then uses <code>new</code> to allocate a tuple, which returns a <code>Pointer.t</code> to the tuple. One then uses <code>get</code> and <code>set</code> along with the pointer to get and set slots of the tuple. Finally, one <code>free</code>'s a pointer to the pool's memory for a tuple, making the memory available for subsequent reuse.</p><p>In typical usage, one wraps up a pool with an abstract interface, giving nice names to the tuple slots, and only exposing mutation where desired.</p><p>All the usual problems with manual memory allocation are present with pools:</p><ul><li>one can mistakenly use a pointer after it is freed</li><li>one can mistakenly free a pointer multiple times</li><li>one can forget to free a pointer</li></ul><p>There is a debugging functor, <code>Tuple_pool.Error_check</code>, that is useful for building pools to help debug incorrect pointer usage.</p></header><div class="content"></div></body></html>