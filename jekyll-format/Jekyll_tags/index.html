<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Jekyll_tags (jekyll-format.Jekyll_tags)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">jekyll-format</a> &#x00BB; Jekyll_tags</nav><header><h1>Module <code>Jekyll_tags</code></h1><p>Parse Jekyll-format delimited tags from message bodies</p></header><nav class="toc"><ul><li><a href="#general-tag-parsing">General tag parsing</a></li><li><a href="#jekyll-liquid-tag-parsing-functions">Jekyll liquid tag parsing functions</a></li></ul></nav><div class="content"><h2 id="general-tag-parsing"><a href="#general-tag-parsing" class="anchor"></a>General tag parsing</h2><div><div class="spec value" id="val-extract_tag" class="anchored"><a href="#val-extract_tag" class="anchor"></a><code><span class="keyword">val</span> extract_tag : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> <span>start_tag:string</span> <span>&#45;&gt;</span> <span>stop_tag:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(int * string * int)</span> option</span></code></div><div><p><code>extract_tag ?start ~start_tag ~stop_tag s</code> will extract the indices that represents the <code>text</code> in <code>&quot;&lt;start&gt;&lt;ws&gt;&lt;text&gt;&lt;ws&gt;&lt;stop&gt;&quot;</code>. Whitespace is trimmed, and <code>None</code> is returned if non-empty text could not be parsed.</p><dl><dt>returns</dt><dd><p>starting index of the tag within the string, the tag contents with whitespace trimmed, and the index of the first character after the end tag (which may be out of bounds of the string)</p></dd></dl></div></div><div><div class="spec value" id="val-extract_tags" class="anchored"><a href="#val-extract_tags" class="anchor"></a><code><span class="keyword">val</span> extract_tags : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> <span>start_tag:string</span> <span>&#45;&gt;</span> <span>stop_tag:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(int * string * int)</span> list</span></code></div><div><p><code>extract_tags ?start ~start_tag ~stop_tag s</code> will extract the list of indices that represent the <code>text</code> in <code>&quot;&lt;start_Tag&gt;&lt;ws&gt;&lt;text&gt;&lt;ws&gt;&lt;stop_tag&gt;&quot;</code>. Whitespace is trimmed from the <code>text</code> body.</p><dl><dt>returns</dt><dd><p>list of tuples of the starting index of the tag within the string, the tag contents with whitespace trimmed, and the index of the first character after the end tag (which may be out of bounds of the string)</p></dd></dl></div></div><div><div class="spec value" id="val-map_tag" class="anchored"><a href="#val-map_tag" class="anchor"></a><code><span class="keyword">val</span> map_tag : <span>sub:<a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></span> <span>&#45;&gt;</span> <span>(int * string * int)</span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></code></div><div><p><code>map_tag ~sub tag_info body</code> will substitute the tag_info (typically returned by <a href="index.html#val-extract_tag"><code>extract_tag</code></a> with the value of <code>sub</code></p></div></div><div><div class="spec value" id="val-map_tags" class="anchored"><a href="#val-map_tags" class="anchor"></a><code><span class="keyword">val</span> map_tags : <span>start_tag:string</span> <span>&#45;&gt;</span> <span>stop_tag:string</span> <span>&#45;&gt;</span> <span>f:<span>(string <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></code></div><div><p><code>map_tags ~start_tag ~stop_tag ~f body</code> will apply the function <code>f</code> to all the tags found that match <code>start_tag</code> and <code>stop_tag</code>. The scanning is done via <a href="index.html#val-extract_tags"><code>extract_tags</code></a> and covers all occurrences in <code>body</code>. <code>f</code> should return <code>None</code> if the tag is to be skipped, and <code>Some sub</code> where <code>sub</code> is the string to substitute into the tag body.</p></div></div><div><div class="spec value" id="val-map_tag_bodies" class="anchored"><a href="#val-map_tag_bodies" class="anchor"></a><code><span class="keyword">val</span> map_tag_bodies : <span>start_tag:string</span> <span>&#45;&gt;</span> <span>stop_tag:string</span> <span>&#45;&gt;</span> <span>f_start:<span>(string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span></span> <span>&#45;&gt;</span> <span>f_stop:<span>(string <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span>f_map:<span>(<span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a>)</span></span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></code></div><div><p><code>map_tag_bodies ~start_tag ~stop_tag ~f_start ~f_stop ~f_map body</code> searches for tags delimited by <code>start_tag</code> and <code>stop_tag</code>. The tags are pattern matched using <code>f_start</code> to find the starting tag, and <code>f_stop</code> for the end tag. When a matching tag pair is found, a substitution is generated using <code>f_map</code>, and the resulting substitution is returned with the rest of the string unchanged. <code>f_start</code> can pass <code>Some args</code> (parsed from the start tag body to the <code>f_map</code> function so that tag arguments can be handled by the processor.</p></div></div><h2 id="jekyll-liquid-tag-parsing-functions"><a href="#jekyll-liquid-tag-parsing-functions" class="anchor"></a>Jekyll liquid tag parsing functions</h2><div><div class="spec value" id="val-extract_liquid_tag" class="anchored"><a href="#val-extract_liquid_tag" class="anchor"></a><code><span class="keyword">val</span> extract_liquid_tag : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(int * string * int)</span> option</span></code></div><div><p><code>extract_liquid_tag</code> behaves as <a href="index.html#val-extract_tag"><code>extract_tag</code></a> but is specialised to parse Jekyll liquid tags of the form <code>{% ... %}</code>.</p></div></div><div><div class="spec value" id="val-extract_liquid_tags" class="anchored"><a href="#val-extract_liquid_tags" class="anchor"></a><code><span class="keyword">val</span> extract_liquid_tags : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(int * string * int)</span> list</span></code></div><div><p><code>extract_liquid_tags</code> behaves as <a href="index.html#val-extract_tags"><code>extract_tags</code></a> but is specialised to parse Jekyll liquid tags of the form <code>{% ... %}</code>.</p></div></div><div><div class="spec value" id="val-map_liquid_tags" class="anchored"><a href="#val-map_liquid_tags" class="anchor"></a><code><span class="keyword">val</span> map_liquid_tags : <span>f:<span>(string <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></code></div><div><p><code>map_liquid_tags ~f body</code> behaves as <a href="index.html#val-map_tags"><code>map_tags</code></a> but is specialised to parse Jekyll liquid tags of the form <code>{% ... %}</code>.</p></div></div><div><div class="spec value" id="val-map_liquid_tag_bodies" class="anchored"><a href="#val-map_liquid_tag_bodies" class="anchor"></a><code><span class="keyword">val</span> map_liquid_tag_bodies : <span>f_start:<span>(string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span></span> <span>&#45;&gt;</span> <span>f_stop:<span>(string <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span>f_map:<span>(<span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a>)</span></span> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a> <span>&#45;&gt;</span> <a href="../../astring/Astring/String/index.html#type-sub">Astring.String.sub</a></code></div><div><p><code>map_liquid_tag_bodies</code> operates as <a href="index.html#val-map_tag_bodies"><code>map_tag_bodies</code></a> but is specialised to parse Jekyll liquid tags of the form <code>{% ... %}</code>.</p></div></div></div></body></html>