<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CamlinternalOO (ocaml.CamlinternalOO)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocaml</a> &#x00BB; CamlinternalOO</nav><header><h1>Module <code>CamlinternalOO</code></h1><p>Run-time support for objects and classes. All functions in this module are for system use only, not for the casual user.</p></header><nav class="toc"><ul><li><a href="#classes">Classes</a></li><li><a href="#objects">Objects</a></li><li><a href="#table-cache">Table cache</a></li><li><a href="#builtins-to-reduce-code-size">Builtins to reduce code size</a></li><li><a href="#parameters">Parameters</a></li><li><a href="#statistics">Statistics</a></li></ul></nav><div class="content"><h2 id="classes"><a href="#classes" class="anchor"></a>Classes</h2><div class="spec type" id="type-tag" class="anchored"><a href="#type-tag" class="anchor"></a><code><span class="keyword">type</span> tag</code></div><div class="spec type" id="type-label" class="anchored"><a href="#type-label" class="anchor"></a><code><span class="keyword">type</span> label</code></div><div class="spec type" id="type-table" class="anchored"><a href="#type-table" class="anchor"></a><code><span class="keyword">type</span> table</code></div><div class="spec type" id="type-meth" class="anchored"><a href="#type-meth" class="anchor"></a><code><span class="keyword">type</span> meth</code></div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></div><div class="spec type" id="type-obj" class="anchored"><a href="#type-obj" class="anchor"></a><code><span class="keyword">type</span> obj</code></div><div class="spec type" id="type-closure" class="anchored"><a href="#type-closure" class="anchor"></a><code><span class="keyword">type</span> closure</code></div><div class="spec value" id="val-public_method_label" class="anchored"><a href="#val-public_method_label" class="anchor"></a><code><span class="keyword">val</span> public_method_label : string <span>&#45;&gt;</span> <a href="index.html#type-tag">tag</a></code></div><div class="spec value" id="val-new_method" class="anchored"><a href="#val-new_method" class="anchor"></a><code><span class="keyword">val</span> new_method : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-label">label</a></code></div><div class="spec value" id="val-new_variable" class="anchored"><a href="#val-new_variable" class="anchor"></a><code><span class="keyword">val</span> new_variable : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int</code></div><div class="spec value" id="val-new_methods_variables" class="anchored"><a href="#val-new_methods_variables" class="anchor"></a><code><span class="keyword">val</span> new_methods_variables : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span><a href="index.html#type-label">label</a> array</span></code></div><div class="spec value" id="val-get_variable" class="anchored"><a href="#val-get_variable" class="anchor"></a><code><span class="keyword">val</span> get_variable : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int</code></div><div class="spec value" id="val-get_variables" class="anchored"><a href="#val-get_variables" class="anchor"></a><code><span class="keyword">val</span> get_variables : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>int array</span></code></div><div class="spec value" id="val-get_method_label" class="anchored"><a href="#val-get_method_label" class="anchor"></a><code><span class="keyword">val</span> get_method_label : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-label">label</a></code></div><div class="spec value" id="val-get_method_labels" class="anchored"><a href="#val-get_method_labels" class="anchor"></a><code><span class="keyword">val</span> get_method_labels : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span><a href="index.html#type-label">label</a> array</span></code></div><div class="spec value" id="val-get_method" class="anchored"><a href="#val-get_method" class="anchor"></a><code><span class="keyword">val</span> get_method : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-label">label</a> <span>&#45;&gt;</span> <a href="index.html#type-meth">meth</a></code></div><div class="spec value" id="val-set_method" class="anchored"><a href="#val-set_method" class="anchor"></a><code><span class="keyword">val</span> set_method : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-label">label</a> <span>&#45;&gt;</span> <a href="index.html#type-meth">meth</a> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-set_methods" class="anchored"><a href="#val-set_methods" class="anchor"></a><code><span class="keyword">val</span> set_methods : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span><a href="index.html#type-label">label</a> array</span> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-narrow" class="anchored"><a href="#val-narrow" class="anchor"></a><code><span class="keyword">val</span> narrow : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-widen" class="anchored"><a href="#val-widen" class="anchor"></a><code><span class="keyword">val</span> widen : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-add_initializer" class="anchored"><a href="#val-add_initializer" class="anchor"></a><code><span class="keyword">val</span> add_initializer : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-dummy_table" class="anchored"><a href="#val-dummy_table" class="anchor"></a><code><span class="keyword">val</span> dummy_table : <a href="index.html#type-table">table</a></code></div><div class="spec value" id="val-create_table" class="anchored"><a href="#val-create_table" class="anchor"></a><code><span class="keyword">val</span> create_table : <span>string array</span> <span>&#45;&gt;</span> <a href="index.html#type-table">table</a></code></div><div class="spec value" id="val-init_class" class="anchored"><a href="#val-init_class" class="anchor"></a><code><span class="keyword">val</span> init_class : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-inherits" class="anchored"><a href="#val-inherits" class="anchor"></a><code><span class="keyword">val</span> inherits : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>string array</span> <span>&#45;&gt;</span> <span>(<a href="index.html#type-t">t</a> * <span>(<a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a>)</span> * <a href="index.html#type-t">t</a> * <a href="index.html#type-obj">obj</a>)</span> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <span><a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> array</span></code></div><div class="spec value" id="val-make_class" class="anchored"><a href="#val-make_class" class="anchor"></a><code><span class="keyword">val</span> make_class : <span>string array</span> <span>&#45;&gt;</span> <span>(<a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <span>(<a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> * <span>(<a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> * <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a></code></div><div class="spec type" id="type-init_table" class="anchored"><a href="#type-init_table" class="anchor"></a><code><span class="keyword">type</span> init_table</code></div><div class="spec value" id="val-make_class_store" class="anchored"><a href="#val-make_class_store" class="anchor"></a><code><span class="keyword">val</span> make_class_store : <span>string array</span> <span>&#45;&gt;</span> <span>(<a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-init_table">init_table</a> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-dummy_class" class="anchored"><a href="#val-dummy_class" class="anchor"></a><code><span class="keyword">val</span> dummy_class : <span>(string * int * int)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <span>(<a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> * <span>(<a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>)</span> * <a href="../Stdlib/Obj/index.html#type-t">Stdlib.Obj.t</a></code></div><h2 id="objects"><a href="#objects" class="anchor"></a>Objects</h2><div class="spec value" id="val-copy" class="anchored"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : &lt; .. &gt; <span class="keyword">as</span> 'a <span>&#45;&gt;</span> <span class="type-var">'a</span></code></div><div class="spec value" id="val-create_object" class="anchored"><a href="#val-create_object" class="anchor"></a><code><span class="keyword">val</span> create_object : <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a></code></div><div class="spec value" id="val-create_object_opt" class="anchored"><a href="#val-create_object_opt" class="anchor"></a><code><span class="keyword">val</span> create_object_opt : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a></code></div><div class="spec value" id="val-run_initializers" class="anchored"><a href="#val-run_initializers" class="anchor"></a><code><span class="keyword">val</span> run_initializers : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> unit</code></div><div class="spec value" id="val-run_initializers_opt" class="anchored"><a href="#val-run_initializers_opt" class="anchor"></a><code><span class="keyword">val</span> run_initializers_opt : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a></code></div><div class="spec value" id="val-create_object_and_run_initializers" class="anchored"><a href="#val-create_object_and_run_initializers" class="anchor"></a><code><span class="keyword">val</span> create_object_and_run_initializers : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a></code></div><div class="spec external" id="val-send" class="anchored"><a href="#val-send" class="anchor"></a><code><span class="keyword">val</span> send : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-tag">tag</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="spec external" id="val-sendcache" class="anchored"><a href="#val-sendcache" class="anchor"></a><code><span class="keyword">val</span> sendcache : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-tag">tag</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="spec external" id="val-sendself" class="anchored"><a href="#val-sendself" class="anchor"></a><code><span class="keyword">val</span> sendself : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-label">label</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="spec external" id="val-get_public_method" class="anchored"><a href="#val-get_public_method" class="anchor"></a><code><span class="keyword">val</span> get_public_method : <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-tag">tag</a> <span>&#45;&gt;</span> <a href="index.html#type-closure">closure</a></code></div><h2 id="table-cache"><a href="#table-cache" class="anchor"></a>Table cache</h2><div class="spec type" id="type-tables" class="anchored"><a href="#type-tables" class="anchor"></a><code><span class="keyword">type</span> tables</code></div><div class="spec value" id="val-lookup_tables" class="anchored"><a href="#val-lookup_tables" class="anchor"></a><code><span class="keyword">val</span> lookup_tables : <a href="index.html#type-tables">tables</a> <span>&#45;&gt;</span> <span><a href="index.html#type-closure">closure</a> array</span> <span>&#45;&gt;</span> <a href="index.html#type-tables">tables</a></code></div><h2 id="builtins-to-reduce-code-size"><a href="#builtins-to-reduce-code-size" class="anchor"></a>Builtins to reduce code size</h2><div class="spec type" id="type-impl" class="anchored"><a href="#type-impl" class="anchor"></a><code><span class="keyword">type</span> impl = </code><table><tr id="type-impl.GetConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.GetConst" class="anchor"></a><code>| <span class="constructor">GetConst</span></code></td></tr><tr id="type-impl.GetVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.GetVar" class="anchor"></a><code>| <span class="constructor">GetVar</span></code></td></tr><tr id="type-impl.GetEnv" class="anchored"><td class="def variant constructor"><a href="#type-impl.GetEnv" class="anchor"></a><code>| <span class="constructor">GetEnv</span></code></td></tr><tr id="type-impl.GetMeth" class="anchored"><td class="def variant constructor"><a href="#type-impl.GetMeth" class="anchor"></a><code>| <span class="constructor">GetMeth</span></code></td></tr><tr id="type-impl.SetVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.SetVar" class="anchor"></a><code>| <span class="constructor">SetVar</span></code></td></tr><tr id="type-impl.AppConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppConst" class="anchor"></a><code>| <span class="constructor">AppConst</span></code></td></tr><tr id="type-impl.AppVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppVar" class="anchor"></a><code>| <span class="constructor">AppVar</span></code></td></tr><tr id="type-impl.AppEnv" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppEnv" class="anchor"></a><code>| <span class="constructor">AppEnv</span></code></td></tr><tr id="type-impl.AppMeth" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppMeth" class="anchor"></a><code>| <span class="constructor">AppMeth</span></code></td></tr><tr id="type-impl.AppConstConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppConstConst" class="anchor"></a><code>| <span class="constructor">AppConstConst</span></code></td></tr><tr id="type-impl.AppConstVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppConstVar" class="anchor"></a><code>| <span class="constructor">AppConstVar</span></code></td></tr><tr id="type-impl.AppConstEnv" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppConstEnv" class="anchor"></a><code>| <span class="constructor">AppConstEnv</span></code></td></tr><tr id="type-impl.AppConstMeth" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppConstMeth" class="anchor"></a><code>| <span class="constructor">AppConstMeth</span></code></td></tr><tr id="type-impl.AppVarConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppVarConst" class="anchor"></a><code>| <span class="constructor">AppVarConst</span></code></td></tr><tr id="type-impl.AppEnvConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppEnvConst" class="anchor"></a><code>| <span class="constructor">AppEnvConst</span></code></td></tr><tr id="type-impl.AppMethConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.AppMethConst" class="anchor"></a><code>| <span class="constructor">AppMethConst</span></code></td></tr><tr id="type-impl.MethAppConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.MethAppConst" class="anchor"></a><code>| <span class="constructor">MethAppConst</span></code></td></tr><tr id="type-impl.MethAppVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.MethAppVar" class="anchor"></a><code>| <span class="constructor">MethAppVar</span></code></td></tr><tr id="type-impl.MethAppEnv" class="anchored"><td class="def variant constructor"><a href="#type-impl.MethAppEnv" class="anchor"></a><code>| <span class="constructor">MethAppEnv</span></code></td></tr><tr id="type-impl.MethAppMeth" class="anchored"><td class="def variant constructor"><a href="#type-impl.MethAppMeth" class="anchor"></a><code>| <span class="constructor">MethAppMeth</span></code></td></tr><tr id="type-impl.SendConst" class="anchored"><td class="def variant constructor"><a href="#type-impl.SendConst" class="anchor"></a><code>| <span class="constructor">SendConst</span></code></td></tr><tr id="type-impl.SendVar" class="anchored"><td class="def variant constructor"><a href="#type-impl.SendVar" class="anchor"></a><code>| <span class="constructor">SendVar</span></code></td></tr><tr id="type-impl.SendEnv" class="anchored"><td class="def variant constructor"><a href="#type-impl.SendEnv" class="anchor"></a><code>| <span class="constructor">SendEnv</span></code></td></tr><tr id="type-impl.SendMeth" class="anchored"><td class="def variant constructor"><a href="#type-impl.SendMeth" class="anchor"></a><code>| <span class="constructor">SendMeth</span></code></td></tr><tr id="type-impl.Closure" class="anchored"><td class="def variant constructor"><a href="#type-impl.Closure" class="anchor"></a><code>| <span class="constructor">Closure</span> <span class="keyword">of</span> <a href="index.html#type-closure">closure</a></code></td></tr></table></div><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="spec type" id="type-params" class="anchored"><a href="#type-params" class="anchor"></a><code><span class="keyword">type</span> params = {</code><table><tr id="type-params.compact_table" class="anchored"><td class="def record field"><a href="#type-params.compact_table" class="anchor"></a><code><span class="keyword">mutable</span> compact_table : bool;</code></td></tr><tr id="type-params.copy_parent" class="anchored"><td class="def record field"><a href="#type-params.copy_parent" class="anchor"></a><code><span class="keyword">mutable</span> copy_parent : bool;</code></td></tr><tr id="type-params.clean_when_copying" class="anchored"><td class="def record field"><a href="#type-params.clean_when_copying" class="anchor"></a><code><span class="keyword">mutable</span> clean_when_copying : bool;</code></td></tr><tr id="type-params.retry_count" class="anchored"><td class="def record field"><a href="#type-params.retry_count" class="anchor"></a><code><span class="keyword">mutable</span> retry_count : int;</code></td></tr><tr id="type-params.bucket_small_size" class="anchored"><td class="def record field"><a href="#type-params.bucket_small_size" class="anchor"></a><code><span class="keyword">mutable</span> bucket_small_size : int;</code></td></tr></table><code>}</code></div><div class="spec value" id="val-params" class="anchored"><a href="#val-params" class="anchor"></a><code><span class="keyword">val</span> params : <a href="index.html#type-params">params</a></code></div><h2 id="statistics"><a href="#statistics" class="anchor"></a>Statistics</h2><div class="spec type" id="type-stats" class="anchored"><a href="#type-stats" class="anchor"></a><code><span class="keyword">type</span> stats = {</code><table><tr id="type-stats.classes" class="anchored"><td class="def record field"><a href="#type-stats.classes" class="anchor"></a><code>classes : int;</code></td></tr><tr id="type-stats.methods" class="anchored"><td class="def record field"><a href="#type-stats.methods" class="anchor"></a><code>methods : int;</code></td></tr><tr id="type-stats.inst_vars" class="anchored"><td class="def record field"><a href="#type-stats.inst_vars" class="anchor"></a><code>inst_vars : int;</code></td></tr></table><code>}</code></div><div class="spec value" id="val-stats" class="anchored"><a href="#val-stats" class="anchor"></a><code><span class="keyword">val</span> stats : unit <span>&#45;&gt;</span> <a href="index.html#type-stats">stats</a></code></div></div></body></html>