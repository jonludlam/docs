<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sys (core.Core.Sys)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">core</a> &#x00BB; <a href="../index.html">Core</a> &#x00BB; Sys</nav><header><h1>Module <code>Core.Sys</code></h1><p>System interface.</p></header><nav class="toc"><ul><li><a href="#optimization">Optimization</a></li></ul></nav><div class="content"><div><div class="spec value" id="val-get_argv" class="anchored"><a href="#val-get_argv" class="anchor"></a><code><span class="keyword">val</span> get_argv : unit <span>&#45;&gt;</span> <span>string array</span></code></div><div><p>The command line arguments given to the process. The first element is the command name used to invoke the program. The following elements are the command-line arguments given to the program.</p><p><code>get_argv</code> is a function because the external function <code>caml_sys_modify_argv</code> can replace the array starting in OCaml 4.09.</p></div></div><div><div class="spec value" id="val-argv" class="anchored"><a href="#val-argv" class="anchor"></a><code><span class="keyword">val</span> argv : <span>string array</span></code></div><div><p>A single result from <code>get_argv ()</code>.</p></div></div><div><div class="spec value" id="val-executable_name" class="anchored"><a href="#val-executable_name" class="anchor"></a><code><span class="keyword">val</span> executable_name : string</code></div><div><p>The name of the file containing the executable currently running.</p></div></div><aside><p>For all of the following functions, <code>?follow_symlinks</code> defaults to <code>true</code>.</p></aside><div><div class="spec value" id="val-file_exists" class="anchored"><a href="#val-file_exists" class="anchor"></a><code><span class="keyword">val</span> file_exists : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></code></div><div><p><code>file_exists ~follow_symlinks path</code></p><p>Test whether the file in <code>path</code> exists on the file system. If <code>follow_symlinks</code> is <code>true</code> and <code>path</code> is a symlink the result concerns the target of the symlink.</p><p><code>`Unknown</code> is returned for files for which we cannot successfully determine whether they are on the system or not (e.g. files in directories to which we do not have read permission).</p></div></div><div><div class="spec value" id="val-file_exists_exn" class="anchored"><a href="#val-file_exists_exn" class="anchor"></a><code><span class="keyword">val</span> file_exists_exn : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool</code></div><div><p>Same as <code>file_exists</code> but blows up on <code>`Unknown</code></p></div></div><div><div class="spec value" id="val-is_directory" class="anchored"><a href="#val-is_directory" class="anchor"></a><code><span class="keyword">val</span> is_directory : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></code></div><div><p>Returns <code>`Yes</code> if the file exists and is a directory</p></div></div><div><div class="spec value" id="val-is_file" class="anchored"><a href="#val-is_file" class="anchor"></a><code><span class="keyword">val</span> is_file : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></code></div><div><p>Returns <code>`Yes</code> if the file exists and is a regular file</p></div></div><div class="spec value" id="val-is_directory_exn" class="anchored"><a href="#val-is_directory_exn" class="anchor"></a><code><span class="keyword">val</span> is_directory_exn : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool</code></div><div class="spec value" id="val-is_file_exn" class="anchored"><a href="#val-is_file_exn" class="anchor"></a><code><span class="keyword">val</span> is_file_exn : <span>?&#8288;follow_symlinks:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool</code></div><div><div class="spec value" id="val-remove" class="anchored"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : string <span>&#45;&gt;</span> unit</code></div><div><p>Remove the given file name from the file system.</p></div></div><div><div class="spec value" id="val-rename" class="anchored"><a href="#val-rename" class="anchor"></a><code><span class="keyword">val</span> rename : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></div><div><p>Rename a file. The first argument is the old name and the second is the new name. If there is already another file under the new name, <code>rename</code> may replace it, or raise an exception, depending on your operating system.</p></div></div><div><div class="spec value" id="val-getenv" class="anchored"><a href="#val-getenv" class="anchor"></a><code><span class="keyword">val</span> getenv : string <span>&#45;&gt;</span> <span>string option</span></code></div><div><p>Return the value associated to a variable in the process environment unless the process has special privileges. Return <code>None</code> if the variable is unbound or the process has special privileges.</p></div></div><div class="spec value" id="val-getenv_exn" class="anchored"><a href="#val-getenv_exn" class="anchor"></a><code><span class="keyword">val</span> getenv_exn : string <span>&#45;&gt;</span> string</code></div><div><div class="spec value" id="val-unsafe_getenv" class="anchored"><a href="#val-unsafe_getenv" class="anchor"></a><code><span class="keyword">val</span> unsafe_getenv : string <span>&#45;&gt;</span> <span>string option</span></code></div><div><p>Return the value associated to a variable in the process environment.</p><p>Unlike <a href="index.html#val-getenv"><code>getenv</code></a>, this function returns the value even if the process has special privileges. It is considered unsafe because the programmer of a setuid or setgid program must be careful to avoid using maliciously crafted environment variables in the search path for executables, the locations for temporary files or logs, and the like.</p></div></div><div class="spec value" id="val-unsafe_getenv_exn" class="anchored"><a href="#val-unsafe_getenv_exn" class="anchor"></a><code><span class="keyword">val</span> unsafe_getenv_exn : string <span>&#45;&gt;</span> string</code></div><div><div class="spec value" id="val-command" class="anchored"><a href="#val-command" class="anchor"></a><code><span class="keyword">val</span> command : string <span>&#45;&gt;</span> int</code></div><div><p>Execute the given shell command and return its exit code.</p></div></div><div><div class="spec value" id="val-command_exn" class="anchored"><a href="#val-command_exn" class="anchor"></a><code><span class="keyword">val</span> command_exn : string <span>&#45;&gt;</span> unit</code></div><div><p><code>command_exn command</code> runs <code>command</code> and then raises an exception if it returns with nonzero exit status.</p></div></div><div><div class="spec value" id="val-quote" class="anchored"><a href="#val-quote" class="anchor"></a><code><span class="keyword">val</span> quote : string <span>&#45;&gt;</span> string</code></div><div><p><code>quote s</code> quotes the string in a format suitable for the shell of the current system (e.g. suitable for <code>command</code>). On Unix, this function only quotes as necessary, which makes its output more legible than <code>Filename.quote</code>.</p><p>WARNING: This may not work with some shells, but should work with sh, bash, and zsh.</p></div></div><div><div class="spec value" id="val-chdir" class="anchored"><a href="#val-chdir" class="anchor"></a><code><span class="keyword">val</span> chdir : string <span>&#45;&gt;</span> unit</code></div><div><p>Change the current working directory of the process.</p></div></div><div><div class="spec value" id="val-getcwd" class="anchored"><a href="#val-getcwd" class="anchor"></a><code><span class="keyword">val</span> getcwd : unit <span>&#45;&gt;</span> string</code></div><div><p>Return the current working directory of the process.</p></div></div><div><div class="spec value" id="val-readdir" class="anchored"><a href="#val-readdir" class="anchor"></a><code><span class="keyword">val</span> readdir : string <span>&#45;&gt;</span> <span>string array</span></code></div><div><p>Return the names of all files present in the given directory. Names denoting the current directory and the parent directory (<code>&quot;.&quot;</code> and <code>&quot;..&quot;</code> in Unix) are not returned. Each string in the result is a file name rather than a complete path. There is no guarantee that the name strings in the resulting array will appear in any specific order; they are not, in particular, guaranteed to appear in alphabetical order.</p></div></div><div><div class="spec value" id="val-fold_dir" class="anchored"><a href="#val-fold_dir" class="anchor"></a><code><span class="keyword">val</span> fold_dir : <span>init:<span class="type-var">'acc</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'acc</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'acc</span>)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'acc</span></code></div><div><p>Call <code>readdir</code>, and fold over the elements of the array.</p><dl><dt>raises Sys_error</dt><dd><p>_ if readdir fails. As with <code>readdir</code>, <code>&quot;.&quot;</code> and <code>&quot;..&quot;</code> are not returned raises the same exception than opendir and closedir.</p></dd></dl></div></div><div><div class="spec value" id="val-ls_dir" class="anchored"><a href="#val-ls_dir" class="anchor"></a><code><span class="keyword">val</span> ls_dir : string <span>&#45;&gt;</span> <span>string list</span></code></div><div><p>Same as <code>readdir</code>, but return a list rather than an array.</p></div></div><div><div class="spec value" id="val-interactive" class="anchored"><a href="#val-interactive" class="anchor"></a><code><span class="keyword">val</span> interactive : <span>bool <a href="../../../base/Caml/index.html#type-ref">Caml.ref</a></span></code></div><div><p>This reference is initially set to <code>false</code> in standalone programs and to <code>true</code> if the code is being executed under the interactive toplevel system <code>ocaml</code>.</p></div></div><div><div class="spec value" id="val-os_type" class="anchored"><a href="#val-os_type" class="anchor"></a><code><span class="keyword">val</span> os_type : string</code></div><div><p>Operating system currently executing the Caml program. One of</p><ul><li><code>&quot;Unix&quot;</code> (for all Unix versions, including Linux and Mac OS X),</li><li><code>&quot;Win32&quot;</code> (for MS-Windows, OCaml compiled with MSVC++ or Mingw),</li><li><code>&quot;Cygwin&quot;</code> (for MS-Windows, OCaml compiled with Cygwin).</li></ul></div></div><div><div class="spec value" id="val-word_size" class="anchored"><a href="#val-word_size" class="anchor"></a><code><span class="keyword">val</span> word_size : int</code></div><div><p>Size of one word on the machine currently executing the Caml program, in bits: 32 or 64.</p></div></div><div><div class="spec value" id="val-int_size" class="anchored"><a href="#val-int_size" class="anchor"></a><code><span class="keyword">val</span> int_size : int</code></div><div><p>Size of an int. It is 31 bits (resp. 63 bits) when using the OCaml compiler on a 32 bits (resp. 64 bits) platform. It may differ for other compilers, e.g. it is 32 bits when compiling to JavaScript. This is the same as <code>Core.Int.size_in_bits</code>. </p><dl><dt>since</dt><dd></dd></dl><p>4.03.0</p></div></div><div><div class="spec value" id="val-big_endian" class="anchored"><a href="#val-big_endian" class="anchor"></a><code><span class="keyword">val</span> big_endian : bool</code></div><div><p>Whether the machine currently executing the Caml program is big-endian.</p></div></div><div><div class="spec exception" id="exception-Break" class="anchored"><a href="#exception-Break" class="anchor"></a><code><span class="keyword">exception</span> <span class="exception">Break</span></code></div><div><p>Exception raised on interactive interrupt if <a href="index.html#val-catch_break"><code>Sys.catch_break</code></a> is on.</p></div></div><div><div class="spec value" id="val-catch_break" class="anchored"><a href="#val-catch_break" class="anchor"></a><code><span class="keyword">val</span> catch_break : bool <span>&#45;&gt;</span> unit</code></div><div><p>Warning: this function clobbers the Signal.int (SIGINT) handler. SIGINT is the signal that's sent to your program when you hit CTRL-C.</p><p>Warning: catch_break uses deep ocaml runtime magic to raise Sys.Break inside of the main execution context. Consider explicitly handling Signal.int instead. If all you want to do is terminate on CTRL-C you don't have to do any special setup, that's the default behavior.</p><p><code>catch_break</code> governs whether interactive interrupt (ctrl-C) terminates the program or raises the <code>Break</code> exception. Call <code>catch_break true</code> to enable raising <code>Break</code>, and <code>catch_break false</code> to let the system terminate the program on user interrupt.</p></div></div><div><div class="spec value" id="val-ocaml_version" class="anchored"><a href="#val-ocaml_version" class="anchor"></a><code><span class="keyword">val</span> ocaml_version : string</code></div><div><p><code>ocaml_version</code> is the version of Objective Caml. It is a string of the form <code>&quot;major.minor[.patchlevel][+additional-info]&quot;</code>, where <code>major</code>, <code>minor</code>, and <code>patchlevel</code> are integers, and <code>additional-info</code> is an arbitrary string. The <code>[.patchlevel]</code> and <code>[+additional-info]</code> parts may be absent.</p></div></div><div><div class="spec value" id="val-execution_mode" class="anchored"><a href="#val-execution_mode" class="anchor"></a><code><span class="keyword">val</span> execution_mode : unit <span>&#45;&gt;</span> <span>[ `Bytecode <span>| `Native</span> ]</span></code></div><div><p><code>execution_mode</code> tests whether the code being executed was compiled natively or to bytecode.</p></div></div><div><div class="spec external" id="val-c_int_size" class="anchored"><a href="#val-c_int_size" class="anchor"></a><code><span class="keyword">val</span> c_int_size : unit <span>&#45;&gt;</span> int</code></div><div><p><code>c_int_size</code> returns the number of bits in a C <code>int</code>, as specified in header files. Note that this can be different from <code>word_size</code> and <code>Nativeint.num_bits</code>. For example, Linux x86-64 should have <code>word_size = 64</code>, but <code>c_int_size () = 32</code>.</p></div></div><div><div class="spec value" id="val-home_directory" class="anchored"><a href="#val-home_directory" class="anchor"></a><code><span class="keyword">val</span> home_directory : unit <span>&#45;&gt;</span> string</code></div><div><p>Return the home directory, using the <code>HOME</code> environment variable if that is defined, and if not, using the effective user's information in the Unix password database.</p></div></div><h6 id="optimization"><a href="#optimization" class="anchor"></a>Optimization</h6><div><div class="spec external" id="val-opaque_identity" class="anchored"><a href="#val-opaque_identity" class="anchor"></a><code><span class="keyword">val</span> opaque_identity : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></div><div><p>For the purposes of optimization, <code>opaque_identity</code> behaves like an unknown (and thus possibly side-effecting) function. At runtime, <code>opaque_identity</code> disappears altogether. A typical use of this function is to prevent pure computations from being optimized away in benchmarking loops. For example:</p><pre><code>for _round = 1 to 100_000 do
  ignore (Sys.opaque_identity (my_pure_computation ()))
done</code></pre></div></div><div><div class="spec value" id="val-override_argv" class="anchored"><a href="#val-override_argv" class="anchor"></a><code><span class="keyword">val</span> override_argv : <span>string array</span> <span>&#45;&gt;</span> unit</code></div><div><p><code>override_argv new_argv</code> makes subsequent calls to <a href="index.html#val-get_argv"><code>get_argv</code></a> return <code>new_argv</code>.</p><p>Prior to OCaml version 4.09, this function has two noteworthy behaviors:</p><ul><li>it may raise if the length of <code>new_argv</code> is greater than the length of <code>argv</code> before the call;</li><li>it re-uses and mutates the previous <code>argv</code> value instead of using the new one; and</li><li>it even mutates its length, which can be observed by inspecting the array returned by an earlier call to <a href="index.html#val-get_argv"><code>get_argv</code></a>.</li></ul></div></div></div></body></html>