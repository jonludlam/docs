<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mirage (mirage.Mirage)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">mirage</a> &#x00BB; Mirage</nav><header><h1>Module <code>Mirage</code></h1><p>Mirage combinators.</p><p><code>Mirage</code> devices a set of devices and combinator to to define portable applications across all platforms that MirageOS supports.</p><p><em>Release v3.8.0</em></p></header><nav class="toc"><ul><li><a href="#general-mirage-devices">General mirage devices</a></li><li><a href="#time">Time</a></li><li><a href="#clocks">Clocks</a></li><li><a href="#log-reporters">Log reporters</a></li><li><a href="#random">Random</a></li><li><a href="#consoles">Consoles</a></li><li><a href="#block-devices">Block devices</a></li><li><a href="#static-key/value-stores">Static key/value stores</a></li><li><a href="#filesystem">Filesystem</a></li><li><a href="#network-interfaces">Network interfaces</a></li><li><a href="#ethernet-configuration">Ethernet configuration</a></li><li><a href="#arp-configuration">ARP configuration</a></li><li><a href="#ip-configuration">IP configuration</a></li><li><a href="#udp-configuration">UDP configuration</a></li><li><a href="#tcp-configuration">TCP configuration</a></li><li><a href="#network-stack-configuration">Network stack configuration</a></li><li><a href="#resolver-configuration">Resolver configuration</a></li><li><a href="#syslog-configuration">Syslog configuration</a></li><li><a href="#entropy">Entropy</a></li><li><a href="#conduit-configuration">Conduit configuration</a></li><li><a href="#http-configuration">HTTP configuration</a></li><li><a href="#argv-configuration">Argv configuration</a></li><li><a href="#other-devices">Other devices</a></li><li><a href="#application-registering">Application registering</a></li></ul></nav><div class="content"><div><div class="spec module" id="module-Key" class="anchored"><a href="#module-Key" class="anchor"></a><code><span class="keyword">module</span> <a href="Key/index.html">Key</a> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../Mirage_key/index.html">Mirage_key</a> <span class="keyword">end</span></code></div><div><p>Configuration keys.</p></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../functoria/Functoria_app/module-type-DSL/index.html">Functoria_app.DSL</a></code></span></summary><h2 id="combinators"><a href="#combinators" class="anchor"></a>Combinators</h2><div><div class="spec type" id="type-typ" class="anchored"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> <span>_ typ</span> = <span><span class="type-var">_</span> <a href="../../functoria/Functoria/index.html#type-typ">Functoria.typ</a></span> = </code><table><tr id="type-typ.Type" class="anchored"><td class="def variant constructor"><a href="#type-typ.Type" class="anchor"></a><code>| <span class="constructor">Type</span> : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></span></code></td></tr><tr id="type-typ.Function" class="anchored"><td class="def variant constructor"><a href="#type-typ.Function" class="anchor"></a><code>| <span class="constructor">Function</span> : <span><span class="type-var">'b</span> <a href="index.html#type-typ">typ</a></span> * <span><span class="type-var">'c</span> <a href="index.html#type-typ">typ</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>)</span> <a href="index.html#type-typ">typ</a></span></code></td></tr></table></div><div><p>The type for values representing module types.</p></div></div><div><div class="spec value" id="val-typ" class="anchored"><a href="#val-typ" class="anchor"></a><code><span class="keyword">val</span> typ : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></span></code></div><div><p><code>type t</code> is a value representing the module type <code>t</code>.</p></div></div><div><div class="spec value" id="val-(@-&gt;)" class="anchored"><a href="#val-(@-&gt;)" class="anchor"></a><code><span class="keyword">val</span> (@-&gt;) : <span><span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-typ">typ</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Construct a functor type from a type and an existing functor type. This corresponds to prepending a parameter to the list of functor parameters. For example:</p><pre><code>kv_ro @-&gt; ip @-&gt; kv_ro </code></pre><p>This describes a functor type that accepts two arguments -- a <code>kv_ro</code> and an <code>ip</code> device -- and returns a <code>kv_ro</code>.</p></div></div><div><div class="spec type" id="type-job" class="anchored"><a href="#type-job" class="anchor"></a><code><span class="keyword">type</span> job = <a href="../../functoria/Functoria/index.html#type-job">Functoria.job</a></code></div><div><p>Type for job values.</p></div></div><div><div class="spec value" id="val-job" class="anchored"><a href="#val-job" class="anchor"></a><code><span class="keyword">val</span> job : <span><a href="index.html#type-job">job</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p><code>job</code> is the signature for user's application main module.</p></div></div><div><div class="spec type" id="type-impl" class="anchored"><a href="#type-impl" class="anchor"></a><code><span class="keyword">type</span> <span>'a impl</span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria/index.html#type-impl">Functoria.impl</a></span></code></div><div><p>The type for values representing module implementations.</p></div></div><div><div class="spec value" id="val-($)" class="anchored"><a href="#val-($)" class="anchor"></a><code><span class="keyword">val</span> ($) : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>m $ a</code> applies the functor <code>m</code> to the module <code>a</code>.</p></div></div><div><div class="spec type" id="type-abstract_impl" class="anchored"><a href="#type-abstract_impl" class="anchor"></a><code><span class="keyword">type</span> abstract_impl = <a href="../../functoria/Functoria/index.html#type-abstract_impl">Functoria.abstract_impl</a> = </code><table><tr id="type-abstract_impl.Abstract" class="anchored"><td class="def variant constructor"><a href="#type-abstract_impl.Abstract" class="anchor"></a><code>| <span class="constructor">Abstract</span> : <span><span class="type-var">_</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <a href="index.html#type-abstract_impl">abstract_impl</a></code></td></tr></table></div><div><p>The type for abstract implementations.</p></div></div><div><div class="spec value" id="val-abstract" class="anchored"><a href="#val-abstract" class="anchor"></a><code><span class="keyword">val</span> abstract : <span><span class="type-var">_</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <a href="index.html#type-abstract_impl">abstract_impl</a></code></div><div><p><code>abstract t</code> is <code>t</code> but with its type variable abstracted. Useful for dependencies.</p></div></div><h2 id="keys"><a href="#keys" class="anchor"></a>Keys</h2><div><div class="spec type" id="type-key" class="anchored"><a href="#type-key" class="anchor"></a><code><span class="keyword">type</span> key = <a href="../../functoria/Functoria_key/index.html#type-t">Functoria_key.t</a></code></div><div><p>The type for command-line keys. See <a href="../../functoria/Functoria_key/index.html#type-t"><code>Functoria_key.t</code></a>.</p></div></div><div><div class="spec type" id="type-context" class="anchored"><a href="#type-context" class="anchor"></a><code><span class="keyword">type</span> context = <a href="../../functoria/Functoria_key/index.html#type-context">Functoria_key.context</a></code></div><div><p>The type for keys' parsing context. See <a href="../../functoria/Functoria_key/index.html#type-context"><code>Functoria_key.context</code></a>.</p></div></div><div><div class="spec type" id="type-value" class="anchored"><a href="#type-value" class="anchor"></a><code><span class="keyword">type</span> <span>'a value</span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/index.html#type-value">Functoria_key.value</a></span></code></div><div><p>The type for values parsed from the command-line. See <a href="../../functoria/Functoria_key/index.html#type-value"><code>Functoria_key.value</code></a>.</p></div></div><div><div class="spec value" id="val-if_impl" class="anchored"><a href="#val-if_impl" class="anchor"></a><code><span class="keyword">val</span> if_impl : <span>bool <a href="index.html#type-value">value</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>if_impl v impl1 impl2</code> is <code>impl1</code> if <code>v</code> is resolved to true and <code>impl2</code> otherwise.</p></div></div><div><div class="spec value" id="val-match_impl" class="anchored"><a href="#val-match_impl" class="anchor"></a><code><span class="keyword">val</span> match_impl : <span><span class="type-var">'b</span> <a href="index.html#type-value">value</a></span> <span>&#45;&gt;</span> <span>default:<span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span> * <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span>)</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>match_impl v cases ~default</code> chooses the implementation amongst <code>cases</code> by matching the <code>v</code>'s value. <code>default</code> is chosen if no value matches.</p></div></div><div><div class="spec module-type" id="module-type-KEY" class="anchored"><a href="#module-type-KEY" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-KEY/index.html">KEY</a> = <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../functoria/Functoria_key/index.html">Functoria_key</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="../../functoria/Functoria_key/Arg/index.html#type-converter">Arg.converter</a></span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/Arg/index.html#type-converter">Functoria_key.Arg.converter</a></span> <span class="keyword">and</span> <span class="keyword">type</span> <span>'a <a href="../../functoria/Functoria_key/Arg/index.html#type-t">Arg.t</a></span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/Arg/index.html#type-t">Functoria_key.Arg.t</a></span> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../functoria/Functoria_key/Arg/index.html#type-info">Arg.info</a> = <a href="../../functoria/Functoria_key/Arg/index.html#type-info">Functoria_key.Arg.info</a> <span class="keyword">and</span> <span class="keyword">type</span> <span>'a <a href="../../functoria/Functoria_key/index.html#type-value">value</a></span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/index.html#type-value">Functoria_key.value</a></span> <span class="keyword">and</span> <span class="keyword">type</span> <span>'a <a href="../../functoria/Functoria_key/index.html#type-key">key</a></span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/index.html#type-key">Functoria_key.key</a></span> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../functoria/Functoria_key/index.html#type-t">t</a> = <a href="../../functoria/Functoria_key/index.html#type-t">Functoria_key.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../functoria/Functoria_key/Set/index.html#type-t">Set.t</a> = <a href="../../functoria/Functoria_key/Set/index.html#type-t">Functoria_key.Set.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <span>'a <a href="../../functoria/Functoria_key/Alias/index.html#type-t">Alias.t</a></span> = <span><span class="type-var">'a</span> <a href="../../functoria/Functoria_key/Alias/index.html#type-t">Functoria_key.Alias.t</a></span> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../functoria/Functoria_key/index.html#type-context">context</a> = <a href="../../functoria/Functoria_key/index.html#type-context">Functoria_key.context</a></code></div><div><p>The signature for run-time and configure-time command-line keys.</p></div></div><h2 id="pkg"><a href="#pkg" class="anchor"></a>Package dependencies</h2><aside><p>For specifying opam package dependencies, the type <a href="index.html#val-package"><code>package</code></a> is used. It consists of the opam package name, the ocamlfind names, and optional lower and upper bounds. The version constraints are merged with other modules.</p></aside><div><div class="spec type" id="type-package" class="anchored"><a href="#type-package" class="anchor"></a><code><span class="keyword">type</span> package = <span class="keyword">private</span> <a href="../../functoria/Functoria/index.html#type-package">Functoria.package</a> = {</code><table><tr id="type-package.opam" class="anchored"><td class="def record field"><a href="#type-package.opam" class="anchor"></a><code>opam : string;</code></td></tr><tr id="type-package.pin" class="anchored"><td class="def record field"><a href="#type-package.pin" class="anchor"></a><code>pin : <span>string option</span>;</code></td></tr><tr id="type-package.build" class="anchored"><td class="def record field"><a href="#type-package.build" class="anchor"></a><code>build : bool;</code></td></tr><tr id="type-package.ocamlfind" class="anchored"><td class="def record field"><a href="#type-package.ocamlfind" class="anchor"></a><code>ocamlfind : <a href="../../astring/Astring/String/Set/index.html#type-t">Astring.String.Set.t</a>;</code></td></tr><tr id="type-package.min" class="anchored"><td class="def record field"><a href="#type-package.min" class="anchor"></a><code>min : <a href="../../astring/Astring/String/Set/index.html#type-t">Astring.String.Set.t</a>;</code></td></tr><tr id="type-package.max" class="anchored"><td class="def record field"><a href="#type-package.max" class="anchor"></a><code>max : <a href="../../astring/Astring/String/Set/index.html#type-t">Astring.String.Set.t</a>;</code></td></tr></table><code>}</code></div><div><p>The type of a package</p></div></div><div><div class="spec value" id="val-package" class="anchored"><a href="#val-package" class="anchor"></a><code><span class="keyword">val</span> package : <span>?&#8288;build:bool</span> <span>&#45;&gt;</span> <span>?&#8288;sublibs:<span>string list</span></span> <span>&#45;&gt;</span> <span>?&#8288;ocamlfind:<span>string list</span></span> <span>&#45;&gt;</span> <span>?&#8288;min:string</span> <span>&#45;&gt;</span> <span>?&#8288;max:string</span> <span>&#45;&gt;</span> <span>?&#8288;pin:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-package">package</a></code></div><div><p><code>package ~build ~sublibs ~ocamlfind ~min ~max ~pin opam</code> is a <code>package</code>. <code>Build</code> indicates a build-time dependency only, defaults to <code>false</code>. The ocamlfind name is by default the same as <code>opam</code>, you can specify <code>~sublibs</code> to add additional sublibraries (e.g. <code>~sublibs:[&quot;mirage&quot;] &quot;foo&quot;</code> will result in the findlib names <code> [&quot;foo&quot;; &quot;foo.mirage&quot;] </code>. In case the findlib name is disjoint (or empty), use <code>~ocamlfind</code>. Specifying both <code>~ocamlfind</code> and <code>~sublibs</code> leads to an invalid argument. Version constraints are given as <code>min</code> (inclusive) and <code>max</code> (exclusive). If <code>pin</code> is provided, a <a href="https://opam.ocaml.org/doc/Manual.html#opamfield-pin-depends">pin-depends</a> is generated.</p></div></div><h2 id="app"><a href="#app" class="anchor"></a>Application Builder</h2><aside><p>Values of type <a href="index.html#val-impl"><code>impl</code></a> are tied to concrete module implementation with the <a href="class-foreign/index.html"><code>foreign</code></a> construct. Module implementations of type <a href="index.html#val-job"><code>job</code></a> can then be <a href="../../functoria/Functoria_app/Make/index.html#val-register">registered</a> into an application builder. The builder is in charge if parsing the command-line arguments and of generating code for the final application. See <a href="../../functoria/Functoria_app/index.html"><code>Functoria_app</code></a> for details.</p></aside><div><div class="spec value" id="val-foreign" class="anchored"><a href="#val-foreign" class="anchor"></a><code><span class="keyword">val</span> foreign : <span>?&#8288;packages:<span><a href="index.html#type-package">package</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;keys:<span><a href="index.html#type-key">key</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;deps:<span><a href="index.html#type-abstract_impl">abstract_impl</a> list</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>foreign name typ</code> is the module <code>name</code>, having the module type <code>typ</code>.</p><ul><li>If <code>packages</code> is set, then the given packages are installed before compiling the current application.</li><li>If <code>keys</code> is set, use the given <a href="../../functoria/Functoria_key/index.html#type-key">keys</a> to parse at configure and runtime the command-line arguments before calling <code>name.connect</code>.</li><li>If <code>deps</code> is set, the given list of <a href="index.html#type-abstract_impl">abstract</a> implementations is added as data-dependencies: they will be initialized before calling <code>name.connect</code>.</li></ul><p>For a more flexible definition of packages, or for a custom configuration step, see the <a href="class-type-configurable/index.html"><code>configurable</code></a> class type and the <a href="class-foreign/index.html"><code>foreign</code></a> class.</p></div></div><div><div class="spec module" id="module-Info" class="anchored"><a href="#module-Info" class="anchor"></a><code><span class="keyword">module</span> Info = <a href="../../functoria/Functoria/Info/index.html">Functoria.Info</a></code></div><div><p>Information about the final application.</p></div></div><div><div class="spec class-type" id="class-type-configurable" class="anchored"><a href="#class-type-configurable" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">type</span> 'ty <a href="class-type-configurable/index.html">configurable</a><span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Signature for configurable module implementations. A <code>configurable</code> is a module implementation which contains a runtime state which can be set either at configuration time (by the application builder) or at runtime, using command-line arguments.</p></div></div><div><div class="spec value" id="val-impl" class="anchored"><a href="#val-impl" class="anchor"></a><code><span class="keyword">val</span> impl : <span><span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>impl c</code> is the implementation of the configurable <code>c</code>.</p></div></div><div><div class="spec class" id="class-base_configurable" class="anchored"><a href="#class-base_configurable" class="anchor"></a><code><span class="keyword">class</span>  <a href="class-base_configurable/index.html">base_configurable</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p><code>base_configurable</code> pre-defining many methods from the <a href="class-type-configurable/index.html"><code>configurable</code></a> class. To be used as follow:</p></div></div><div><div class="spec class" id="class-foreign" class="anchored"><a href="#class-foreign" class="anchor"></a><code><span class="keyword">class</span> 'a <a href="class-foreign/index.html">foreign</a> : ?&#8288;packages:<span><a href="index.html#type-package">package</a> list</span> <span>&#45;&gt;</span> ?&#8288;keys:<span><a href="index.html#type-key">key</a> list</span> <span>&#45;&gt;</span> ?&#8288;deps:<span><a href="index.html#type-abstract_impl">abstract_impl</a> list</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a></span></code></div><div><p>This class can be inherited to define a <a href="class-type-configurable/index.html"><code>configurable</code></a> with an API similar to <a href="class-foreign/index.html"><code>foreign</code></a>.</p></div></div><h2 id="sharing"><a href="#sharing" class="anchor"></a>Sharing</h2><div><div class="spec value" id="val-hash" class="anchored"><a href="#val-hash" class="anchor"></a><code><span class="keyword">val</span> hash : <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> int</code></div><div><p><code>hash</code> is the hash function on implementations. FIXME(samoht) expand on how it works.</p></div></div><div><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> bool</code></div><div><p><code>equal</code> is the equality over implementations.</p></div></div><div><div class="spec module" id="module-ImplTbl" class="anchored"><a href="#module-ImplTbl" class="anchor"></a><code><span class="keyword">module</span> ImplTbl = <a href="../../functoria/Functoria/ImplTbl/index.html">Functoria.ImplTbl</a></code></div><div><p>Hashtbl of implementations.</p></div></div></details></div></div></div><h3 id="general-mirage-devices"><a href="#general-mirage-devices" class="anchor"></a>General mirage devices</h3><div><div class="spec type" id="type-tracing" class="anchored"><a href="#type-tracing" class="anchor"></a><code><span class="keyword">type</span> tracing</code></div><div><p>The type for tracing.</p></div></div><div><div class="spec value" id="val-tracing" class="anchored"><a href="#val-tracing" class="anchor"></a><code><span class="keyword">val</span> tracing : <span><a href="index.html#type-tracing">tracing</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <a href="index.html#val-tracing"><code>tracing</code></a> type.</p></div></div><div><div class="spec value" id="val-mprof_trace" class="anchored"><a href="#val-mprof_trace" class="anchor"></a><code><span class="keyword">val</span> mprof_trace : <span>size:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-tracing">tracing</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use mirage-profile to trace the unikernel. On Unix, this creates and mmaps a file called &quot;trace.ctf&quot;. On Xen, it shares the trace buffer with dom0.</p><dl><dt>parameter size:</dt><dd><p>size of the ring buffer to use.</p></dd></dl></div></div><div class="spec type" id="type-qubesdb" class="anchored"><a href="#type-qubesdb" class="anchor"></a><code><span class="keyword">type</span> qubesdb</code></div><div><div class="spec value" id="val-qubesdb" class="anchored"><a href="#val-qubesdb" class="anchor"></a><code><span class="keyword">val</span> qubesdb : <span><a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>For the Qubes target, the Qubes database from which to look up * dynamic runtime configuration information.</p></div></div><div><div class="spec value" id="val-default_qubesdb" class="anchored"><a href="#val-default_qubesdb" class="anchor"></a><code><span class="keyword">val</span> default_qubesdb : <span><a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>A default qubes database, guessed from the usual valid configurations.</p></div></div><h3 id="time"><a href="#time" class="anchor"></a>Time</h3><div><div class="spec type" id="type-time" class="anchored"><a href="#type-time" class="anchor"></a><code><span class="keyword">type</span> time</code></div><div><p>Abstract type for timers.</p></div></div><div><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span class="keyword">val</span> time : <span><a href="index.html#type-time">time</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.TIME</code> signature.</p></div></div><div><div class="spec value" id="val-default_time" class="anchored"><a href="#val-default_time" class="anchor"></a><code><span class="keyword">val</span> default_time : <span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>The default timer implementation.</p></div></div><h3 id="clocks"><a href="#clocks" class="anchor"></a>Clocks</h3><div><div class="spec type" id="type-pclock" class="anchored"><a href="#type-pclock" class="anchor"></a><code><span class="keyword">type</span> pclock</code></div><div><p>Abstract type for POSIX clocks.</p></div></div><div><div class="spec value" id="val-pclock" class="anchored"><a href="#val-pclock" class="anchor"></a><code><span class="keyword">val</span> pclock : <span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types</code>.PCLOCK signature.</p></div></div><div><div class="spec value" id="val-default_posix_clock" class="anchored"><a href="#val-default_posix_clock" class="anchor"></a><code><span class="keyword">val</span> default_posix_clock : <span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>The default mirage-clock PCLOCK implementation.</p></div></div><div><div class="spec type" id="type-mclock" class="anchored"><a href="#type-mclock" class="anchor"></a><code><span class="keyword">type</span> mclock</code></div><div><p>Abstract type for monotonic clocks</p></div></div><div><div class="spec value" id="val-mclock" class="anchored"><a href="#val-mclock" class="anchor"></a><code><span class="keyword">val</span> mclock : <span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types</code>.MCLOCK signature.</p></div></div><div><div class="spec value" id="val-default_monotonic_clock" class="anchored"><a href="#val-default_monotonic_clock" class="anchor"></a><code><span class="keyword">val</span> default_monotonic_clock : <span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>The default mirage-clock MCLOCK implementation.</p></div></div><h3 id="log-reporters"><a href="#log-reporters" class="anchor"></a>Log reporters</h3><div><div class="spec type" id="type-reporter" class="anchored"><a href="#type-reporter" class="anchor"></a><code><span class="keyword">type</span> reporter</code></div><div><p>The type for log reporters.</p></div></div><div><div class="spec value" id="val-reporter" class="anchored"><a href="#val-reporter" class="anchor"></a><code><span class="keyword">val</span> reporter : <span><a href="index.html#type-reporter">reporter</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the log <a href="index.html#val-reporter"><code>reporter</code></a> type.</p></div></div><div><div class="spec value" id="val-default_reporter" class="anchored"><a href="#val-default_reporter" class="anchor"></a><code><span class="keyword">val</span> default_reporter : <span>?&#8288;clock:<span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;ring_size:int</span> <span>&#45;&gt;</span> <span>?&#8288;level:<a href="../../logs/Logs/index.html#type-level">Logs.level</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>default_reporter ?clock ?level ()</code> is the log reporter that prints log messages to the console, timestampted with <code>clock</code>. If not provided, the default clock is <a href="index.html#val-default_posix_clock"><code>default_posix_clock</code></a>. <code>level</code> is the default log threshold. It is <code>Logs.Info</code> if not specified.</p></div></div><div><div class="spec value" id="val-no_reporter" class="anchored"><a href="#val-no_reporter" class="anchor"></a><code><span class="keyword">val</span> no_reporter : <span><a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>no_reporter</code> disable log reporting.</p></div></div><h3 id="random"><a href="#random" class="anchor"></a>Random</h3><div><div class="spec type" id="type-random" class="anchored"><a href="#type-random" class="anchor"></a><code><span class="keyword">type</span> random</code></div><div><p>Abstract type for random sources.</p></div></div><div><div class="spec value" id="val-random" class="anchored"><a href="#val-random" class="anchor"></a><code><span class="keyword">val</span> random : <span><a href="index.html#type-random">random</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.RANDOM</code> signature.</p></div></div><div><div class="spec value" id="val-stdlib_random" class="anchored"><a href="#val-stdlib_random" class="anchor"></a><code><span class="keyword">val</span> stdlib_random : <span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Passthrough to the OCaml Random generator.</p></div></div><div><div class="spec value" id="val-nocrypto_random" class="anchored"><a href="#val-nocrypto_random" class="anchor"></a><code><span class="keyword">val</span> nocrypto_random : <span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Passthrough to the Fortuna PRNG implemented in nocrypto.</p></div></div><div><div class="spec value" id="val-default_random" class="anchored"><a href="#val-default_random" class="anchor"></a><code><span class="keyword">val</span> default_random : <span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Default PRNG device to be used in unikernels. It uses getrandom/getentropy on Unix, and a Fortuna PRNG on other targets.</p></div></div><h3 id="consoles"><a href="#consoles" class="anchor"></a>Consoles</h3><div><div class="spec type" id="type-console" class="anchored"><a href="#type-console" class="anchor"></a><code><span class="keyword">type</span> console</code></div><div><p>Abstract type for consoles.</p></div></div><div><div class="spec value" id="val-console" class="anchored"><a href="#val-console" class="anchor"></a><code><span class="keyword">val</span> console : <span><a href="index.html#type-console">console</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.CONSOLE</code> signature.</p></div></div><div><div class="spec value" id="val-default_console" class="anchored"><a href="#val-default_console" class="anchor"></a><code><span class="keyword">val</span> default_console : <span><a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Default console implementation.</p></div></div><div><div class="spec value" id="val-custom_console" class="anchored"><a href="#val-custom_console" class="anchor"></a><code><span class="keyword">val</span> custom_console : string <span>&#45;&gt;</span> <span><a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Custom console implementation.</p></div></div><h3 id="block-devices"><a href="#block-devices" class="anchor"></a>Block devices</h3><div><div class="spec type" id="type-block" class="anchored"><a href="#type-block" class="anchor"></a><code><span class="keyword">type</span> block</code></div><div><p>Abstract type for raw block device configurations.</p></div></div><div><div class="spec value" id="val-block" class="anchored"><a href="#val-block" class="anchor"></a><code><span class="keyword">val</span> block : <span><a href="index.html#type-block">block</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.BLOCK</code> signature.</p></div></div><div><div class="spec value" id="val-block_of_file" class="anchored"><a href="#val-block_of_file" class="anchor"></a><code><span class="keyword">val</span> block_of_file : string <span>&#45;&gt;</span> <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use the given file as a raw block device.</p></div></div><div><div class="spec value" id="val-block_of_xenstore_id" class="anchored"><a href="#val-block_of_xenstore_id" class="anchor"></a><code><span class="keyword">val</span> block_of_xenstore_id : string <span>&#45;&gt;</span> <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use the given XenStore ID (ex: <code>/dev/xvdi1</code> or <code>51760</code>) as a raw block device.</p></div></div><div><div class="spec value" id="val-ramdisk" class="anchored"><a href="#val-ramdisk" class="anchor"></a><code><span class="keyword">val</span> ramdisk : string <span>&#45;&gt;</span> <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use a ramdisk with the given name.</p></div></div><div class="spec value" id="val-generic_block" class="anchored"><a href="#val-generic_block" class="anchor"></a><code><span class="keyword">val</span> generic_block : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;key:<span><span>[ `XenstoreId <span>| `BlockFile</span> <span>| `Ramdisk</span> ]</span> <a href="index.html#type-value">value</a></span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="static-key/value-stores"><a href="#static-key/value-stores" class="anchor"></a>Static key/value stores</h3><div><div class="spec type" id="type-kv_ro" class="anchored"><a href="#type-kv_ro" class="anchor"></a><code><span class="keyword">type</span> kv_ro</code></div><div><p>Abstract type for read-only key/value store.</p></div></div><div><div class="spec value" id="val-kv_ro" class="anchored"><a href="#val-kv_ro" class="anchor"></a><code><span class="keyword">val</span> kv_ro : <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.KV_RO</code> signature.</p></div></div><div><div class="spec value" id="val-crunch" class="anchored"><a href="#val-crunch" class="anchor"></a><code><span class="keyword">val</span> crunch : string <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Crunch a directory.</p></div></div><div class="spec value" id="val-archive" class="anchored"><a href="#val-archive" class="anchor"></a><code><span class="keyword">val</span> archive : <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div class="spec value" id="val-archive_of_files" class="anchored"><a href="#val-archive_of_files" class="anchor"></a><code><span class="keyword">val</span> archive_of_files : <span>?&#8288;dir:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div><div class="spec value" id="val-direct_kv_ro" class="anchored"><a href="#val-direct_kv_ro" class="anchor"></a><code><span class="keyword">val</span> direct_kv_ro : string <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Direct access to the underlying filesystem as a key/value store. For Xen backends, this is equivalent to <code>crunch</code>.</p></div></div><div><div class="spec value" id="val-generic_kv_ro" class="anchored"><a href="#val-generic_kv_ro" class="anchor"></a><code><span class="keyword">val</span> generic_kv_ro : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;key:<span><span>[ `Archive <span>| `Crunch</span> <span>| `Direct</span> <span>| `Fat</span> ]</span> <a href="index.html#type-value">value</a></span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Generic key/value that will choose dynamically between <a href="index.html#val-fat"><code>fat</code></a>, <a href="index.html#val-archive"><code>archive</code></a> and <a href="index.html#val-crunch"><code>crunch</code></a>. To use a filesystem implementation, try <a href="index.html#val-kv_ro_of_fs"><code>kv_ro_of_fs</code></a>.</p><p>If no key is provided, it uses <a href="Key/index.html#val-kv_ro"><code>Key.kv_ro</code></a> to create a new one.</p></div></div><div><div class="spec type" id="type-kv_rw" class="anchored"><a href="#type-kv_rw" class="anchor"></a><code><span class="keyword">type</span> kv_rw</code></div><div><p>Abstract type for read-write key/value store.</p></div></div><div><div class="spec value" id="val-kv_rw" class="anchored"><a href="#val-kv_rw" class="anchor"></a><code><span class="keyword">val</span> kv_rw : <span><a href="index.html#type-kv_rw">kv_rw</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.KV_RW</code> signature.</p></div></div><div><div class="spec value" id="val-direct_kv_rw" class="anchored"><a href="#val-direct_kv_rw" class="anchor"></a><code><span class="keyword">val</span> direct_kv_rw : string <span>&#45;&gt;</span> <span><a href="index.html#type-kv_rw">kv_rw</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Direct access to the underlying filesystem as a key/value store. Only available on Unix backends.</p></div></div><div><div class="spec value" id="val-kv_rw_mem" class="anchored"><a href="#val-kv_rw_mem" class="anchor"></a><code><span class="keyword">val</span> kv_rw_mem : <span>?&#8288;clock:<span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-kv_rw">kv_rw</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>An in-memory key-value store using <code>mirage-kv-mem</code>.</p></div></div><h3 id="filesystem"><a href="#filesystem" class="anchor"></a>Filesystem</h3><div><div class="spec type" id="type-fs" class="anchored"><a href="#type-fs" class="anchor"></a><code><span class="keyword">type</span> fs</code></div><div><p>Abstract type for filesystems.</p></div></div><div><div class="spec value" id="val-fs" class="anchored"><a href="#val-fs" class="anchor"></a><code><span class="keyword">val</span> fs : <span><a href="index.html#type-fs">fs</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.FS</code> signature.</p></div></div><div><div class="spec value" id="val-fat" class="anchored"><a href="#val-fat" class="anchor"></a><code><span class="keyword">val</span> fat : <span><a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Consider a raw block device as a FAT filesystem.</p></div></div><div><div class="spec value" id="val-fat_of_files" class="anchored"><a href="#val-fat_of_files" class="anchor"></a><code><span class="keyword">val</span> fat_of_files : <span>?&#8288;dir:string</span> <span>&#45;&gt;</span> <span>?&#8288;regexp:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>fat_files dir ?dir ?regexp ()</code> collects all the files matching the shell pattern <code>regexp</code> in the directory <code>dir</code> into a FAT image. By default, <code>dir</code> is the current working directory and <code>regexp</code> is <i>*</i></p></div></div><div><div class="spec value" id="val-kv_ro_of_fs" class="anchored"><a href="#val-kv_ro_of_fs" class="anchor"></a><code><span class="keyword">val</span> kv_ro_of_fs : <span><a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Consider a filesystem implementation as a read-only key/value store.</p></div></div><h3 id="network-interfaces"><a href="#network-interfaces" class="anchor"></a>Network interfaces</h3><div><div class="spec type" id="type-network" class="anchored"><a href="#type-network" class="anchor"></a><code><span class="keyword">type</span> network</code></div><div><p>Abstract type for network configurations.</p></div></div><div><div class="spec value" id="val-network" class="anchored"><a href="#val-network" class="anchor"></a><code><span class="keyword">val</span> network : <span><a href="index.html#type-network">network</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.NETWORK</code> signature.</p></div></div><div><div class="spec value" id="val-default_network" class="anchored"><a href="#val-default_network" class="anchor"></a><code><span class="keyword">val</span> default_network : <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>default_network</code> is a dynamic network implementation * which attempts to do something reasonable based on the target.</p></div></div><div><div class="spec value" id="val-netif" class="anchored"><a href="#val-netif" class="anchor"></a><code><span class="keyword">val</span> netif : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>A custom network interface. Exposes a <a href="Key/index.html#val-interface"><code>Key.interface</code></a> key.</p></div></div><h3 id="ethernet-configuration"><a href="#ethernet-configuration" class="anchor"></a>Ethernet configuration</h3><div class="spec type" id="type-ethernet" class="anchored"><a href="#type-ethernet" class="anchor"></a><code><span class="keyword">type</span> ethernet</code></div><div><div class="spec value" id="val-ethernet" class="anchored"><a href="#val-ethernet" class="anchor"></a><code><span class="keyword">val</span> ethernet : <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementations of the <code>Mirage_types.ETHERNET</code> signature.</p></div></div><div class="spec value" id="val-etif" class="anchored"><a href="#val-etif" class="anchor"></a><code><span class="keyword">val</span> etif : <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="arp-configuration"><a href="#arp-configuration" class="anchor"></a>ARP configuration</h3><div class="spec type" id="type-arpv4" class="anchored"><a href="#type-arpv4" class="anchor"></a><code><span class="keyword">type</span> arpv4</code></div><div><div class="spec value" id="val-arpv4" class="anchored"><a href="#val-arpv4" class="anchor"></a><code><span class="keyword">val</span> arpv4 : <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <code>Mirage_types.ARPV4</code> signature.</p></div></div><div><div class="spec value" id="val-arp" class="anchored"><a href="#val-arp" class="anchor"></a><code><span class="keyword">val</span> arp : <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>ARP implementation provided by the arp library</p></div></div><h3 id="ip-configuration"><a href="#ip-configuration" class="anchor"></a>IP configuration</h3><aside><p>Implementations of the <code>Mirage_types.IP</code> signature.</p></aside><div class="spec type" id="type-v4" class="anchored"><a href="#type-v4" class="anchor"></a><code><span class="keyword">type</span> v4</code></div><div class="spec type" id="type-v6" class="anchored"><a href="#type-v6" class="anchor"></a><code><span class="keyword">type</span> v6</code></div><div><div class="spec type" id="type-ip" class="anchored"><a href="#type-ip" class="anchor"></a><code><span class="keyword">type</span> <span>'a ip</span></code></div><div><p>Abstract type for IP configurations.</p></div></div><div class="spec type" id="type-ipv4" class="anchored"><a href="#type-ipv4" class="anchor"></a><code><span class="keyword">type</span> ipv4 = <span><a href="index.html#type-v4">v4</a> <a href="index.html#type-ip">ip</a></span></code></div><div class="spec type" id="type-ipv6" class="anchored"><a href="#type-ipv6" class="anchor"></a><code><span class="keyword">type</span> ipv6 = <span><a href="index.html#type-v6">v6</a> <a href="index.html#type-ip">ip</a></span></code></div><div><div class="spec value" id="val-ipv4" class="anchored"><a href="#val-ipv4" class="anchor"></a><code><span class="keyword">val</span> ipv4 : <span><a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>The <code>Mirage_types.IPV4</code> module signature.</p></div></div><div><div class="spec value" id="val-ipv6" class="anchored"><a href="#val-ipv6" class="anchor"></a><code><span class="keyword">val</span> ipv6 : <span><a href="index.html#type-ipv6">ipv6</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>The <code>Mirage_types.IPV6</code> module signature.</p></div></div><div><div class="spec type" id="type-ipv4_config" class="anchored"><a href="#type-ipv4_config" class="anchor"></a><code><span class="keyword">type</span> ipv4_config = {</code><table><tr id="type-ipv4_config.network" class="anchored"><td class="def record field"><a href="#type-ipv4_config.network" class="anchor"></a><code>network : <a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a>;</code></td></tr><tr id="type-ipv4_config.gateway" class="anchored"><td class="def record field"><a href="#type-ipv4_config.gateway" class="anchor"></a><code>gateway : <span><a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> option</span>;</code></td></tr></table><code>}</code></div><div><p>Types for IPv4 manual configuration.</p></div></div><div><div class="spec type" id="type-ipv6_config" class="anchored"><a href="#type-ipv6_config" class="anchor"></a><code><span class="keyword">type</span> ipv6_config = {</code><table><tr id="type-ipv6_config.addresses" class="anchored"><td class="def record field"><a href="#type-ipv6_config.addresses" class="anchor"></a><code>addresses : <span><a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> list</span>;</code></td></tr><tr id="type-ipv6_config.netmasks" class="anchored"><td class="def record field"><a href="#type-ipv6_config.netmasks" class="anchor"></a><code>netmasks : <span><a href="../../ipaddr/Ipaddr/V6/Prefix/index.html#type-t">Ipaddr.V6.Prefix.t</a> list</span>;</code></td></tr><tr id="type-ipv6_config.gateways" class="anchored"><td class="def record field"><a href="#type-ipv6_config.gateways" class="anchor"></a><code>gateways : <span><a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> list</span>;</code></td></tr></table><code>}</code></div><div><p>Types for IP manual configuration.</p></div></div><div><div class="spec value" id="val-create_ipv4" class="anchored"><a href="#val-create_ipv4" class="anchor"></a><code><span class="keyword">val</span> create_ipv4 : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use an IPv4 address Exposes the keys <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a> and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a>. If provided, the values of these keys will override those supplied in the ipv4 configuration record, if that has been provided.</p></div></div><div><div class="spec value" id="val-ipv4_qubes" class="anchored"><a href="#val-ipv4_qubes" class="anchor"></a><code><span class="keyword">val</span> ipv4_qubes : <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use a given initialized QubesDB to look up and configure the appropriate * IPv4 interface.</p></div></div><div><div class="spec value" id="val-create_ipv6" class="anchored"><a href="#val-create_ipv6" class="anchor"></a><code><span class="keyword">val</span> create_ipv6 : <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <a href="index.html#type-ipv6_config">ipv6_config</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ipv6">ipv6</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Use an IPv6 address. Exposes the keys <a href="../Mirage_key/V6/index.html#val-ips"><code>Key.V6.ips</code></a>, <a href="../Mirage_key/V6/index.html#val-netmasks"><code>Key.V6.netmasks</code></a> and <a href="../Mirage_key/V6/index.html#val-gateways"><code>Key.V6.gateways</code></a>.</p></div></div><h3 id="udp-configuration"><a href="#udp-configuration" class="anchor"></a>UDP configuration</h3><div class="spec type" id="type-udp" class="anchored"><a href="#type-udp" class="anchor"></a><code><span class="keyword">type</span> <span>'a udp</span></code></div><div class="spec type" id="type-udpv4" class="anchored"><a href="#type-udpv4" class="anchor"></a><code><span class="keyword">type</span> udpv4 = <span><a href="index.html#type-v4">v4</a> <a href="index.html#type-udp">udp</a></span></code></div><div class="spec type" id="type-udpv6" class="anchored"><a href="#type-udpv6" class="anchor"></a><code><span class="keyword">type</span> udpv6 = <span><a href="index.html#type-v6">v6</a> <a href="index.html#type-udp">udp</a></span></code></div><div><div class="spec value" id="val-udp" class="anchored"><a href="#val-udp" class="anchor"></a><code><span class="keyword">val</span> udp : <span><span><span class="type-var">'a</span> <a href="index.html#type-udp">udp</a></span> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <code>Mirage_types.UDP</code> signature.</p></div></div><div class="spec value" id="val-udpv4" class="anchored"><a href="#val-udpv4" class="anchor"></a><code><span class="keyword">val</span> udpv4 : <span><a href="index.html#type-udpv4">udpv4</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-udpv6" class="anchored"><a href="#val-udpv6" class="anchor"></a><code><span class="keyword">val</span> udpv6 : <span><a href="index.html#type-udpv6">udpv6</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-direct_udp" class="anchored"><a href="#val-direct_udp" class="anchor"></a><code><span class="keyword">val</span> direct_udp : <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-ip">ip</a></span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-udp">udp</a></span> <a href="index.html#type-impl">impl</a></span></code></div><div class="spec value" id="val-socket_udpv4" class="anchored"><a href="#val-socket_udpv4" class="anchor"></a><code><span class="keyword">val</span> socket_udpv4 : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span><a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> option</span> <span>&#45;&gt;</span> <span><a href="index.html#type-udpv4">udpv4</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="tcp-configuration"><a href="#tcp-configuration" class="anchor"></a>TCP configuration</h3><div class="spec type" id="type-tcp" class="anchored"><a href="#type-tcp" class="anchor"></a><code><span class="keyword">type</span> <span>'a tcp</span></code></div><div class="spec type" id="type-tcpv4" class="anchored"><a href="#type-tcpv4" class="anchor"></a><code><span class="keyword">type</span> tcpv4 = <span><a href="index.html#type-v4">v4</a> <a href="index.html#type-tcp">tcp</a></span></code></div><div class="spec type" id="type-tcpv6" class="anchored"><a href="#type-tcpv6" class="anchor"></a><code><span class="keyword">type</span> tcpv6 = <span><a href="index.html#type-v6">v6</a> <a href="index.html#type-tcp">tcp</a></span></code></div><div><div class="spec value" id="val-tcp" class="anchored"><a href="#val-tcp" class="anchor"></a><code><span class="keyword">val</span> tcp : <span><span><span class="type-var">'a</span> <a href="index.html#type-tcp">tcp</a></span> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <code>Mirage_types.TCP</code> signature.</p></div></div><div class="spec value" id="val-tcpv4" class="anchored"><a href="#val-tcpv4" class="anchor"></a><code><span class="keyword">val</span> tcpv4 : <span><a href="index.html#type-tcpv4">tcpv4</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-tcpv6" class="anchored"><a href="#val-tcpv6" class="anchor"></a><code><span class="keyword">val</span> tcpv6 : <span><a href="index.html#type-tcpv6">tcpv6</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-direct_tcp" class="anchored"><a href="#val-direct_tcp" class="anchor"></a><code><span class="keyword">val</span> direct_tcp : <span>?&#8288;clock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-ip">ip</a></span> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-tcp">tcp</a></span> <a href="index.html#type-impl">impl</a></span></code></div><div class="spec value" id="val-socket_tcpv4" class="anchored"><a href="#val-socket_tcpv4" class="anchor"></a><code><span class="keyword">val</span> socket_tcpv4 : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span><a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> option</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tcpv4">tcpv4</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="network-stack-configuration"><a href="#network-stack-configuration" class="anchor"></a>Network stack configuration</h3><div class="spec type" id="type-stackv4" class="anchored"><a href="#type-stackv4" class="anchor"></a><code><span class="keyword">type</span> stackv4</code></div><div><div class="spec value" id="val-stackv4" class="anchored"><a href="#val-stackv4" class="anchor"></a><code><span class="keyword">val</span> stackv4 : <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <code>Mirage_types.STACKV4</code> signature.</p></div></div><div><div class="spec value" id="val-direct_stackv4" class="anchored"><a href="#val-direct_stackv4" class="anchor"></a><code><span class="keyword">val</span> direct_stackv4 : <span>?&#8288;clock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Direct network stack with given ip.</p></div></div><div><div class="spec value" id="val-socket_stackv4" class="anchored"><a href="#val-socket_stackv4" class="anchor"></a><code><span class="keyword">val</span> socket_stackv4 : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span><a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Network stack with sockets. Exposes the key <code>Key</code>.V4.interfaces.</p></div></div><div><div class="spec value" id="val-qubes_ipv4_stack" class="anchored"><a href="#val-qubes_ipv4_stack" class="anchor"></a><code><span class="keyword">val</span> qubes_ipv4_stack : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;qubesdb:<span><a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;arp:<span>(<span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span>)</span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Build a stackv4 by looking up configuration information via QubesDB, * building an ipv4, then building a stack on top of that.</p></div></div><div><div class="spec value" id="val-dhcp_ipv4_stack" class="anchored"><a href="#val-dhcp_ipv4_stack" class="anchor"></a><code><span class="keyword">val</span> dhcp_ipv4_stack : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;arp:<span>(<span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span>)</span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Build a stackv4 by obtaining a DHCP lease, using the lease to * build an ipv4, then building a stack on top of that.</p></div></div><div><div class="spec value" id="val-static_ipv4_stack" class="anchored"><a href="#val-static_ipv4_stack" class="anchor"></a><code><span class="keyword">val</span> static_ipv4_stack : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;arp:<span>(<span><a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></span>)</span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Build a stackv4 by checking the <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a>, and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a> keys * for ipv4 configuration information, filling in unspecified information from <code>?config</code>, * then building a stack on top of that.</p></div></div><div><div class="spec value" id="val-generic_stackv4" class="anchored"><a href="#val-generic_stackv4" class="anchor"></a><code><span class="keyword">val</span> generic_stackv4 : <span>?&#8288;group:string</span> <span>&#45;&gt;</span> <span>?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;dhcp_key:<span>bool <a href="index.html#type-value">value</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;net_key:<span><span><span>[ `Direct <span>| `Socket</span> ]</span> option</span> <a href="index.html#type-value">value</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Generic stack using a <code>dhcp</code> and a <code>net</code> keys: <a href="Key/index.html#val-net"><code>Key.net</code></a> and <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a>.</p><ul><li>If <code>target</code> = <code>Qubes</code> then <a href="index.html#val-qubes_ipv4_stack"><code>qubes_ipv4_stack</code></a> is used</li><li>Else, if <code>net</code> = <code>socket</code> then <a href="index.html#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, if <code>dhcp</code> then <a href="index.html#val-dhcp_ipv4_stack"><code>dhcp_ipv4_stack</code></a> is used</li><li>Else, if <code>unix or macosx</code> then <a href="index.html#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, <a href="index.html#val-static_ipv4_stack"><code>static_ipv4_stack</code></a> is used.</li></ul><p>If a key is not provided, it uses <a href="Key/index.html#val-net"><code>Key.net</code></a> or <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a> (with the <code>group</code> argument) to create it.</p></div></div><h3 id="resolver-configuration"><a href="#resolver-configuration" class="anchor"></a>Resolver configuration</h3><div class="spec type" id="type-resolver" class="anchored"><a href="#type-resolver" class="anchor"></a><code><span class="keyword">type</span> resolver</code></div><div class="spec value" id="val-resolver" class="anchored"><a href="#val-resolver" class="anchor"></a><code><span class="keyword">val</span> resolver : <span><a href="index.html#type-resolver">resolver</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-resolver_dns" class="anchored"><a href="#val-resolver_dns" class="anchor"></a><code><span class="keyword">val</span> resolver_dns : <span>?&#8288;ns:<a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;ns_port:int</span> <span>&#45;&gt;</span> <span>?&#8288;random:<span><a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;time:<span><a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;mclock:<span><a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-resolver">resolver</a> <a href="index.html#type-impl">impl</a></span></code></div><div class="spec value" id="val-resolver_unix_system" class="anchored"><a href="#val-resolver_unix_system" class="anchor"></a><code><span class="keyword">val</span> resolver_unix_system : <span><a href="index.html#type-resolver">resolver</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="syslog-configuration"><a href="#syslog-configuration" class="anchor"></a>Syslog configuration</h3><aside><p>Syslog exfiltrates log messages (generated by libraries using the <code>logs</code> library) via a network connection. The log level of the log sources is controlled via the <a href="../Mirage_key/index.html#val-logs"><code>Mirage_key.logs</code></a> key. The functionality is provided by the <code>logs-syslog</code> package.</p></aside><div class="spec type" id="type-syslog_config" class="anchored"><a href="#type-syslog_config" class="anchor"></a><code><span class="keyword">type</span> syslog_config = {</code><table><tr id="type-syslog_config.hostname" class="anchored"><td class="def record field"><a href="#type-syslog_config.hostname" class="anchor"></a><code>hostname : string;</code></td></tr><tr id="type-syslog_config.server" class="anchored"><td class="def record field"><a href="#type-syslog_config.server" class="anchor"></a><code>server : <span><a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> option</span>;</code></td></tr><tr id="type-syslog_config.port" class="anchored"><td class="def record field"><a href="#type-syslog_config.port" class="anchor"></a><code>port : <span>int option</span>;</code></td></tr><tr id="type-syslog_config.truncate" class="anchored"><td class="def record field"><a href="#type-syslog_config.truncate" class="anchor"></a><code>truncate : <span>int option</span>;</code></td></tr></table><code>}</code></div><div><div class="spec value" id="val-syslog_config" class="anchored"><a href="#val-syslog_config" class="anchor"></a><code><span class="keyword">val</span> syslog_config : <span>?&#8288;port:int</span> <span>&#45;&gt;</span> <span>?&#8288;truncate:int</span> <span>&#45;&gt;</span> <span>?&#8288;server:<a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-syslog_config">syslog_config</a></code></div><div><p>Helper for constructing a <a href="index.html#val-syslog_config"><code>syslog_config</code></a>.</p></div></div><div><div class="spec type" id="type-syslog" class="anchored"><a href="#type-syslog" class="anchor"></a><code><span class="keyword">type</span> syslog</code></div><div><p>The type for syslog</p></div></div><div><div class="spec value" id="val-syslog" class="anchored"><a href="#val-syslog" class="anchor"></a><code><span class="keyword">val</span> syslog : <span><a href="index.html#type-syslog">syslog</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p>Implementation of the <a href="index.html#val-syslog"><code>syslog</code></a> type.</p></div></div><div><div class="spec value" id="val-syslog_udp" class="anchored"><a href="#val-syslog_udp" class="anchor"></a><code><span class="keyword">val</span> syslog_udp : <span>?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;console:<span><a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Emit log messages via UDP to the configured host.</p></div></div><div><div class="spec value" id="val-syslog_tcp" class="anchored"><a href="#val-syslog_tcp" class="anchor"></a><code><span class="keyword">val</span> syslog_tcp : <span>?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;console:<span><a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Emit log messages via TCP to the configured host.</p></div></div><div><div class="spec value" id="val-syslog_tls" class="anchored"><a href="#val-syslog_tls" class="anchor"></a><code><span class="keyword">val</span> syslog_tls : <span>?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a></span> <span>&#45;&gt;</span> <span>?&#8288;keyname:string</span> <span>&#45;&gt;</span> <span>?&#8288;console:<span><a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;clock:<span><a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Emit log messages via TLS to the configured host, using the credentials (private ekey, certificate, trust anchor) provided in the KV_RO using the <code>keyname</code>.</p></div></div><h3 id="entropy"><a href="#entropy" class="anchor"></a>Entropy</h3><div><div class="spec value" id="val-nocrypto" class="anchored"><a href="#val-nocrypto" class="anchor"></a><code><span class="keyword">val</span> nocrypto : <span><a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p>Device that initializes the entropy. Deprecated and unused.</p></div></div><h3 id="conduit-configuration"><a href="#conduit-configuration" class="anchor"></a>Conduit configuration</h3><div class="spec type" id="type-conduit" class="anchored"><a href="#type-conduit" class="anchor"></a><code><span class="keyword">type</span> conduit</code></div><div class="spec value" id="val-conduit" class="anchored"><a href="#val-conduit" class="anchor"></a><code><span class="keyword">val</span> conduit : <span><a href="index.html#type-conduit">conduit</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-conduit_direct" class="anchored"><a href="#val-conduit_direct" class="anchor"></a><code><span class="keyword">val</span> conduit_direct : <span>?&#8288;tls:bool</span> <span>&#45;&gt;</span> <span><a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a></span></code></div><h3 id="http-configuration"><a href="#http-configuration" class="anchor"></a>HTTP configuration</h3><div class="spec type" id="type-http" class="anchored"><a href="#type-http" class="anchor"></a><code><span class="keyword">type</span> http</code></div><div class="spec value" id="val-http" class="anchored"><a href="#val-http" class="anchor"></a><code><span class="keyword">val</span> http : <span><a href="index.html#type-http">http</a> <a href="index.html#type-typ">typ</a></span></code></div><div class="spec value" id="val-http_server" class="anchored"><a href="#val-http_server" class="anchor"></a><code><span class="keyword">val</span> http_server : <span><a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></span></code></div><div><div class="spec value" id="val-cohttp_server" class="anchored"><a href="#val-cohttp_server" class="anchor"></a><code><span class="keyword">val</span> cohttp_server : <span><a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>cohttp_server</code> starts a Cohttp server.</p></div></div><div><div class="spec value" id="val-httpaf_server" class="anchored"><a href="#val-httpaf_server" class="anchor"></a><code><span class="keyword">val</span> httpaf_server : <span><a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>httpaf_server</code> starts a http/af server.</p></div></div><h3 id="argv-configuration"><a href="#argv-configuration" class="anchor"></a>Argv configuration</h3><div><div class="spec value" id="val-default_argv" class="anchored"><a href="#val-default_argv" class="anchor"></a><code><span class="keyword">val</span> default_argv : <span><a href="../../functoria/Functoria_app/index.html#type-argv">Functoria_app.argv</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>default_argv</code> is a dynamic argv implementation * which attempts to do something reasonable based on the target.</p></div></div><div><div class="spec value" id="val-no_argv" class="anchored"><a href="#val-no_argv" class="anchor"></a><code><span class="keyword">val</span> no_argv : <span><a href="../../functoria/Functoria_app/index.html#type-argv">Functoria_app.argv</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>no_argv</code> Disable command line parsing and set argv to <code>|&quot;&quot;|</code>.</p></div></div><h3 id="other-devices"><a href="#other-devices" class="anchor"></a>Other devices</h3><div><div class="spec value" id="val-noop" class="anchored"><a href="#val-noop" class="anchor"></a><code><span class="keyword">val</span> noop : <span><a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>noop</code> is a job that does nothing, has no dependency and returns <code>()</code></p></div></div><div><div class="spec type" id="type-info" class="anchored"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info</code></div><div><p><code>info</code> is the type for module implementing <code>Mirage_runtime</code>.Info.</p></div></div><div><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span class="keyword">val</span> info : <span><a href="index.html#type-info">info</a> <a href="index.html#type-typ">typ</a></span></code></div><div><p><code>info</code> is the combinator to generate <a href="index.html#val-info"><code>info</code></a> values to use at runtime.</p></div></div><div><div class="spec value" id="val-app_info" class="anchored"><a href="#val-app_info" class="anchor"></a><code><span class="keyword">val</span> app_info : <span><a href="index.html#type-info">info</a> <a href="index.html#type-impl">impl</a></span></code></div><div><p><code>app_info</code> exports all the information available at configure time into a runtime <a href="../../functoria/Functoria/Info/index.html#type-t"><code>Mirage.Info.t</code></a> value.</p></div></div><h3 id="application-registering"><a href="#application-registering" class="anchor"></a>Application registering</h3><div><div class="spec value" id="val-register" class="anchored"><a href="#val-register" class="anchor"></a><code><span class="keyword">val</span> register : <span>?&#8288;argv:<span><a href="../../functoria/Functoria_app/index.html#type-argv">Functoria_app.argv</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;tracing:<span><a href="index.html#type-tracing">tracing</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;reporter:<span><a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;keys:<span><a href="Key/index.html#type-t">Key.t</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;packages:<span><a href="../../functoria/Functoria/index.html#type-package">Functoria.package</a> list</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a></span> list</span> <span>&#45;&gt;</span> unit</code></div><div><p><code>register name jobs</code> registers the application named by <code>name</code> which will executes the given <code>jobs</code>.</p><dl><dt>parameter packages</dt><dd><p>The opam packages needed by this module.</p></dd></dl><dl><dt>parameter keys</dt><dd><p>The keys related to this module.</p></dd></dl><dl><dt>parameter tracing</dt><dd><p>Enable tracing.</p></dd></dl><dl><dt>parameter reporter</dt><dd><p>Configure logging. The default log reporter is <code>default_reporter</code>. To disable logging, use <code>no_reporter</code>.</p></dd></dl><dl><dt>parameter argv</dt><dd><p>Configure command-line argument parsing. The default parser is <code>default_argv</code>. To disable command-line parsing, use <code>no_argv</code>.</p></dd></dl></div></div></div></body></html>