<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>LTerm_read_line (lambda-term.LTerm_read_line)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">lambda-term</a> &#x00BB; LTerm_read_line</nav><header><h1>Module <code>LTerm_read_line</code></h1><p>Interactive line input</p></header><nav class="toc"><ul><li><a href="#completion">Completion</a></li><li><a href="#actions">Actions</a></li><li><a href="#the-read-line-engine">The read-line engine</a></li><li><a href="#predefined-classes">Predefined classes</a></li><li><a href="#running-in-a-terminal">Running in a terminal</a></li></ul></nav><div class="content"><aside><p>For a complete example of usage of this module, look at the shell example (examples/shell.ml) distributed with Lambda-Term.</p></aside><div><div class="spec exception" id="exception-Interrupt" class="anchored"><a href="#exception-Interrupt" class="anchor"></a><code><span class="keyword">exception</span> <span class="exception">Interrupt</span></code></div><div><p>Exception raised when the user presses <code>Ctrl^D</code> with an empty input.</p></div></div><div><div class="spec type" id="type-prompt" class="anchored"><a href="#type-prompt" class="anchor"></a><code><span class="keyword">type</span> prompt = <a href="../LTerm_text/index.html#type-t">LTerm_text.t</a></code></div><div><p>Type of prompts.</p></div></div><div><div class="spec type" id="type-history" class="anchored"><a href="#type-history" class="anchor"></a><code><span class="keyword">type</span> history = <span><a href="../../zed/Zed_string/index.html#type-t">Zed_string.t</a> list</span></code></div><div><p>Type of histories. It is a list of entries from the most recent to the oldest.</p></div></div><h6 id="completion"><a href="#completion" class="anchor"></a>Completion</h6><div><div class="spec value" id="val-common_prefix" class="anchored"><a href="#val-common_prefix" class="anchor"></a><code><span class="keyword">val</span> common_prefix : <span>string list</span> <span>&#45;&gt;</span> string</code></div><div><p>Returns the common prefix of a list of words.</p></div></div><div><div class="spec value" id="val-zed_common_prefix" class="anchored"><a href="#val-zed_common_prefix" class="anchor"></a><code><span class="keyword">val</span> zed_common_prefix : <span><a href="../../zed/Zed_string/index.html#type-t">Zed_string.t</a> list</span> <span>&#45;&gt;</span> <a href="../../zed/Zed_string/index.html#type-t">Zed_string.t</a></code></div><div><p>Returns the common prefix of a list of words.</p></div></div><div><div class="spec value" id="val-lookup" class="anchored"><a href="#val-lookup" class="anchor"></a><code><span class="keyword">val</span> lookup : <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span>&#45;&gt;</span> <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> list</span> <span>&#45;&gt;</span> <span><a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> list</span></code></div><div><p><code>lookup word words</code> lookup for completion of <code>word</code> into <code>words</code>. It returns all words starting with <code>word</code>.</p></div></div><div><div class="spec value" id="val-lookup_assoc" class="anchored"><a href="#val-lookup_assoc" class="anchor"></a><code><span class="keyword">val</span> lookup_assoc : <a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> * <span class="type-var">'a</span>)</span> list</span> <span>&#45;&gt;</span> <span><span>(<a href="../../zed/Zed_utf8/index.html#type-t">Zed_utf8.t</a> * <span class="type-var">'a</span>)</span> list</span></code></div><div><p><code>lookup_assoc word words</code> does the same as <a href="index.html#val-lookup"><code>lookup</code></a> but works on associative list.</p></div></div><h6 id="actions"><a href="#actions" class="anchor"></a>Actions</h6><div><div class="spec type" id="type-action" class="anchored"><a href="#type-action" class="anchor"></a><code><span class="keyword">type</span> action = </code><table><tr id="type-action.Edit" class="anchored"><td class="def variant constructor"><a href="#type-action.Edit" class="anchor"></a><code>| <span class="constructor">Edit</span> <span class="keyword">of</span> <a href="../LTerm_edit/index.html#type-action">LTerm_edit.action</a></code></td><td class="doc"><p>An edition action.</p></td></tr><tr id="type-action.Interrupt_or_delete_next_char" class="anchored"><td class="def variant constructor"><a href="#type-action.Interrupt_or_delete_next_char" class="anchor"></a><code>| <span class="constructor">Interrupt_or_delete_next_char</span></code></td><td class="doc"><p>Interrupt if at the beginning of an empty line, or delete the next character.</p></td></tr><tr id="type-action.Complete" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete" class="anchor"></a><code>| <span class="constructor">Complete</span></code></td><td class="doc"><p>Complete current input.</p></td></tr><tr id="type-action.Complete_bar_next" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete_bar_next" class="anchor"></a><code>| <span class="constructor">Complete_bar_next</span></code></td><td class="doc"><p>Go to the next possible completion in the completion bar.</p></td></tr><tr id="type-action.Complete_bar_prev" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete_bar_prev" class="anchor"></a><code>| <span class="constructor">Complete_bar_prev</span></code></td><td class="doc"><p>Go to the previous possible completion in the completion bar.</p></td></tr><tr id="type-action.Complete_bar_first" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete_bar_first" class="anchor"></a><code>| <span class="constructor">Complete_bar_first</span></code></td><td class="doc"><p>Goto the beginning of the completion bar.</p></td></tr><tr id="type-action.Complete_bar_last" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete_bar_last" class="anchor"></a><code>| <span class="constructor">Complete_bar_last</span></code></td><td class="doc"><p>Goto the end of the completion bar.</p></td></tr><tr id="type-action.Complete_bar" class="anchored"><td class="def variant constructor"><a href="#type-action.Complete_bar" class="anchor"></a><code>| <span class="constructor">Complete_bar</span></code></td><td class="doc"><p>Complete current input using the completion bar.</p></td></tr><tr id="type-action.History_prev" class="anchored"><td class="def variant constructor"><a href="#type-action.History_prev" class="anchor"></a><code>| <span class="constructor">History_prev</span></code></td><td class="doc"><p>Go to the previous entry of the history.</p></td></tr><tr id="type-action.History_next" class="anchored"><td class="def variant constructor"><a href="#type-action.History_next" class="anchor"></a><code>| <span class="constructor">History_next</span></code></td><td class="doc"><p>Go to the next entry of the history.</p></td></tr><tr id="type-action.History_search_prev" class="anchored"><td class="def variant constructor"><a href="#type-action.History_search_prev" class="anchor"></a><code>| <span class="constructor">History_search_prev</span></code></td><td class="doc"><p>Search the previous entry of the history.</p></td></tr><tr id="type-action.History_search_next" class="anchored"><td class="def variant constructor"><a href="#type-action.History_search_next" class="anchor"></a><code>| <span class="constructor">History_search_next</span></code></td><td class="doc"><p>Search the next entry of the history.</p></td></tr><tr id="type-action.Accept" class="anchored"><td class="def variant constructor"><a href="#type-action.Accept" class="anchor"></a><code>| <span class="constructor">Accept</span></code></td><td class="doc"><p>Accept the current input.</p></td></tr><tr id="type-action.Clear_screen" class="anchored"><td class="def variant constructor"><a href="#type-action.Clear_screen" class="anchor"></a><code>| <span class="constructor">Clear_screen</span></code></td><td class="doc"><p>Clear the screen.</p></td></tr><tr id="type-action.Prev_search" class="anchored"><td class="def variant constructor"><a href="#type-action.Prev_search" class="anchor"></a><code>| <span class="constructor">Prev_search</span></code></td><td class="doc"><p>Search backward in the history.</p></td></tr><tr id="type-action.Next_search" class="anchored"><td class="def variant constructor"><a href="#type-action.Next_search" class="anchor"></a><code>| <span class="constructor">Next_search</span></code></td><td class="doc"><p>Search forward in the history.</p></td></tr><tr id="type-action.Cancel_search" class="anchored"><td class="def variant constructor"><a href="#type-action.Cancel_search" class="anchor"></a><code>| <span class="constructor">Cancel_search</span></code></td><td class="doc"><p>Cancel search mode.</p></td></tr><tr id="type-action.Break" class="anchored"><td class="def variant constructor"><a href="#type-action.Break" class="anchor"></a><code>| <span class="constructor">Break</span></code></td><td class="doc"><p>Raise <code>Sys.Break</code>.</p></td></tr><tr id="type-action.Suspend" class="anchored"><td class="def variant constructor"><a href="#type-action.Suspend" class="anchor"></a><code>| <span class="constructor">Suspend</span></code></td><td class="doc"><p>Suspend the program.</p></td></tr><tr id="type-action.Edit_with_external_editor" class="anchored"><td class="def variant constructor"><a href="#type-action.Edit_with_external_editor" class="anchor"></a><code>| <span class="constructor">Edit_with_external_editor</span></code></td><td class="doc"><p>Launch external editor.</p></td></tr></table></div><div><p>Type of actions.</p></div></div><div><div class="spec value" id="val-bindings" class="anchored"><a href="#val-bindings" class="anchor"></a><code><span class="keyword">val</span> bindings : <span><span><span><a href="index.html#type-action">action</a> list</span> <a href="../../zed/Zed_input/Make/index.html#type-t">Zed_input.Make(LTerm_key).t</a></span> <a href="../../ocaml/Stdlib/index.html#type-ref">Stdlib.ref</a></span></code></div><div><p>Bindings.</p></div></div><div><div class="spec value" id="val-bind" class="anchored"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val</span> bind : <span><a href="../LTerm_key/index.html#type-t">LTerm_key.t</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-action">action</a> list</span> <span>&#45;&gt;</span> unit</code></div><div><p><code>bind seq actions</code> associates <code>actions</code> to the given sequence.</p></div></div><div><div class="spec value" id="val-unbind" class="anchored"><a href="#val-unbind" class="anchor"></a><code><span class="keyword">val</span> unbind : <span><a href="../LTerm_key/index.html#type-t">LTerm_key.t</a> list</span> <span>&#45;&gt;</span> unit</code></div><div><p><code>unbind seq</code> unbinds <code>seq</code>.</p></div></div><div><div class="spec value" id="val-actions" class="anchored"><a href="#val-actions" class="anchor"></a><code><span class="keyword">val</span> actions : <span><span>(<a href="index.html#type-action">action</a> * string)</span> list</span></code></div><div><p>List of actions with their names, except <a href="index.html#type-action.Edit"><code>Edit</code></a>.</p></div></div><div><div class="spec value" id="val-doc_of_action" class="anchored"><a href="#val-doc_of_action" class="anchor"></a><code><span class="keyword">val</span> doc_of_action : <a href="index.html#type-action">action</a> <span>&#45;&gt;</span> string</code></div><div><p><code>doc_of_action action</code> returns a short description of the action.</p></div></div><div><div class="spec value" id="val-action_of_name" class="anchored"><a href="#val-action_of_name" class="anchor"></a><code><span class="keyword">val</span> action_of_name : string <span>&#45;&gt;</span> <a href="index.html#type-action">action</a></code></div><div><p><code>action_of_name str</code> converts the given action name into an action. Action name are the same as variants name but lowercased and with '_' replaced by '-'. It raises <code>Not_found</code> if the name does not correspond to an action. It also recognizes edition actions.</p></div></div><div><div class="spec value" id="val-name_of_action" class="anchored"><a href="#val-name_of_action" class="anchor"></a><code><span class="keyword">val</span> name_of_action : <a href="index.html#type-action">action</a> <span>&#45;&gt;</span> string</code></div><div><p><code>name_of_action act</code> returns the name of the given action.</p></div></div><h6 id="the-read-line-engine"><a href="#the-read-line-engine" class="anchor"></a>The read-line engine</h6><div><div class="spec value" id="val-macro" class="anchored"><a href="#val-macro" class="anchor"></a><code><span class="keyword">val</span> macro : <span><a href="index.html#type-action">action</a> <a href="../../zed/Zed_macro/index.html#type-t">Zed_macro.t</a></span></code></div><div><p>The global macro recorder.</p></div></div><div><div class="spec type" id="type-mode" class="anchored"><a href="#type-mode" class="anchor"></a><code><span class="keyword">type</span> mode = </code><table><tr id="type-mode.Edition" class="anchored"><td class="def variant constructor"><a href="#type-mode.Edition" class="anchor"></a><code>| <span class="constructor">Edition</span></code></td><td class="doc"><p>Editing.</p></td></tr><tr id="type-mode.Search" class="anchored"><td class="def variant constructor"><a href="#type-mode.Search" class="anchor"></a><code>| <span class="constructor">Search</span></code></td><td class="doc"><p>Backward search.</p></td></tr><tr id="type-mode.Set_counter" class="anchored"><td class="def variant constructor"><a href="#type-mode.Set_counter" class="anchor"></a><code>| <span class="constructor">Set_counter</span></code></td><td class="doc"><p>Setting the macro counter value.</p></td></tr><tr id="type-mode.Add_counter" class="anchored"><td class="def variant constructor"><a href="#type-mode.Add_counter" class="anchor"></a><code>| <span class="constructor">Add_counter</span></code></td><td class="doc"><p>Adding a value to the macro counter.</p></td></tr></table></div><div><p>The current read-line mode.</p></div></div><div><div class="spec class" id="class-engine" class="anchored"><a href="#class-engine" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> 'a <a href="class-engine/index.html">engine</a> : ?&#8288;history:<a href="index.html#type-history">history</a> <span>&#45;&gt;</span> ?&#8288;clipboard:<a href="../../zed/Zed_edit/index.html#type-clipboard">Zed_edit.clipboard</a> <span>&#45;&gt;</span> ?&#8288;macro:<span><a href="index.html#type-action">action</a> <a href="../../zed/Zed_macro/index.html#type-t">Zed_macro.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>The read-line engine. If no clipboard is provided, <a href="../LTerm_edit/index.html#val-clipboard"><code>LTerm_edit.clipboard</code></a> is used. If no macro recorder is provided, <a href="index.html#val-macro"><code>macro</code></a> is used.</p></div></div><div><div class="spec class" id="class-abstract" class="anchored"><a href="#class-abstract" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> 'a <a href="class-abstract/index.html">abstract</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Abstract version of <a href="class-engine/index.html"><code>engine</code></a>.</p></div></div><h6 id="predefined-classes"><a href="#predefined-classes" class="anchor"></a>Predefined classes</h6><div><div class="spec class" id="class-read_line" class="anchored"><a href="#class-read_line" class="anchor"></a><code><span class="keyword">class</span>  <a href="class-read_line/index.html">read_line</a> : ?&#8288;history:<a href="index.html#type-history">history</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Simple read-line engine which returns the result as a string.</p></div></div><div><div class="spec class" id="class-read_password" class="anchored"><a href="#class-read_password" class="anchor"></a><code><span class="keyword">class</span>  <a href="class-read_password/index.html">read_password</a> : unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Read-line engine for reading a password. The <code>stylise</code> method default to replacing all characters by <code>'*'</code>. You can also for example completely disable displaying the password by doing:</p></div></div><div><div class="spec type" id="type-read_keyword_result" class="anchored"><a href="#type-read_keyword_result" class="anchor"></a><code><span class="keyword">type</span> <span>'a read_keyword_result</span> = </code><table><tr id="type-read_keyword_result.Rk_value" class="anchored"><td class="def variant constructor"><a href="#type-read_keyword_result.Rk_value" class="anchor"></a><code>| <span class="constructor">Rk_value</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td><td class="doc"><p>The user typed a correct keyword and this is its associated value.</p></td></tr><tr id="type-read_keyword_result.Rk_error" class="anchored"><td class="def variant constructor"><a href="#type-read_keyword_result.Rk_error" class="anchor"></a><code>| <span class="constructor">Rk_error</span> <span class="keyword">of</span> <a href="../../zed/Zed_string/index.html#type-t">Zed_string.t</a></code></td><td class="doc"><p>The user did not enter a correct keyword and this is what he typed instead.</p></td></tr></table></div><div><p>The result of reading a keyword.</p></div></div><div><div class="spec class" id="class-read_keyword" class="anchored"><a href="#class-read_keyword" class="anchor"></a><code><span class="keyword">class</span> 'a <a href="class-read_keyword/index.html">read_keyword</a> : ?&#8288;history:<a href="index.html#type-history">history</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Read a keyword.</p></div></div><h6 id="running-in-a-terminal"><a href="#running-in-a-terminal" class="anchor"></a>Running in a terminal</h6><div class="spec type" id="type-loop_result" class="anchored"><a href="#type-loop_result" class="anchor"></a><code><span class="keyword">type</span> <span>'a loop_result</span> = </code><table><tr id="type-loop_result.Result" class="anchored"><td class="def variant constructor"><a href="#type-loop_result.Result" class="anchor"></a><code>| <span class="constructor">Result</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr><tr id="type-loop_result.ContinueLoop" class="anchored"><td class="def variant constructor"><a href="#type-loop_result.ContinueLoop" class="anchor"></a><code>| <span class="constructor">ContinueLoop</span> <span class="keyword">of</span> <span><a href="../LTerm_key/index.html#type-t">LTerm_key.t</a> list</span></code></td></tr></table></div><div><div class="spec class" id="class-term" class="anchored"><a href="#class-term" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> 'a <a href="class-term/index.html">term</a> : <a href="../LTerm/index.html#type-t">LTerm.t</a> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div><p>Class for read-line instances running in a terminal.</p></div></div></div></body></html>