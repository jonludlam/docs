<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (irc-client.Irc_client.Make)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">irc-client</a> &#x00BB; <a href="../index.html">Irc_client</a> &#x00BB; Make</nav><header><h1>Module <code>Irc_client.Make</code></h1><h3 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h3><div class="spec parameter" id="argument-1-Io" class="anchored"><a href="#argument-1-Io" class="anchor"></a><code><span class="keyword">module</span> <a href="argument-1-Io/index.html">Io</a> : <a href="../../Irc_transport/module-type-IO/index.html">Irc_transport.IO</a></code></div><h3 id="signature"><a href="#signature" class="anchor"></a>Signature</h3></header><div class="content"><div class="spec module" id="module-Io" class="anchored"><a href="#module-Io" class="anchor"></a><code><span class="keyword">module</span> <a href="Io/index.html">Io</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="index.html#module-Io">Io</a>.t</span> = <span><span class="type-var">'a</span> <a href="argument-1-Io/index.html#type-t">Io.t</a></span> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Io">Io</a>.inet_addr = <a href="argument-1-Io/index.html#type-inet_addr">Io.inet_addr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Io">Io</a>.config = <a href="argument-1-Io/index.html#type-config">Io.config</a></code></div><div class="spec type" id="type-connection_t" class="anchored"><a href="#type-connection_t" class="anchor"></a><code><span class="keyword">type</span> connection_t</code></div><div><div class="spec value" id="val-send" class="anchored"><a href="#val-send" class="anchor"></a><code><span class="keyword">val</span> send : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <a href="../../Irc_message/index.html#type-t">Irc_message.t</a> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the given message</p></div></div><div><div class="spec value" id="val-send_join" class="anchored"><a href="#val-send_join" class="anchor"></a><code><span class="keyword">val</span> send_join : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>channel:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the JOIN command.</p></div></div><div><div class="spec value" id="val-send_nick" class="anchored"><a href="#val-send_nick" class="anchor"></a><code><span class="keyword">val</span> send_nick : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>nick:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the NICK command.</p></div></div><div><div class="spec value" id="val-send_pass" class="anchored"><a href="#val-send_pass" class="anchor"></a><code><span class="keyword">val</span> send_pass : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>password:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the PASS command.</p></div></div><div><div class="spec value" id="val-send_pong" class="anchored"><a href="#val-send_pong" class="anchor"></a><code><span class="keyword">val</span> send_pong : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>message1:string</span> <span>&#45;&gt;</span> <span>message2:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the PONG command.</p></div></div><div><div class="spec value" id="val-send_privmsg" class="anchored"><a href="#val-send_privmsg" class="anchor"></a><code><span class="keyword">val</span> send_privmsg : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>target:string</span> <span>&#45;&gt;</span> <span>message:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the PRIVMSG command.</p></div></div><div><div class="spec value" id="val-send_notice" class="anchored"><a href="#val-send_notice" class="anchor"></a><code><span class="keyword">val</span> send_notice : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>target:string</span> <span>&#45;&gt;</span> <span>message:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the NOTICE command.</p></div></div><div><div class="spec value" id="val-send_quit" class="anchored"><a href="#val-send_quit" class="anchor"></a><code><span class="keyword">val</span> send_quit : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the QUIT command.</p></div></div><div><div class="spec value" id="val-send_user" class="anchored"><a href="#val-send_user" class="anchor"></a><code><span class="keyword">val</span> send_user : <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>username:string</span> <span>&#45;&gt;</span> <span>mode:int</span> <span>&#45;&gt;</span> <span>realname:string</span> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Send the USER command.</p></div></div><div><div class="spec value" id="val-connect" class="anchored"><a href="#val-connect" class="anchor"></a><code><span class="keyword">val</span> connect : <span>?&#8288;username:string</span> <span>&#45;&gt;</span> <span>?&#8288;mode:int</span> <span>&#45;&gt;</span> <span>?&#8288;realname:string</span> <span>&#45;&gt;</span> <span>?&#8288;password:string</span> <span>&#45;&gt;</span> <span>?&#8288;config:<a href="Io/index.html#type-config">Io.config</a></span> <span>&#45;&gt;</span> <span>addr:<a href="Io/index.html#type-inet_addr">Io.inet_addr</a></span> <span>&#45;&gt;</span> <span>port:int</span> <span>&#45;&gt;</span> <span>nick:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-connection_t">connection_t</a> <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Connect to an IRC server at address <code>addr</code>. The PASS command will be sent if <code>password</code> is not None.</p></div></div><div><div class="spec value" id="val-connect_by_name" class="anchored"><a href="#val-connect_by_name" class="anchor"></a><code><span class="keyword">val</span> connect_by_name : <span>?&#8288;username:string</span> <span>&#45;&gt;</span> <span>?&#8288;mode:int</span> <span>&#45;&gt;</span> <span>?&#8288;realname:string</span> <span>&#45;&gt;</span> <span>?&#8288;password:string</span> <span>&#45;&gt;</span> <span>?&#8288;config:<a href="Io/index.html#type-config">Io.config</a></span> <span>&#45;&gt;</span> <span>server:string</span> <span>&#45;&gt;</span> <span>port:int</span> <span>&#45;&gt;</span> <span>nick:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><span><a href="index.html#type-connection_t">connection_t</a> option</span> <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>Try to resolve the <code>server</code> name using DNS, otherwise behaves like <a href="index.html#val-connect"><code>connect</code></a>. Returns <code>None</code> if no IP could be found for the given name.</p></div></div><div><div class="spec type" id="type-keepalive" class="anchored"><a href="#type-keepalive" class="anchor"></a><code><span class="keyword">type</span> keepalive = {</code><table><tr id="type-keepalive.mode" class="anchored"><td class="def record field"><a href="#type-keepalive.mode" class="anchor"></a><code>mode : <span>[ `Active <span>| `Passive</span> ]</span>;</code></td></tr><tr id="type-keepalive.timeout" class="anchored"><td class="def record field"><a href="#type-keepalive.timeout" class="anchor"></a><code>timeout : int;</code></td></tr></table><code>}</code></div><div><p>Information on keeping the connection alive</p></div></div><div><div class="spec value" id="val-default_keepalive" class="anchored"><a href="#val-default_keepalive" class="anchor"></a><code><span class="keyword">val</span> default_keepalive : <a href="index.html#type-keepalive">keepalive</a></code></div><div><p>Default value for keepalive: active mode with auto-reconnect</p></div></div><div><div class="spec value" id="val-listen" class="anchored"><a href="#val-listen" class="anchor"></a><code><span class="keyword">val</span> listen : <span>?&#8288;keepalive:<a href="index.html#type-keepalive">keepalive</a></span> <span>&#45;&gt;</span> <span>connection:<a href="index.html#type-connection_t">connection_t</a></span> <span>&#45;&gt;</span> <span>callback:<span>(<a href="index.html#type-connection_t">connection_t</a> <span>&#45;&gt;</span> <a href="../../Irc_message/index.html#type-parse_result">Irc_message.parse_result</a> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span>)</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p><code>listen connection callback</code> listens for incoming messages on <code>connection</code>. All server pings are handled internally; all other messages are passed, along with <code>connection</code>, to <code>callback</code>.</p><dl><dt>parameter keepalive</dt><dd><p>the behavior on disconnection (if the transport supports <code>Irc_transport</code>.IO.pick and <code>Irc_transport</code>.IO.sleep)</p></dd></dl></div></div><div><div class="spec value" id="val-reconnect_loop" class="anchored"><a href="#val-reconnect_loop" class="anchor"></a><code><span class="keyword">val</span> reconnect_loop : <span>?&#8288;keepalive:<a href="index.html#type-keepalive">keepalive</a></span> <span>&#45;&gt;</span> <span>?&#8288;reconnect:bool</span> <span>&#45;&gt;</span> <span>after:int</span> <span>&#45;&gt;</span> <span>connect:<span>(unit <span>&#45;&gt;</span> <span><span><a href="index.html#type-connection_t">connection_t</a> option</span> <a href="Io/index.html#type-t">Io.t</a></span>)</span></span> <span>&#45;&gt;</span> <span>f:<span>(<a href="index.html#type-connection_t">connection_t</a> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span>)</span></span> <span>&#45;&gt;</span> <span>callback:<span>(<a href="index.html#type-connection_t">connection_t</a> <span>&#45;&gt;</span> <a href="../../Irc_message/index.html#type-parse_result">Irc_message.parse_result</a> <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span>)</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span></code></div><div><p>A combination of <a href="index.html#val-connect"><code>connect</code></a> and <a href="index.html#val-listen"><code>listen</code></a> that, every time the connection is terminated, tries to start a new one after <code>after</code> seconds.</p><dl><dt>parameter after</dt><dd><p>time before trying to reconnect</p></dd></dl><dl><dt>parameter connect</dt><dd><p>how to reconnect (a closure over <code>connect</code> or <code>connect_by_name</code>)</p></dd></dl><dl><dt>parameter callback</dt><dd><p>the callback for <code>listen</code></p></dd></dl><dl><dt>parameter f</dt><dd><p>the function to call after connection</p></dd></dl></div></div><div><div class="spec value" id="val-set_log" class="anchored"><a href="#val-set_log" class="anchor"></a><code><span class="keyword">val</span> set_log : <span>(string <span>&#45;&gt;</span> <span>unit <a href="Io/index.html#type-t">Io.t</a></span>)</span> <span>&#45;&gt;</span> unit</code></div><div><p>Set logging function</p></div></div></div></body></html>