<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Marshal (tcpip.Udp_packet.Marshal)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../index.html">tcpip</a> &#x00BB; <a href="../index.html">Udp_packet</a> &#x00BB; Marshal</nav><header><h1>Module <code>Udp_packet.Marshal</code></h1></header><div class="content"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error = string</code></div><div><div class="spec value" id="val-into_cstruct" class="anchored"><a href="#val-into_cstruct" class="anchor"></a><code><span class="keyword">val</span> into_cstruct : <span>pseudoheader:<a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a></span> <span>&#45;&gt;</span> <span>payload:<a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a> <span>&#45;&gt;</span> <span><span>(unit, <a href="index.html#type-error">error</a>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></code></div><div><p><code>into_cstruct ~pseudoheader ~payload t buf</code> attempts to assemble a UDP header in <code>buf</code> with <code>t.src_port</code> and <code>t.dst_port</code> set, along with the correct length and checksum. It does not write <code>pseudoheader</code> or <code>payload</code> into the buffer, but requires them to calculate the correct checksum.</p></div></div><div><div class="spec value" id="val-make_cstruct" class="anchored"><a href="#val-make_cstruct" class="anchor"></a><code><span class="keyword">val</span> make_cstruct : <span>pseudoheader:<a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a></span> <span>&#45;&gt;</span> <span>payload:<a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../cstruct/Cstruct/index.html#type-t">Cstruct.t</a></code></div><div><p><code>make_cstruct ~pseudoheader ~payload t</code> allocates, fills, and and returns a buffer representing the UDP header corresponding to <code>t</code>. <code>make_cstruct</code> will allocate 8 bytes for the UDP header. <code>payload</code> and <code>pseudoheader</code> are not directly represented in the output, and are required for correct computation of the UDP checksum only. The checksum will be properly set to reflect the pseudoheader, header, and payload.</p></div></div></div></body></html>