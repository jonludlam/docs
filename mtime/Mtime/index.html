<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mtime (mtime.Mtime)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../index.html">mtime</a> &#x00BB; Mtime</nav><header><h1>Module <code>Mtime</code></h1><p>Monotonic time values.</p><p><code>Mtime</code> has platform independent support for monotonic wall-clock time. This time increases monotonically and is not subject to operating system calendar time adjustments.</p><p><span class="xref-unresolved">Time spans</span> represent non-negative monotonic time spans between two monotonic clock readings. <span class="xref-unresolved">Timestamps</span> represent system-relative monotonic <em>timestamps</em>, their absolute value is meaningless but they can be compared across the processes of an operating system run.</p><p><a href="../Mtime_clock/index.html"><code>Mtime_clock</code></a> provides access to a system monotonic clock.</p><p><em>v1.2.0 — <a href="https://erratique.ch/software/mtime">homepage</a></em></p></header><nav class="toc"><ul><li><a href="#spans">Monotonic time spans</a></li><li><a href="#timestamps">Monotonic timestamps</a></li><li><a href="#preds">Predicates</a></li><li><a href="#arith">Arithmetic</a></li><li><a href="#pretty">Pretty printing</a></li><li><a href="#convert">Time scale conversion</a></li></ul></nav><div class="content"><h2 id="spans"><a href="#spans" class="anchor"></a>Monotonic time spans</h2><div><div class="spec type" id="type-span" class="anchored"><a href="#type-span" class="anchor"></a><code><span class="keyword">type</span> span</code></div><div><p>The type for non-negative monotonic time spans. They represent the difference between two monotonic clock readings. If the platform's clock has nanosecond resolution the representation guarantees that the function <a href="../Mtime_clock/index.html#val-elapsed"><code>Mtime_clock.elapsed</code></a> can measure up to approximatively 584 Julian year spans before silently rolling over (unlikely since this is in a single program run).</p></div></div><div><div class="spec module" id="module-Span" class="anchored"><a href="#module-Span" class="anchor"></a><code><span class="keyword">module</span> <a href="Span/index.html">Span</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><p>Monotonic time spans.</p></div></div><h2 id="timestamps"><a href="#timestamps" class="anchor"></a>Monotonic timestamps</h2><aside><p><b>Note.</b> Only use timestamps if you need inter-process time correlation, otherwise prefer <a href="../Mtime_clock/index.html#val-elapsed"><code>Mtime_clock.elapsed</code></a> and <a href="../Mtime_clock/index.html#counters">counters</a>.</p></aside><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></div><div><p>The type for monotonic timestamps relative to an indeterminate system-wide event (e.g. last startup). Their absolute value has no meaning but can be used for inter-process time correlation.</p></div></div><div><div class="spec value" id="val-to_uint64_ns" class="anchored"><a href="#val-to_uint64_ns" class="anchor"></a><code><span class="keyword">val</span> to_uint64_ns : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int64</code></div><div><p><code>to_uint64_ns t</code> is <code>t</code> as an <em>unsigned</em> 64-bit integer nanosecond timestamp. The absolute value is meaningless.</p></div></div><div><div class="spec value" id="val-of_uint64_ns" class="anchored"><a href="#val-of_uint64_ns" class="anchor"></a><code><span class="keyword">val</span> of_uint64_ns : int64 <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>to_uint64_ns t</code> is <code>t</code> is an <em>unsigned</em> 64-bit integer nanosecond timestamp as a timestamp.</p><p><b>Warning.</b> Timestamps returned by this function should only be used with other timestamp values that are know to come from the same operating system run.</p></div></div><h2 id="preds"><a href="#preds" class="anchor"></a>Predicates</h2><div><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></div><div><p><code>equal t t'</code> is <code>true</code> iff <code>t</code> and <code>t'</code> are equal.</p></div></div><div><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></div><div><p><code>compare t t'</code> orders timestamps by increasing time.</p></div></div><div><div class="spec value" id="val-is_earlier" class="anchored"><a href="#val-is_earlier" class="anchor"></a><code><span class="keyword">val</span> is_earlier : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>than:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></div><div><p><code>is_earlier t ~than</code> is <code>true</code> iff <code>t</code> occurred before <code>than</code>.</p></div></div><div><div class="spec value" id="val-is_later" class="anchored"><a href="#val-is_later" class="anchor"></a><code><span class="keyword">val</span> is_later : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>than:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></div><div><p><code>is_later t ~than</code> is <code>true</code> iff <code>t</code> occurred after <code>than</code>.</p></div></div><h2 id="arith"><a href="#arith" class="anchor"></a>Arithmetic</h2><div><div class="spec value" id="val-span" class="anchored"><a href="#val-span" class="anchor"></a><code><span class="keyword">val</span> span : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-span">span</a></code></div><div><p><code>span t t'</code> is the span between <code>t</code> and <code>t'</code> regardless of the order between <code>t</code> and <code>t'</code>.</p></div></div><div><div class="spec value" id="val-add_span" class="anchored"><a href="#val-add_span" class="anchor"></a><code><span class="keyword">val</span> add_span : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-span">span</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></div><div><p><code>add_span t s</code> is the timestamp <code>s</code> units later than <code>t</code> or <code>None</code> if the result overflows.</p></div></div><div><div class="spec value" id="val-sub_span" class="anchored"><a href="#val-sub_span" class="anchor"></a><code><span class="keyword">val</span> sub_span : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-span">span</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></div><div><p><code>sub_span t s</code> is the timestamp <code>s</code> units earlier than <code>t</code> or <code>None</code> if overflows.</p></div></div><h2 id="pretty"><a href="#pretty" class="anchor"></a>Pretty printing</h2><div><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>pp ppf t</code> prints <code>t</code> as an <em>unsigned</em> 64-bit integer nanosecond timestamp. Note that the absolute value is meaningless.</p></div></div><div><div class="spec value" id="val-dump" class="anchored"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val</span> dump : <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>dump ppf t</code> prints an unspecified raw representation of <code>t</code> on <code>ppf</code>.</p></div></div><h2 id="convert"><a href="#convert" class="anchor"></a>Time scale conversion</h2><aside><p>The following convenience constants relate time scales to seconds. Used as multiplicands they can be used to convert these units to and from seconds.</p><p>The constants are defined according to <a href="http://www.bipm.org/en/publications/si-brochure/chapter3.html">SI prefixes</a> on seconds and <a href="http://www.bipm.org/en/publications/si-brochure/table6.html">accepted non-SI units</a>. Years are counted in Julian years (365.25 SI-accepted days) as <a href="http://www.iau.org/publications/proceedings_rules/units/">defined</a> by the International Astronomical Union (IAU).</p></aside><div><div class="spec value" id="val-ns_to_s" class="anchored"><a href="#val-ns_to_s" class="anchor"></a><code><span class="keyword">val</span> ns_to_s : float</code></div><div><p><code>ns_to_s</code> is <code>1e-9</code> the number of seconds in one nanosecond.</p></div></div><div><div class="spec value" id="val-us_to_s" class="anchored"><a href="#val-us_to_s" class="anchor"></a><code><span class="keyword">val</span> us_to_s : float</code></div><div><p><code>us_to_s</code> is <code>1e-6</code>, the number of seconds in one microsecond.</p></div></div><div><div class="spec value" id="val-ms_to_s" class="anchored"><a href="#val-ms_to_s" class="anchor"></a><code><span class="keyword">val</span> ms_to_s : float</code></div><div><p><code>ms_to_s</code> is <code>1e-3</code>, the number of seconds in one millisecond.</p></div></div><div><div class="spec value" id="val-min_to_s" class="anchored"><a href="#val-min_to_s" class="anchor"></a><code><span class="keyword">val</span> min_to_s : float</code></div><div><p><code>min_to_s</code> is <code>60.</code>, the number of seconds in one SI-accepted minute.</p></div></div><div><div class="spec value" id="val-hour_to_s" class="anchored"><a href="#val-hour_to_s" class="anchor"></a><code><span class="keyword">val</span> hour_to_s : float</code></div><div><p><code>hour_to_s</code> is <code>3600.</code>, the number of seconds in one SI-accepted hour.</p></div></div><div><div class="spec value" id="val-day_to_s" class="anchored"><a href="#val-day_to_s" class="anchor"></a><code><span class="keyword">val</span> day_to_s : float</code></div><div><p><code>day_to_s</code> is <code>86_400.</code>, the number of seconds in one SI-accepted day.</p></div></div><div><div class="spec value" id="val-year_to_s" class="anchored"><a href="#val-year_to_s" class="anchor"></a><code><span class="keyword">val</span> year_to_s : float</code></div><div><p><code>year_to_s</code> is <code>31_557_600.</code>, the number of seconds in a Julian year.</p></div></div><div><div class="spec value" id="val-s_to_ns" class="anchored"><a href="#val-s_to_ns" class="anchor"></a><code><span class="keyword">val</span> s_to_ns : float</code></div><div><p><code>s_to_ns</code> is <code>1e9</code> the number of nanoseconds in one second.</p></div></div><div><div class="spec value" id="val-s_to_us" class="anchored"><a href="#val-s_to_us" class="anchor"></a><code><span class="keyword">val</span> s_to_us : float</code></div><div><p><code>s_to_us</code> is <code>1e6</code>, the number of microseconds in one second.</p></div></div><div><div class="spec value" id="val-s_to_ms" class="anchored"><a href="#val-s_to_ms" class="anchor"></a><code><span class="keyword">val</span> s_to_ms : float</code></div><div><p><code>s_to_ms</code> is <code>1e3</code>, the number of milliseconds in one second.</p></div></div><div><div class="spec value" id="val-s_to_min" class="anchored"><a href="#val-s_to_min" class="anchor"></a><code><span class="keyword">val</span> s_to_min : float</code></div><div><p><code>s_to_min</code> is <code>1. /. 60.</code>, the number of SI-accepted minutes in one second.</p></div></div><div><div class="spec value" id="val-s_to_hour" class="anchored"><a href="#val-s_to_hour" class="anchor"></a><code><span class="keyword">val</span> s_to_hour : float</code></div><div><p><code>s_to_hour</code> is <code>1. /. 3600.</code>, the number of SI-accepted hours in one second.</p></div></div><div><div class="spec value" id="val-s_to_day" class="anchored"><a href="#val-s_to_day" class="anchor"></a><code><span class="keyword">val</span> s_to_day : float</code></div><div><p><code>s_to_day</code> is <code>1. /. 86400.</code>, the number of SI-accepted days in one second.</p></div></div><div><div class="spec value" id="val-s_to_year" class="anchored"><a href="#val-s_to_year" class="anchor"></a><code><span class="keyword">val</span> s_to_year : float</code></div><div><p><code>s_to_year</code> is <code>1. /. 31_557_600.</code>, the number of Julian years in one second.</p></div></div></div></body></html>