<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Arg (functoria.Functoria.KEY.Arg)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">functoria</a> &#x00BB; <a href="../../index.html">Functoria</a> &#x00BB; <a href="../index.html">KEY</a> &#x00BB; Arg</nav><header><h1>Module <code>KEY.Arg</code></h1><p>Cross-stage command-line arguments.</p></header><nav class="toc"><ul><li><a href="#argument-converters">Argument converters</a></li><li><a href="#arguments-and-their-information">Arguments and their information</a></li><li><a href="#optional-arguments">Optional Arguments</a></li></ul></nav><div class="content"><aside><p>Terms for cross-stage arguments.</p><p>This module extends <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html">Cmdliner.Arg</a> to allow MetaOCaml-style typed cross-stage persistency of command-line arguments.</p></aside><h2 id="argument-converters"><a href="#argument-converters" class="anchor"></a>Argument converters</h2><div><div class="spec type" id="type-serialize" class="anchored"><a href="#type-serialize" class="anchor"></a><code><span class="keyword">type</span> <span>'a serialize</span> = <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></div><div><p>The type for command-line argument serializers. A value of type <code>'a serialize</code> generates a syntactically valid OCaml representation which evaluates to a value of type <code>'a</code>.</p></div></div><div><div class="spec type" id="type-runtime_conv" class="anchored"><a href="#type-runtime_conv" class="anchor"></a><code><span class="keyword">type</span> <span>'a runtime_conv</span> = string</code></div><div><p>The type for command-line argument converters used at runtime. A value of type <code>'a runtime_conv</code> is a symbol name of type <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#TYPEconverter">Cmdliner.Arg.converter</a>.</p></div></div><div><div class="spec type" id="type-converter" class="anchored"><a href="#type-converter" class="anchor"></a><code><span class="keyword">type</span> <span>'a converter</span> = <span><span class="type-var">'a</span> <a href="../../../Functoria_key/Arg/index.html#type-converter">Functoria_key.Arg.converter</a></span></code></div><div><p>The type for argument converters.</p></div></div><div><div class="spec value" id="val-conv" class="anchored"><a href="#val-conv" class="anchor"></a><code><span class="keyword">val</span> conv : <span>conv:<span><span class="type-var">'a</span> <a href="../../../../cmdliner/Cmdliner/Arg/index.html#type-converter">Cmdliner.Arg.converter</a></span></span> <span>&#45;&gt;</span> <span>serialize:<span><span class="type-var">'a</span> <a href="index.html#type-serialize">serialize</a></span></span> <span>&#45;&gt;</span> <span>runtime_conv:<span><span class="type-var">'a</span> <a href="index.html#type-runtime_conv">runtime_conv</a></span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>conv c s r</code> is the argument converter using <code>c</code> to convert user strings into OCaml value, <code>s</code> to convert OCaml values into strings interpretable as OCaml expressions, and the function named <code>r</code> to convert user strings into OCaml values at runtime.</p></div></div><div><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span>string <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>string</code> converts strings.</p></div></div><div><div class="spec value" id="val-bool" class="anchored"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <span>bool <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>bool</code> converts booleans.</p></div></div><div><div class="spec value" id="val-int" class="anchored"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <span>int <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>int</code> converts integers.</p></div></div><div><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <span><span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>list t</code> converts lists of <code>t</code>s.</p></div></div><div><div class="spec value" id="val-some" class="anchored"><a href="#val-some" class="anchor"></a><code><span class="keyword">val</span> some : <span><span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-converter">converter</a></span></code></div><div><p><code>some t</code> converts <code>t</code> options.</p></div></div><h2 id="arguments-and-their-information"><a href="#arguments-and-their-information" class="anchor"></a>Arguments and their information</h2><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span> = <span><span class="type-var">'a</span> <a href="../../../Functoria_key/Arg/index.html#type-t">Functoria_key.Arg.t</a></span></code></div><div><p>The type for arguments holding data of type <code>'a</code>.</p></div></div><div><div class="spec type" id="type-info" class="anchored"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info = <a href="../../../Functoria_key/Arg/index.html#type-info">Functoria_key.Arg.info</a></code></div><div><p>The type for information about cross-stage command-line arguments. See <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#arginfo">Cmdliner's arguments</a>.</p></div></div><div><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span class="keyword">val</span> info : <span>?&#8288;docs:string</span> <span>&#45;&gt;</span> <span>?&#8288;docv:string</span> <span>&#45;&gt;</span> <span>?&#8288;doc:string</span> <span>&#45;&gt;</span> <span>?&#8288;env:string</span> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></div><div><p>Define cross-stage information for an argument. See <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#TYPEinfo">Cmdliner.Arg.info</a>. If not set, <code>docs</code> is <code>&quot;UNIKERNEL PARAMETERS&quot;</code>.</p></div></div><h2 id="optional-arguments"><a href="#optional-arguments" class="anchor"></a>Optional Arguments</h2><div><div class="spec type" id="type-stage" class="anchored"><a href="#type-stage" class="anchor"></a><code><span class="keyword">type</span> stage = [ </code><table><tr id="type-stage.Configure" class="anchored"><td class="def constructor"><a href="#type-stage.Configure" class="anchor"></a><code>| </code><code>`Configure</code></td></tr><tr id="type-stage.Run" class="anchored"><td class="def constructor"><a href="#type-stage.Run" class="anchor"></a><code>| </code><code>`Run</code></td></tr><tr id="type-stage.Both" class="anchored"><td class="def constructor"><a href="#type-stage.Both" class="anchor"></a><code>| </code><code>`Both</code></td></tr></table><code> ]</code></div><div><p>The type for specifying at which stage an argument is available.</p><ul><li><code>`Configure</code> means that the argument is read on the command-line at configuration-time.</li><li><code>`Run</code> means that the argument is read on the command-line at runtime.</li><li><code>`Both</code> means that the argument is read on the command-line both at configuration-time and run-time.</li></ul></div></div><div><div class="spec value" id="val-opt" class="anchored"><a href="#val-opt" class="anchor"></a><code><span class="keyword">val</span> opt : <span>?&#8288;stage:<a href="index.html#type-stage">stage</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></div><div><p><code>opt conv v i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALopt">Cmdliner.Arg.opt</a> but for cross-stage optional command-line arguments. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div><div><div class="spec value" id="val-required" class="anchored"><a href="#val-required" class="anchor"></a><code><span class="keyword">val</span> required : <span>?&#8288;stage:<a href="index.html#type-stage">stage</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-t">t</a></span></code></div><div><p><code>required conv i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALrequired">Cmdliner.Arg.required</a> but for cross-stage required command-line arguments. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div><div><div class="spec value" id="val-flag" class="anchored"><a href="#val-flag" class="anchor"></a><code><span class="keyword">val</span> flag : <span>?&#8288;stage:<a href="index.html#type-stage">stage</a></span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <span>bool <a href="index.html#type-t">t</a></span></code></div><div><p><code>flag i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALflag">Cmdliner.Arg.flag</a> but for cross-stage command-line flags. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div></div></body></html>