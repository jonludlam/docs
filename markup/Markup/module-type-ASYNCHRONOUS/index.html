<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ASYNCHRONOUS (markup.Markup.ASYNCHRONOUS)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../index.html">markup</a> &#x00BB; <a href="../index.html">Markup</a> &#x00BB; ASYNCHRONOUS</nav><header><h1>Module type <code>Markup.ASYNCHRONOUS</code></h1><p>Markup.ml interface for monadic I/O libraries such as Lwt and Async.</p><p>This signature is implemented by <code>Markup_lwt</code>, with a few additions.</p><p>Each function here corresponds directly to the function in the basic module <a href="../index.html"><code>Markup</code></a> that has the same name. So, see <a href="../index.html"><code>Markup</code></a> for details.</p><p>The only difference is that functions here, all of which are higher-order functions, take a function as argument that returns an <code>'a io</code> promise, rather than returning an already-computed value.</p></header><nav class="toc"><ul><li><a href="#promises">Promises</a></li><li><a href="#encodings">Encodings</a></li><li><a href="#xml">XML</a></li><li><a href="#html">HTML</a></li><li><a href="#i/o">I/O</a></li><li><a href="#stream-manipulation">Stream manipulation</a></li><li><a href="#utility">Utility</a></li></ul></nav><div class="content"><h3 id="promises"><a href="#promises" class="anchor"></a>Promises</h3><div><div class="spec type" id="type-io" class="anchored"><a href="#type-io" class="anchor"></a><code><span class="keyword">type</span> <span>'a io</span></code></div><div><p>Promise type. Replaced by <code>'a Lwt.t</code> in <code>Markup_lwt</code>.</p></div></div><h3 id="encodings"><a href="#encodings" class="anchor"></a>Encodings</h3><div><div class="spec module" id="module-Encoding" class="anchored"><a href="#module-Encoding" class="anchor"></a><code><span class="keyword">module</span> <a href="Encoding/index.html">Encoding</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><p>Asynchronous counterpart to <a href="../Encoding/index.html"><code>Markup.Encoding</code></a>.</p></div></div><h3 id="xml"><a href="#xml" class="anchor"></a>XML</h3><div class="spec value" id="val-parse_xml" class="anchored"><a href="#val-parse_xml" class="anchor"></a><code><span class="keyword">val</span> parse_xml : <span>?&#8288;report:<span>(<a href="../index.html#type-location">location</a> <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;encoding:<a href="Encoding/index.html#type-t">Encoding.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;namespace:<span>(string <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;entity:<span>(string <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;context:<span>[&lt; `Document <span>| `Fragment</span> ]</span></span> <span>&#45;&gt;</span> <span><span>(char, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><a href="../index.html#type-async">async</a> <a href="../index.html#type-parser">parser</a></span></code></div><div class="spec value" id="val-write_xml" class="anchored"><a href="#val-write_xml" class="anchor"></a><code><span class="keyword">val</span> write_xml : <span>?&#8288;report:<span>(<span>(<a href="../index.html#type-signal">signal</a> * int)</span> <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;prefix:<span>(string <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span><span>(<span>[&lt; <a href="../index.html#type-signal">signal</a> ]</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(char, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><h3 id="html"><a href="#html" class="anchor"></a>HTML</h3><div class="spec value" id="val-parse_html" class="anchored"><a href="#val-parse_html" class="anchor"></a><code><span class="keyword">val</span> parse_html : <span>?&#8288;report:<span>(<a href="../index.html#type-location">location</a> <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;encoding:<a href="Encoding/index.html#type-t">Encoding.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;context:<span>[&lt; `Document <span><span>| `Fragment</span> of string</span> ]</span></span> <span>&#45;&gt;</span> <span><span>(char, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><a href="../index.html#type-async">async</a> <a href="../index.html#type-parser">parser</a></span></code></div><div class="spec value" id="val-write_html" class="anchored"><a href="#val-write_html" class="anchor"></a><code><span class="keyword">val</span> write_html : <span>?&#8288;escape_attribute:<span>(string <span>&#45;&gt;</span> string)</span></span> <span>&#45;&gt;</span> <span>?&#8288;escape_text:<span>(string <span>&#45;&gt;</span> string)</span></span> <span>&#45;&gt;</span> <span><span>(<span>[&lt; <a href="../index.html#type-signal">signal</a> ]</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(char, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><h3 id="i/o"><a href="#i/o" class="anchor"></a>I/O</h3><div class="spec value" id="val-fn" class="anchored"><a href="#val-fn" class="anchor"></a><code><span class="keyword">val</span> fn : <span>(unit <span>&#45;&gt;</span> <span><span>char option</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(char, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-to_string" class="anchored"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <span><span>(char, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span>string <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-to_buffer" class="anchored"><a href="#val-to_buffer" class="anchor"></a><code><span class="keyword">val</span> to_buffer : <span><span>(char, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><a href="../../../ocaml/Stdlib/Buffer/index.html#type-t">Stdlib.Buffer.t</a> <a href="index.html#type-io">io</a></span></code></div><h3 id="stream-manipulation"><a href="#stream-manipulation" class="anchor"></a>Stream manipulation</h3><div class="spec value" id="val-stream" class="anchored"><a href="#val-stream" class="anchor"></a><code><span class="keyword">val</span> stream : <span>(unit <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-next" class="anchored"><a href="#val-next" class="anchor"></a><code><span class="keyword">val</span> next : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-peek" class="anchored"><a href="#val-peek" class="anchor"></a><code><span class="keyword">val</span> peek : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-transform" class="anchored"><a href="#val-transform" class="anchor"></a><code><span class="keyword">val</span> transform : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span>(<span><span class="type-var">'c</span> list</span> * <span><span class="type-var">'a</span> option</span>)</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'c</span>, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-fold" class="anchored"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-filter" class="anchored"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>bool <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-filter_map" class="anchored"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> option</span> <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <a href="../index.html#type-async">async</a>)</span> <a href="../index.html#type-stream">stream</a></span></code></div><div class="spec value" id="val-iter" class="anchored"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-drain" class="anchored"><a href="#val-drain" class="anchor"></a><code><span class="keyword">val</span> drain : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-io">io</a></span></code></div><div class="spec value" id="val-to_list" class="anchored"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> <a href="index.html#type-io">io</a></span></code></div><div><div class="spec value" id="val-load" class="anchored"><a href="#val-load" class="anchor"></a><code><span class="keyword">val</span> load : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-sync">sync</a>)</span> <a href="../index.html#type-stream">stream</a></span> <a href="index.html#type-io">io</a></span></code></div><div><p><code>load s</code> converts a general stream <code>s</code> to a synchronous stream by buffering it.</p></div></div><h3 id="utility"><a href="#utility" class="anchor"></a>Utility</h3><div class="spec value" id="val-tree" class="anchored"><a href="#val-tree" class="anchor"></a><code><span class="keyword">val</span> tree : <span>?&#8288;text:<span>(<span>string list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;element:<span>(<a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <span><span>(<a href="../index.html#type-name">name</a> * string)</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;comment:<span>(string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;pi:<span>(string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;xml:<span>(<a href="../index.html#type-xml_declaration">xml_declaration</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;doctype:<span>(<a href="../index.html#type-doctype">doctype</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span>(<span>[&lt; <a href="../index.html#type-signal">signal</a> ]</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-stream">stream</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-io">io</a></span></code></div></div></body></html>