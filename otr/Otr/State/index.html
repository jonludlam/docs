<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>State (otr.Otr.State)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">otr</a> &#x00BB; <a href="../index.html">Otr</a> &#x00BB; State</nav><header><h1>Module <code>Otr.State</code></h1><p>States and types</p></header><nav class="toc"><ul><li><a href="#type-definitions-and-predicates">Type definitions and predicates</a></li></ul></nav><div class="content"><h3 id="type-definitions-and-predicates"><a href="#type-definitions-and-predicates" class="anchor"></a>Type definitions and predicates</h3><div><div class="spec type" id="type-ret" class="anchored"><a href="#type-ret" class="anchor"></a><code><span class="keyword">type</span> ret = [ </code><table><tr id="type-ret.Warning" class="anchored"><td class="def constructor"><a href="#type-ret.Warning" class="anchor"></a><code>| </code><code>`Warning <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.Received_error" class="anchored"><td class="def constructor"><a href="#type-ret.Received_error" class="anchor"></a><code>| </code><code>`Received_error <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.Received" class="anchored"><td class="def constructor"><a href="#type-ret.Received" class="anchor"></a><code>| </code><code>`Received <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.Established_encrypted_session" class="anchored"><td class="def constructor"><a href="#type-ret.Established_encrypted_session" class="anchor"></a><code>| </code><code>`Established_encrypted_session <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.Received_encrypted" class="anchored"><td class="def constructor"><a href="#type-ret.Received_encrypted" class="anchor"></a><code>| </code><code>`Received_encrypted <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.SMP_awaiting_secret" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_awaiting_secret" class="anchor"></a><code>| </code><code>`SMP_awaiting_secret</code></td></tr><tr id="type-ret.SMP_received_question" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_received_question" class="anchor"></a><code>| </code><code>`SMP_received_question <span class="keyword">of</span> string</code></td></tr><tr id="type-ret.SMP_success" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_success" class="anchor"></a><code>| </code><code>`SMP_success</code></td></tr><tr id="type-ret.SMP_failure" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_failure" class="anchor"></a><code>| </code><code>`SMP_failure</code></td></tr></table><code> ]</code></div><div><p>Return values of functions in the <a href="../Engine/index.html"><code>Engine</code></a> module.</p></div></div><div><div class="spec type" id="type-policy" class="anchored"><a href="#type-policy" class="anchor"></a><code><span class="keyword">type</span> policy = [ </code><table><tr id="type-policy.REQUIRE_ENCRYPTION" class="anchored"><td class="def constructor"><a href="#type-policy.REQUIRE_ENCRYPTION" class="anchor"></a><code>| </code><code>`REQUIRE_ENCRYPTION</code></td></tr><tr id="type-policy.SEND_WHITESPACE_TAG" class="anchored"><td class="def constructor"><a href="#type-policy.SEND_WHITESPACE_TAG" class="anchor"></a><code>| </code><code>`SEND_WHITESPACE_TAG</code></td></tr><tr id="type-policy.WHITESPACE_START_AKE" class="anchored"><td class="def constructor"><a href="#type-policy.WHITESPACE_START_AKE" class="anchor"></a><code>| </code><code>`WHITESPACE_START_AKE</code></td></tr><tr id="type-policy.ERROR_START_AKE" class="anchored"><td class="def constructor"><a href="#type-policy.ERROR_START_AKE" class="anchor"></a><code>| </code><code>`ERROR_START_AKE</code></td></tr><tr id="type-policy.REVEAL_MACS" class="anchored"><td class="def constructor"><a href="#type-policy.REVEAL_MACS" class="anchor"></a><code>| </code><code>`REVEAL_MACS</code></td></tr></table><code> ]</code></div><div><p>OTR policies, as defined in the protocol.</p></div></div><div class="spec value" id="val-sexp_of_policy" class="anchored"><a href="#val-sexp_of_policy" class="anchor"></a><code><span class="keyword">val</span> sexp_of_policy : <a href="index.html#type-policy">policy</a> <span>&#45;&gt;</span> <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a></code></div><div class="spec value" id="val-policy_of_sexp" class="anchored"><a href="#val-policy_of_sexp" class="anchor"></a><code><span class="keyword">val</span> policy_of_sexp : <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-policy">policy</a></code></div><div><div class="spec value" id="val-policy_to_string" class="anchored"><a href="#val-policy_to_string" class="anchor"></a><code><span class="keyword">val</span> policy_to_string : <a href="index.html#type-policy">policy</a> <span>&#45;&gt;</span> string</code></div><div><p><code>policy_to_string policy</code> is <code>string</code>, the string representation of the given <code>policy</code>.</p></div></div><div><div class="spec value" id="val-string_to_policy" class="anchored"><a href="#val-string_to_policy" class="anchor"></a><code><span class="keyword">val</span> string_to_policy : string <span>&#45;&gt;</span> <span><a href="index.html#type-policy">policy</a> option</span></code></div><div><p><code>string_to_policy string</code> is <code>policy</code>, the <code>policy</code> matching the string (<code>None</code> if none matches).</p></div></div><div><div class="spec value" id="val-all_policies" class="anchored"><a href="#val-all_policies" class="anchor"></a><code><span class="keyword">val</span> all_policies : <span><a href="index.html#type-policy">policy</a> list</span></code></div><div><p><code>all_policies</code> returns a list of all defined policies.</p></div></div><div><div class="spec type" id="type-version" class="anchored"><a href="#type-version" class="anchor"></a><code><span class="keyword">type</span> version = [ </code><table><tr id="type-version.V2" class="anchored"><td class="def constructor"><a href="#type-version.V2" class="anchor"></a><code>| </code><code>`V2</code></td></tr><tr id="type-version.V3" class="anchored"><td class="def constructor"><a href="#type-version.V3" class="anchor"></a><code>| </code><code>`V3</code></td></tr></table><code> ]</code></div><div><p>OTR protocol versions supported by this library</p></div></div><div class="spec value" id="val-sexp_of_version" class="anchored"><a href="#val-sexp_of_version" class="anchor"></a><code><span class="keyword">val</span> sexp_of_version : <a href="index.html#type-version">version</a> <span>&#45;&gt;</span> <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a></code></div><div class="spec value" id="val-version_of_sexp" class="anchored"><a href="#val-version_of_sexp" class="anchor"></a><code><span class="keyword">val</span> version_of_sexp : <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-version">version</a></code></div><div><div class="spec value" id="val-version_to_string" class="anchored"><a href="#val-version_to_string" class="anchor"></a><code><span class="keyword">val</span> version_to_string : <a href="index.html#type-version">version</a> <span>&#45;&gt;</span> string</code></div><div><p><code>version_to_string version</code> is <code>string</code>, the string representation of the <code>version</code>.</p></div></div><div><div class="spec value" id="val-string_to_version" class="anchored"><a href="#val-string_to_version" class="anchor"></a><code><span class="keyword">val</span> string_to_version : string <span>&#45;&gt;</span> <span><a href="index.html#type-version">version</a> option</span></code></div><div><p><code>string_to_version string</code> is <code>version</code>, the <code>version</code> matching the string (<code>None</code> if none matches).</p></div></div><div><div class="spec value" id="val-all_versions" class="anchored"><a href="#val-all_versions" class="anchor"></a><code><span class="keyword">val</span> all_versions : <span><a href="index.html#type-version">version</a> list</span></code></div><div><p><code>all_versions</code> returns a list of all supported versions.</p></div></div><div><div class="spec type" id="type-config" class="anchored"><a href="#type-config" class="anchor"></a><code><span class="keyword">type</span> config = {</code><table><tr id="type-config.policies" class="anchored"><td class="def record field"><a href="#type-config.policies" class="anchor"></a><code>policies : <span><a href="index.html#type-policy">policy</a> list</span>;</code></td></tr><tr id="type-config.versions" class="anchored"><td class="def record field"><a href="#type-config.versions" class="anchor"></a><code>versions : <span><a href="index.html#type-version">version</a> list</span>;</code></td></tr></table><code>}</code></div><div><p>OTR configuration consisting of a set of policies and versions.</p></div></div><div class="spec value" id="val-sexp_of_config" class="anchored"><a href="#val-sexp_of_config" class="anchor"></a><code><span class="keyword">val</span> sexp_of_config : <a href="index.html#type-config">config</a> <span>&#45;&gt;</span> <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a></code></div><div class="spec value" id="val-config_of_sexp" class="anchored"><a href="#val-config_of_sexp" class="anchor"></a><code><span class="keyword">val</span> config_of_sexp : <a href="../../../sexplib/Sexplib/Sexp/index.html#type-t">Sexplib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-config">config</a></code></div><div><div class="spec value" id="val-config" class="anchored"><a href="#val-config" class="anchor"></a><code><span class="keyword">val</span> config : <span><a href="index.html#type-version">version</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-policy">policy</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-config">config</a></code></div><div><p><code>config versions policies</code> is <code>config</code>, the configuration with the given <code>versions</code> and <code>policies</code>.</p></div></div><div><div class="spec type" id="type-session" class="anchored"><a href="#type-session" class="anchor"></a><code><span class="keyword">type</span> session</code></div><div><p>An abstract OTR session</p></div></div><div><div class="spec value" id="val-session_to_string" class="anchored"><a href="#val-session_to_string" class="anchor"></a><code><span class="keyword">val</span> session_to_string : <a href="index.html#type-session">session</a> <span>&#45;&gt;</span> string</code></div><div><p><code>session_to_string session</code> is <code>string</code>, the string representation of the <code>session</code>.</p></div></div><div><div class="spec value" id="val-version" class="anchored"><a href="#val-version" class="anchor"></a><code><span class="keyword">val</span> version : <a href="index.html#type-session">session</a> <span>&#45;&gt;</span> <a href="index.html#type-version">version</a></code></div><div><p><code>version session</code> is <code>version</code>, the current active protocol version of this <code>session</code>.</p></div></div><div><div class="spec value" id="val-is_encrypted" class="anchored"><a href="#val-is_encrypted" class="anchor"></a><code><span class="keyword">val</span> is_encrypted : <a href="index.html#type-session">session</a> <span>&#45;&gt;</span> bool</code></div><div><p><code>is_encrypted session</code> is <code>true</code> if the session is established.</p></div></div><div><div class="spec value" id="val-their_dsa" class="anchored"><a href="#val-their_dsa" class="anchor"></a><code><span class="keyword">val</span> their_dsa : <a href="index.html#type-session">session</a> <span>&#45;&gt;</span> <span><a href="../../../mirage-crypto-pk/Mirage_crypto_pk/Dsa/index.html#type-pub">Mirage_crypto_pk.Dsa.pub</a> option</span></code></div><div><p><code>their_dsa session</code> is <code>dsa</code>, the public DSA key used by the communication partner (if the session is established).</p></div></div><div><div class="spec value" id="val-new_session" class="anchored"><a href="#val-new_session" class="anchor"></a><code><span class="keyword">val</span> new_session : <a href="index.html#type-config">config</a> <span>&#45;&gt;</span> <a href="../../../mirage-crypto-pk/Mirage_crypto_pk/Dsa/index.html#type-priv">Mirage_crypto_pk.Dsa.priv</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-session">session</a></code></div><div><p><code>new_session configuration dsa ()</code> is <code>session</code>, a fresh session given the <code>configuration</code> and <code>dsa</code> private key.</p></div></div><div><div class="spec value" id="val-update_config" class="anchored"><a href="#val-update_config" class="anchor"></a><code><span class="keyword">val</span> update_config : <a href="index.html#type-config">config</a> <span>&#45;&gt;</span> <a href="index.html#type-session">session</a> <span>&#45;&gt;</span> <a href="index.html#type-session">session</a></code></div><div><p><code>update_config config session</code> is <code>session</code>, the <code>session</code> adjusted to the <code>config</code>. Note: the <code>session</code> might not conform to the config anymore!</p></div></div></div></body></html>