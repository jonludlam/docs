<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tloc (b0.B00_serialk_text.Tloc)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B00_serialk_text</a> &#x00BB; Tloc</nav><header><h1>Module <code>B00_serialk_text.Tloc</code></h1><p>Text locations.</p></header><nav class="toc"><ul><li><a href="#tloc">Text locations</a></li><li><a href="#text">Substitutions and insertions</a></li></ul></nav><div class="content"><h2 id="tloc"><a href="#tloc" class="anchor"></a>Text locations</h2><div><div class="spec type" id="type-fpath" class="anchored"><a href="#type-fpath" class="anchor"></a><code><span class="keyword">type</span> fpath = string</code></div><div><p>The type for file paths.</p></div></div><div><div class="spec value" id="val-no_file" class="anchored"><a href="#val-no_file" class="anchor"></a><code><span class="keyword">val</span> no_file : <a href="index.html#type-fpath">fpath</a></code></div><div><p><code>no_file</code> is <code>Fpath.t &quot;-&quot;</code>, a path used when no file is specified.</p></div></div><div><div class="spec type" id="type-pos" class="anchored"><a href="#type-pos" class="anchor"></a><code><span class="keyword">type</span> pos = int</code></div><div><p>The type for zero-based, absolute, byte positions in text.</p></div></div><div><div class="spec type" id="type-line" class="anchored"><a href="#type-line" class="anchor"></a><code><span class="keyword">type</span> line = int</code></div><div><p>The type for one-based, line numbers in the text. Lines increment after a line feed <code>'\n'</code> (U+000A), a carriage return <code>'\r'</code> (U+000D) or a carriage return and a line feed <code>&quot;\r\n&quot;</code> (&lt;U+000D,U+000A&gt;).</p></div></div><div><div class="spec type" id="type-line_pos" class="anchored"><a href="#type-line_pos" class="anchor"></a><code><span class="keyword">type</span> line_pos = <a href="index.html#type-line">line</a> * <a href="index.html#type-pos">pos</a></code></div><div><p>The type for line positions. The line number and the byte position of the first element on the line. The later is the byte position after the newline which may not exist (at the end of file).</p></div></div><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></div><div><p>The type for text locations. A text location is a range of byte positions and the lines on which they occur in the UTF-8 encoded text of a particular file.</p></div></div><div><div class="spec value" id="val-v" class="anchored"><a href="#val-v" class="anchor"></a><code><span class="keyword">val</span> v : <span>file:<a href="index.html#type-fpath">fpath</a></span> <span>&#45;&gt;</span> <span>sbyte:<a href="index.html#type-pos">pos</a></span> <span>&#45;&gt;</span> <span>ebyte:<a href="index.html#type-pos">pos</a></span> <span>&#45;&gt;</span> <span>sline:<a href="index.html#type-line_pos">line_pos</a></span> <span>&#45;&gt;</span> <span>eline:<a href="index.html#type-line_pos">line_pos</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>v ~file ~sbyte ~ebyte ~sline ~eline</code> is a contructor for text locations. See corresponding accessors for the semantics. If you don't have a file use <a href="index.html#val-no_file"><code>no_file</code></a>.</p></div></div><div><div class="spec value" id="val-file" class="anchored"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-fpath">fpath</a></code></div><div><p><code>file l</code> is <code>l</code>'s file.</p></div></div><div><div class="spec value" id="val-sbyte" class="anchored"><a href="#val-sbyte" class="anchor"></a><code><span class="keyword">val</span> sbyte : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-pos">pos</a></code></div><div><p><code>sbyte l</code> is <code>l</code>'s start position.</p></div></div><div><div class="spec value" id="val-ebyte" class="anchored"><a href="#val-ebyte" class="anchor"></a><code><span class="keyword">val</span> ebyte : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-pos">pos</a></code></div><div><p><code>ebyte l</code> is <code>l</code>'s end position.</p></div></div><div><div class="spec value" id="val-sline" class="anchored"><a href="#val-sline" class="anchor"></a><code><span class="keyword">val</span> sline : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-line_pos">line_pos</a></code></div><div><p><code>sline l</code> is the line position on which <code>sbyte l</code> lies.</p></div></div><div><div class="spec value" id="val-eline" class="anchored"><a href="#val-eline" class="anchor"></a><code><span class="keyword">val</span> eline : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-line_pos">line_pos</a></code></div><div><p><code>elin l</code> is the line position on which <code>ebyte l</code> lies.</p></div></div><div><div class="spec value" id="val-nil" class="anchored"><a href="#val-nil" class="anchor"></a><code><span class="keyword">val</span> nil : <a href="index.html#type-t">t</a></code></div><div><p><code>loc_nil</code> is an invalid location.</p></div></div><div><div class="spec value" id="val-merge" class="anchored"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>merge l0 l1</code> merges the location <code>l0</code> and <code>l1</code> to the smallest location that spans both location. The file path taken from <code>l0</code>.</p></div></div><div><div class="spec value" id="val-to_start" class="anchored"><a href="#val-to_start" class="anchor"></a><code><span class="keyword">val</span> to_start : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>to_start l</code> has both start and end positions at <code>l</code>'s start.</p></div></div><div><div class="spec value" id="val-to_end" class="anchored"><a href="#val-to_end" class="anchor"></a><code><span class="keyword">val</span> to_end : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>to_end l</code> has both start and end positions at <code>l</code>'s end.</p></div></div><div><div class="spec value" id="val-restart" class="anchored"><a href="#val-restart" class="anchor"></a><code><span class="keyword">val</span> restart : <span>at:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>restart ~at l</code> is <code>l</code> with the start position of <code>at</code>.</p></div></div><div><div class="spec value" id="val-pp_ocaml" class="anchored"><a href="#val-pp_ocaml" class="anchor"></a><code><span class="keyword">val</span> pp_ocaml : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>pp_ocaml</code> formats location like the OCaml compiler.</p></div></div><div><div class="spec value" id="val-pp_gnu" class="anchored"><a href="#val-pp_gnu" class="anchor"></a><code><span class="keyword">val</span> pp_gnu : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>pp_gnu</code> formats location according to the <a href="https://www.gnu.org/prep/standards/standards.html#Errors">GNU convention</a>.</p></div></div><div><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>pp</code> is <a href="index.html#val-pp_gnu"><code>pp_gnu</code></a>.</p></div></div><div><div class="spec value" id="val-pp_dump" class="anchored"><a href="#val-pp_dump" class="anchor"></a><code><span class="keyword">val</span> pp_dump : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>pp_dump</code> formats raw data for debugging.</p></div></div><h2 id="text"><a href="#text" class="anchor"></a>Substitutions and insertions</h2><aside><p>Strictly speaking this doesn't belong here but here you go.</p></aside><div><div class="spec value" id="val-string_subrange" class="anchored"><a href="#val-string_subrange" class="anchor"></a><code><span class="keyword">val</span> string_subrange : <span>?&#8288;first:int</span> <span>&#45;&gt;</span> <span>?&#8288;last:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></div><div><p><code>string_subrange ~first ~last s</code> are the consecutive bytes of <code>s</code> whose indices exist in the range [<code>first</code>;<code>last</code>].</p><p><code>first</code> defaults to <code>0</code> and last to <code>String.length s - 1</code>.</p><p>Note that both <code>first</code> and <code>last</code> can be any integer. If <code>first &gt; last</code> the interval is empty and the empty string is returned.</p></div></div><div><div class="spec value" id="val-string_replace" class="anchored"><a href="#val-string_replace" class="anchor"></a><code><span class="keyword">val</span> string_replace : <span>start:int</span> <span>&#45;&gt;</span> <span>stop:int</span> <span>&#45;&gt;</span> <span>rep:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></div><div><p><code>string_replace ~start ~stop ~rep s</code> replaces the index range [<code>start</code>;stop-1] of <code>s</code> with <code>rep</code> as follows. If <code>start = stop</code> the <code>rep</code> is inserted before <code>start</code>. <code>start</code> and <code>stop</code> must be in range [<code>0</code>;<code>String.length s</code>] and <code>start &lt;= stop</code> or <code>Invalid_argument</code> is raised.</p></div></div></div></body></html>