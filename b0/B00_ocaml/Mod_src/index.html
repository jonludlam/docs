<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mod_src (b0.B00_ocaml.Mod_src)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B00_ocaml</a> &#x00BB; Mod_src</nav><header><h1>Module <code>B00_ocaml.Mod_src</code></h1><p>Module sources.</p></header><nav class="toc"><ul><li><a href="#mods">Modules</a></li><li><a href="#files">Constructing file paths</a></li><li><a href="#map">Module name maps</a></li></ul></nav><div class="content"><h2 id="mods"><a href="#mods" class="anchor"></a>Modules</h2><div><div class="spec module" id="module-Deps" class="anchored"><a href="#module-Deps" class="anchor"></a><code><span class="keyword">module</span> <a href="Deps/index.html">Deps</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><p>Source dependencies.</p></div></div><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></div><div><p>The type for OCaml module sources, represents a module to compile.</p></div></div><div><div class="spec value" id="val-v" class="anchored"><a href="#val-v" class="anchor"></a><code><span class="keyword">val</span> v : <span>mod_name:<a href="../Mod_name/index.html#type-t">Mod_name.t</a></span> <span>&#45;&gt;</span> <span>opaque:bool</span> <span>&#45;&gt;</span> <span>mli:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> option</span></span> <span>&#45;&gt;</span> <span>mli_deps:<a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a></span> <span>&#45;&gt;</span> <span>ml:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> option</span></span> <span>&#45;&gt;</span> <span>ml_deps:<a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>v ~mod_name ~opaque ~mli ~mli_deps ~ml ~ml_deps</code> is a module whose name is <code>name</code>, interface file is <code>mli</code> (if any), interface file module dependencies is <code>mli_deps</code>, implementation is <code>ml</code> (if any) and implementation file module dependencies <code>ml_deps</code>. For <code>opaque</code> see <a href="index.html#val-opaque"><code>opaque</code></a>.</p></div></div><div><div class="spec value" id="val-mod_name" class="anchored"><a href="#val-mod_name" class="anchor"></a><code><span class="keyword">val</span> mod_name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Mod_name/index.html#type-t">Mod_name.t</a></code></div><div><p><code>mod_name m</code> is <code>m</code>'s name.</p></div></div><div><div class="spec value" id="val-opaque" class="anchored"><a href="#val-opaque" class="anchor"></a><code><span class="keyword">val</span> opaque : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></div><div><p><code>opaque m</code> indicates whether the module should be treated as opaque for compilation. See the <code>-opaque</code> option in the OCaml manual.</p></div></div><div><div class="spec value" id="val-mli" class="anchored"><a href="#val-mli" class="anchor"></a><code><span class="keyword">val</span> mli : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> option</span></code></div><div><p><code>mli m</code> is <code>m</code>'s interface file (if any).</p></div></div><div><div class="spec value" id="val-mli_deps" class="anchored"><a href="#val-mli_deps" class="anchor"></a><code><span class="keyword">val</span> mli_deps : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a></code></div><div><p><code>mli_deps m</code> are <code>m</code>'s interface file dependencies.</p></div></div><div><div class="spec value" id="val-ml" class="anchored"><a href="#val-ml" class="anchor"></a><code><span class="keyword">val</span> ml : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> option</span></code></div><div><p><code>ml m</code> is <code>m</code>'s implementation file (if any).</p></div></div><div><div class="spec value" id="val-ml_deps" class="anchored"><a href="#val-ml_deps" class="anchor"></a><code><span class="keyword">val</span> ml_deps : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a></code></div><div><p><code>ml_deps m</code> are <code>m</code>'s implementation file dependencies.</p></div></div><h2 id="files"><a href="#files" class="anchor"></a>Constructing file paths</h2><div><div class="spec value" id="val-file" class="anchored"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>ext:string</span> <span>&#45;&gt;</span> <a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></code></div><div><p><code>file ~in_dir m ~ext</code> is a file for module <code>m</code> with extension <code>ext</code> in directory <code>in_dir</code>.</p></div></div><div><div class="spec value" id="val-cmi_file" class="anchored"><a href="#val-cmi_file" class="anchor"></a><code><span class="keyword">val</span> cmi_file : <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></code></div><div><p><code>cmi_file ~in_dir m</code> is <code>file ~in_dir m ext:&quot;.cmi&quot;</code>.</p></div></div><div><div class="spec value" id="val-cmo_file" class="anchored"><a href="#val-cmo_file" class="anchor"></a><code><span class="keyword">val</span> cmo_file : <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></code></div><div><p><code>cmx_file ~in_dir m</code> is <code>fil_ ~in_dir m ext:&quot;.cmo&quot;</code>.</p></div></div><div><div class="spec value" id="val-cmx_file" class="anchored"><a href="#val-cmx_file" class="anchor"></a><code><span class="keyword">val</span> cmx_file : <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></code></div><div><p><code>cmx_file ~in_dir m</code> is <code>file ~in_dir m ext:&quot;.cmx&quot;</code>.</p></div></div><div><div class="spec value" id="val-impl_file" class="anchored"><a href="#val-impl_file" class="anchor"></a><code><span class="keyword">val</span> impl_file : <span>code:<a href="../Cobj/index.html#type-code">Cobj.code</a></span> <span>&#45;&gt;</span> <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></code></div><div><p><code>impl_file ~code ~in_dir m</code> is <a href="index.html#val-cmx_file"><code>cmx_file</code></a> or <a href="index.html#val-cmo_file"><code>cmo_file</code></a> according to <code>code</code>.</p></div></div><div><div class="spec value" id="val-as_intf_dep_files" class="anchored"><a href="#val-as_intf_dep_files" class="anchor"></a><code><span class="keyword">val</span> as_intf_dep_files : <span>?&#8288;init:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span></span> <span>&#45;&gt;</span> <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span></code></div><div><p><code>as_intf_dep_files ~init ~in_dir m</code> adds to <code>init</code> (defaults to <code>[]</code>) the files that are read by the OCaml compiler if module source <code>m</code> is compiled in <code>in_dir</code> and used as an interface compilation dependency.</p></div></div><div><div class="spec value" id="val-as_impl_dep_files" class="anchored"><a href="#val-as_impl_dep_files" class="anchor"></a><code><span class="keyword">val</span> as_impl_dep_files : <span>?&#8288;init:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span></span> <span>&#45;&gt;</span> <span>code:<a href="../Cobj/index.html#type-code">Cobj.code</a></span> <span>&#45;&gt;</span> <span>in_dir:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span></code></div><div><p><code>as_impl_dep_files ~init ~code ~in_dir m</code> adds to <code>init</code> (defaults to <code>[]</code>) the files that are read by the OCaml compiler if module source <code>m</code> is compiled in <code>in_dir</code> and used an implementation file dependency for code <code>code</code>.</p></div></div><h2 id="map"><a href="#map" class="anchor"></a>Module name maps</h2><div><div class="spec value" id="val-of_srcs" class="anchored"><a href="#val-of_srcs" class="anchor"></a><code><span class="keyword">val</span> of_srcs : <a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span>&#45;&gt;</span> <span>src_deps:<span><a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a> <a href="../../B00_std/Fpath/Map/index.html#type-t">B00_std.Fpath.Map.t</a></span></span> <span>&#45;&gt;</span> <span>srcs:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span></span> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod_name.Map.t</a></span></code></div><div><p><code>of_srcs ~src_deps deps ~srcs</code> determines source modules (mapped by their names) given sources <code>srcs</code> and their dependencies <code>src_deps</code> (e.g. obtainted via <a href="Deps/index.html#val-read"><code>Deps.read</code></a>. If there's more than one <code>mli</code> or <code>ml</code> file for a given module name a warning is notified on <code>m</code> and a single one is kept.</p></div></div><div><div class="spec value" id="val-find_local_deps" class="anchored"><a href="#val-find_local_deps" class="anchor"></a><code><span class="keyword">val</span> find_local_deps : <span><a href="index.html#type-t">t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod_name.Map.t</a></span> <span>&#45;&gt;</span> <a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> list</span> * <a href="../../B00_std/String/Set/index.html#type-t">Mod_name.Set.t</a></code></div><div><p><code>find_local_deps ms deps</code> is <code>(mods, remain)</code> with <code>mods</code> the modules of <code>ms</code> whose name is in <code>deps</code> and <code>remain</code> the names of <code>deps</code> which cannot be found in <code>ms</code>.</p></div></div></div></body></html>