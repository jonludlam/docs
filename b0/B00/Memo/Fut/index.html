<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fut (b0.B00.Memo.Fut)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">b0</a> &#x00BB; <a href="../../index.html">B00</a> &#x00BB; <a href="../index.html">Memo</a> &#x00BB; Fut</nav><header><h1>Module <code>Memo.Fut</code></h1><p>Future values.</p><p>A future is an undetermined value that becomes determined at an an arbitrary point in the future. The future acts as a placeholder for the value while it is undetermined.</p></header><nav class="toc"><ul><li><a href="#fut">Future values</a></li></ul></nav><div class="content"><h2 id="fut"><a href="#fut" class="anchor"></a>Future values</h2><div><div class="spec type" id="type-memo" class="anchored"><a href="#type-memo" class="anchor"></a><code><span class="keyword">type</span> memo = <a href="../index.html#type-t">t</a></code></div><div><p>See <a href="../index.html#type-t"><code>Memo.t</code></a></p></div></div><div><div class="spec type" id="type-undet" class="anchored"><a href="#type-undet" class="anchor"></a><code><span class="keyword">type</span> <span>'a undet</span></code></div><div><p>The type for undetermined future information. Forget about this, it cannot be acted upon.</p></div></div><div><div class="spec type" id="type-state" class="anchored"><a href="#type-state" class="anchor"></a><code><span class="keyword">type</span> <span>'a state</span> = </code><table><tr id="type-state.Det" class="anchored"><td class="def variant constructor"><a href="#type-state.Det" class="anchor"></a><code>| <span class="constructor">Det</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td><td class="doc"><p>The future is determined with the given value.</p></td></tr><tr id="type-state.Undet" class="anchored"><td class="def variant constructor"><a href="#type-state.Undet" class="anchor"></a><code>| <span class="constructor">Undet</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-undet">undet</a></span></code></td><td class="doc"><p>The future is undetermined.</p></td></tr><tr id="type-state.Never" class="anchored"><td class="def variant constructor"><a href="#type-state.Never" class="anchor"></a><code>| <span class="constructor">Never</span></code></td><td class="doc"><p>The future will never determine.</p></td></tr></table></div><div><p>The type for future state. When the state is <code>Det _</code> or <code>Never</code> we say the future is <em>set</em>.</p></div></div><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></div><div><p>The type for futures with values of type <code>'a</code>.</p></div></div><div><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="index.html#type-memo">memo</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span>(<span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> unit)</span></code></div><div><p><code>create m</code> is <code>(f, set)</code> with <code>f</code> the future value and <code>set</code> the function to <code>set</code> it. The latter can be called only once, <code>Invalid_argument</code> is raised otherwise. If called with <code>None</code> the future value becomes <code>Never</code>.</p></div></div><div><div class="spec value" id="val-ret" class="anchored"><a href="#val-ret" class="anchor"></a><code><span class="keyword">val</span> ret : <a href="index.html#type-memo">memo</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></div><div><p><code>ret m v</code> is <code>v</code> as a determined future value.</p></div></div><div><div class="spec value" id="val-state" class="anchored"><a href="#val-state" class="anchor"></a><code><span class="keyword">val</span> state : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-state">state</a></span></code></div><div><p><code>state f</code> is the state of <code>f</code>'s.</p></div></div><div><div class="spec value" id="val-value" class="anchored"><a href="#val-value" class="anchor"></a><code><span class="keyword">val</span> value : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></div><div><p><code>value f</code> is <code>f</code>'s value, if any.</p></div></div><div><div class="spec value" id="val-await" class="anchored"><a href="#val-await" class="anchor"></a><code><span class="keyword">val</span> await : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-fiber">fiber</a></span></code></div><div><p><code>await f k</code> waits for <code>f</code> to be determined and continues with <code>k v</code> with <code>v</code> the value of the future. If the future never determines <code>k</code> is not invoked. Use <a href="index.html#val-await_set"><code>await_set</code></a> to witness never determining futures.</p></div></div><div><div class="spec value" id="val-await_set" class="anchored"><a href="#val-await_set" class="anchor"></a><code><span class="keyword">val</span> await_set : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="../index.html#type-fiber">fiber</a></span></code></div><div><p><code>await_set f k</code> waits for <code>f</code> to be set and continues with <code>k None</code> if <code>state f</code> is <code>Never</code> and <code>k (Some v)</code> if <code>state f</code> is <code>Det v</code>.</p></div></div><div><div class="spec value" id="val-of_fiber" class="anchored"><a href="#val-of_fiber" class="anchor"></a><code><span class="keyword">val</span> of_fiber : <a href="index.html#type-memo">memo</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-fiber">fiber</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></div><div><p><code>of_fiber m f</code> runs fiber <code>f</code> and sets the resulting future when it returns. If <code>f</code> raises then the future is set to <code>Never</code>.</p></div></div></div></body></html>