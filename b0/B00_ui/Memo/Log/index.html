<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Log (b0.B00_ui.Memo.Log)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../../index.html">b0</a> &#x00BB; <a href="../../index.html">B00_ui</a> &#x00BB; <a href="../index.html">Memo</a> &#x00BB; Log</nav><header><h1>Module <code>Memo.Log</code></h1><p><a href="../../../B00/Memo/index.html"><code>B00.Memo</code></a> log.</p><p>A <a href="../../../B00/Memo/index.html"><code>B00.Memo</code></a> log has all the build operations, the hashed file paths and a few global timings.</p></header><nav class="toc"><ul><li><a href="#logs">Logs</a></li><li><a href="#io">IO</a></li><li><a href="#fmt">Log formatters</a></li><li><a href="#cli">Command line interface</a></li></ul></nav><div class="content"><h2 id="logs"><a href="#logs" class="anchor"></a>Logs</h2><div><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></div><div><p>The type for <a href="../../../B00/Memo/index.html"><code>B00.Memo</code></a> logs.</p></div></div><div><div class="spec value" id="val-of_memo" class="anchored"><a href="#val-of_memo" class="anchor"></a><code><span class="keyword">val</span> of_memo : <a href="../../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></div><div><p><code>of_memo m</code> is a log for memo <code>m</code>.</p></div></div><div><div class="spec value" id="val-hash_fun" class="anchored"><a href="#val-hash_fun" class="anchor"></a><code><span class="keyword">val</span> hash_fun : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></div><div><p><code>hash_fun</code> is the identifier of the hash function that was used.</p></div></div><div><div class="spec value" id="val-file_hashes" class="anchored"><a href="#val-file_hashes" class="anchor"></a><code><span class="keyword">val</span> file_hashes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../../B00_std/Hash/index.html#type-t">B00_std.Hash.t</a> <a href="../../../B00_std/Fpath/Map/index.html#type-t">B00_std.Fpath.Map.t</a></span></code></div><div><p><code>file_hashes l</code> has all the files that were hashed through the memo.</p></div></div><div><div class="spec value" id="val-hash_dur" class="anchored"><a href="#val-hash_dur" class="anchor"></a><code><span class="keyword">val</span> hash_dur : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../B00_std/Time/index.html#type-span">B00_std.Time.span</a></code></div><div><p><code>hash_dur l</code> is the time span spent hashing.</p></div></div><div><div class="spec value" id="val-total_dur" class="anchored"><a href="#val-total_dur" class="anchor"></a><code><span class="keyword">val</span> total_dur : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../B00_std/Time/index.html#type-span">B00_std.Time.span</a></code></div><div><p><code>total_dur l</code> is the time spanning from <a href="../../../B00/Memo/index.html#val-create"><code>B00.Memo.create</code></a> to <a href="index.html#val-of_memo"><code>of_memo</code></a>.</p></div></div><div><div class="spec value" id="val-cpu_dur" class="anchored"><a href="#val-cpu_dur" class="anchor"></a><code><span class="keyword">val</span> cpu_dur : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../B00_std/Time/index.html#type-cpu_span">B00_std.Time.cpu_span</a></code></div><div><p><code>cpu_dur l</code> is the CPU time spanning from <a href="../../../B00/Memo/index.html#val-create"><code>B00.Memo.create</code></a> to <a href="index.html#val-of_memo"><code>of_memo</code></a>.</p></div></div><div><div class="spec value" id="val-jobs" class="anchored"><a href="#val-jobs" class="anchor"></a><code><span class="keyword">val</span> jobs : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></div><div><p><code>jobs l</code> is the maximal number of concurent spawns given to the build operation executor.</p></div></div><div><div class="spec value" id="val-ops" class="anchored"><a href="#val-ops" class="anchor"></a><code><span class="keyword">val</span> ops : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../../B000/Op/index.html#type-t">B000.Op.t</a> list</span></code></div><div><p><code>ops l</code> are the operations of the log.</p></div></div><h2 id="io"><a href="#io" class="anchor"></a>IO</h2><div><div class="spec value" id="val-bincode" class="anchored"><a href="#val-bincode" class="anchor"></a><code><span class="keyword">val</span> bincode : <span><a href="index.html#type-t">t</a> <a href="../../../B00_std/Bincode/index.html#type-t">B00_std.Bincode.t</a></span></code></div><div><p><code>bincode</code> is a binary codec for logs.</p></div></div><div><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <a href="../../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(unit, string)</span> <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></code></div><div><p><code>write f l</code> writes log <code>l</code> to file <code>f</code>.</p></div></div><div><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : <a href="../../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, string)</span> <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></code></div><div><p><code>read f</code> read a log from file <code>f</code>.</p></div></div><h2 id="fmt"><a href="#fmt" class="anchor"></a>Log formatters</h2><div><div class="spec value" id="val-pp_stats" class="anchored"><a href="#val-pp_stats" class="anchor"></a><code><span class="keyword">val</span> pp_stats : <span>hashed_size:bool</span> <span>&#45;&gt;</span> <a href="../../Op/index.html#type-query">Op.query</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> <a href="../../../B00_std/Fmt/index.html#type-t">B00_std.Fmt.t</a></span></code></div><div><p><code>pp_stats sel</code> formats statistics stored in the log using <code>query</code> to select operations that are part of the statistics. If <code>hashed_size</code> the sum of the size of the files in <a href="index.html#val-file_hashes"><code>file_hashes</code></a> is computed (this accesses the file system in a non-fatal way in case of errors).</p></div></div><div><div class="spec type" id="type-out_format" class="anchored"><a href="#type-out_format" class="anchor"></a><code><span class="keyword">type</span> out_format = [ </code><table><tr id="type-out_format.Hashed_files" class="anchored"><td class="def constructor"><a href="#type-out_format.Hashed_files" class="anchor"></a><code>| </code><code>`Hashed_files</code></td></tr><tr id="type-out_format.Op_hashes" class="anchored"><td class="def constructor"><a href="#type-out_format.Op_hashes" class="anchor"></a><code>| </code><code>`Op_hashes</code></td></tr><tr id="type-out_format.Ops" class="anchored"><td class="def constructor"><a href="#type-out_format.Ops" class="anchor"></a><code>| </code><code>`Ops</code></td></tr><tr id="type-out_format.Path" class="anchored"><td class="def constructor"><a href="#type-out_format.Path" class="anchor"></a><code>| </code><code>`Path</code></td></tr><tr id="type-out_format.Stats" class="anchored"><td class="def constructor"><a href="#type-out_format.Stats" class="anchor"></a><code>| </code><code>`Stats</code></td></tr><tr id="type-out_format.Root_hashed_files" class="anchored"><td class="def constructor"><a href="#type-out_format.Root_hashed_files" class="anchor"></a><code>| </code><code>`Root_hashed_files</code></td></tr><tr id="type-out_format.Trace_event" class="anchored"><td class="def constructor"><a href="#type-out_format.Trace_event" class="anchor"></a><code>| </code><code>`Trace_event</code></td></tr></table><code> ]</code></div><div><p>The type for output format.</p></div></div><div><div class="spec value" id="val-out" class="anchored"><a href="#val-out" class="anchor"></a><code><span class="keyword">val</span> out : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-out_format">out_format</a> <span>&#45;&gt;</span> <a href="../../Cli/index.html#type-out_details">Cli.out_details</a> <span>&#45;&gt;</span> <a href="../../Op/index.html#type-query">Op.query</a> <span>&#45;&gt;</span> <span>path:<a href="../../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>out</code> formats a log on the given formatter. <code>path</code> is used when <code>`Path</code> is requested.</p></div></div><h2 id="cli"><a href="#cli" class="anchor"></a>Command line interface</h2><div><div class="spec value" id="val-out_format_cli" class="anchored"><a href="#val-out_format_cli" class="anchor"></a><code><span class="keyword">val</span> out_format_cli : <span>?&#8288;docs:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-out_format">out_format</a> <a href="../../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span></code></div><div><p><code>out_format_cli ~docs ()</code> are mutually exclusive options to specify alternate output formats.</p></div></div></div></body></html>