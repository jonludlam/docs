<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>manager (session-webmachine.Session_webmachine.Make.manager)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../../index.html">session-webmachine</a> &#x00BB; <a href="../../index.html">Session_webmachine</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; manager</nav><header><h1>Class <code>Make.manager</code></h1><p>A session manager for Webmachine resources.</p><p>Webmachine resources should inherit this class and use its methods internally to query and modify session state.</p></header><div class="content"><div><div class="spec method" id="method-session_of_rd" class="anchored"><a href="#method-session_of_rd" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_of_rd : <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span><a href="../index.html#type-t">t</a> option</span>, <a href="../../../../session/Session/S/index.html#type-error">Session.S.error</a>)</span> <a href="../../../../result/Result/index.html#type-result">Result.result</a></span> <a href="../index.html#type-io">io</a></span></code></div><div><p><code>#session_get rd</code> fetches and caches the session associated with <code>rd</code>, if present and unexpired.</p></div></div><div><div class="spec method" id="method-session_of_rd_or_create" class="anchored"><a href="#method-session_of_rd_or_create" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_of_rd_or_create : <span>?&#8288;expiry:<a href="../index.html#type-period">period</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span> <span>&#45;&gt;</span> <span><a href="../index.html#type-t">t</a> <a href="../index.html#type-io">io</a></span></code></div><div><p><code>#session_get_or_create ?expiry value rd</code> fetches and caches the session associated with <code>rd</code>. If the session is not present or expired, then a new session will be created and stored using <code>expiry</code> and <code>value</code>. Creating a new session will not modify <code>rd</code>, but subsequent session calls for this resource will use the newly created, cached session.</p></div></div><div><div class="spec method" id="method-session_set" class="anchored"><a href="#method-session_set" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_set : <span>?&#8288;expiry:<a href="../index.html#type-period">period</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span> <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-io">io</a></span></code></div><div><p><code>#session_set ?expiry value rd</code> sets the <code>value</code> for the session associated with <code>rd</code> in the backend <code>t</code> and sets the session to expire <code>expiry</code> seconds from now. If <code>expiry</code> is not provided, then expiry reported by <code>default_period t</code> will be used instead.</p></div></div><div><div class="spec method" id="method-session_clear" class="anchored"><a href="#method-session_clear" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_clear : <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span> <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-io">io</a></span></code></div><div><p><code>#clear rd</code> removes the session associated with <code>rd</code> from the backend. If a session is cached, its <code>value</code> and <code>expiry_period</code> will be zero'd out, and the <code>modified</code> flag will be set. Calling <code>to_cookie_hdr</code> on a cleared session will generate the appropriate headers directing the client to clear the associated cookie.</p></div></div><div><div class="spec method" id="method-session_set_hdrs" class="anchored"><a href="#method-session_set_hdrs" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_set_hdrs : <span>?&#8288;discard:bool</span> <span>&#45;&gt;</span> <span>?&#8288;path:string</span> <span>&#45;&gt;</span> <span>?&#8288;domain:string</span> <span>&#45;&gt;</span> <span>?&#8288;secure:bool</span> <span>&#45;&gt;</span> <span>?&#8288;http_only:bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'body</span> <a href="../../../../webmachine/Webmachine/Rd/index.html#type-t">Webmachine.Rd.t</a></span></code></div><div><p><code>#session_set_hdrs rd</code> will generate response headers to communicate session changes or the clearing of the session to the client. This function takes into account the <code>modified</code> field of the <span class="xref-unresolved">session</span> type, and will not generate headers if they are not needed.</p></div></div><div><div class="spec method" id="method-session_variances" class="anchored"><a href="#method-session_variances" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">private</span> session_variances : <span>string list</span></code></div><div><p><code>#session_variances</code> returns a list of session-related header names that should be inclued in the <code>Vary</code> header of a reponse. The result takes into account whether the session related to the request was accessed, modified, or cleared.</p></div></div></div></body></html>