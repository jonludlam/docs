<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>In_memory_events (vchan.Vchan.In_memory_events)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../index.html">vchan</a> &#x00BB; <a href="../index.html">Vchan</a> &#x00BB; In_memory_events</nav><header><h1>Module <code>Vchan.In_memory_events</code></h1></header><div class="content"><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../S/module-type-EVENTS/index.html">S.EVENTS</a></code></span></summary><div><div class="spec type" id="type-port" class="anchored"><a href="#type-port" class="anchor"></a><code><span class="keyword">type</span> port</code></div><div><p>an identifier for a source of events. Ports are allocated by calls to <code>listen</code>, then exchanged out-of-band (typically by xenstore) and finally calls to <code>connect</code> creates a channel between the two domains. Events are send and received over these channels.</p></div></div><div><div class="spec include"><div class="doc"><div class="spec value" id="val-sexp_of_port" class="anchored"><a href="#val-sexp_of_port" class="anchor"></a><code><span class="keyword">val</span> sexp_of_port : <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></div></div></div></div><div class="spec value" id="val-port_of_string" class="anchored"><a href="#val-port_of_string" class="anchor"></a><code><span class="keyword">val</span> port_of_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-port">port</a>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span></code></div><div class="spec value" id="val-string_of_port" class="anchored"><a href="#val-string_of_port" class="anchor"></a><code><span class="keyword">val</span> string_of_port : <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> string</code></div><div><div class="spec type" id="type-channel" class="anchored"><a href="#type-channel" class="anchor"></a><code><span class="keyword">type</span> channel</code></div><div><p>a channel is the connection between two domains and is used to send and receive events.</p></div></div><div><div class="spec include"><div class="doc"><div class="spec value" id="val-sexp_of_channel" class="anchored"><a href="#val-sexp_of_channel" class="anchor"></a><code><span class="keyword">val</span> sexp_of_channel : <a href="index.html#type-channel">channel</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></div></div></div></div><div><div class="spec type" id="type-event" class="anchored"><a href="#type-event" class="anchor"></a><code><span class="keyword">type</span> event</code></div><div><p>an event notification received from a remote domain. Events contain no data and may be coalesced. Domains which are blocked will be woken up by an event.</p></div></div><div><div class="spec include"><div class="doc"><div class="spec value" id="val-sexp_of_event" class="anchored"><a href="#val-sexp_of_event" class="anchor"></a><code><span class="keyword">val</span> sexp_of_event : <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></div></div></div></div><div><div class="spec value" id="val-initial" class="anchored"><a href="#val-initial" class="anchor"></a><code><span class="keyword">val</span> initial : <a href="index.html#type-event">event</a></code></div><div><p>represents an event which 'fired' when the program started</p></div></div><div><div class="spec value" id="val-recv" class="anchored"><a href="#val-recv" class="anchor"></a><code><span class="keyword">val</span> recv : <a href="index.html#type-channel">channel</a> <span>&#45;&gt;</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> <span><a href="index.html#type-event">event</a> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>recv channel event</code> blocks until the system receives an event newer than <code>event</code> on channel <code>channel</code>. If an event is received while we aren't looking then this will be remembered and the next call to <code>after</code> will immediately unblock. If the system is suspended and then resumed, all event channel bindings are invalidated and this function will fail with Generation.Invalid</p></div></div><div><div class="spec value" id="val-send" class="anchored"><a href="#val-send" class="anchor"></a><code><span class="keyword">val</span> send : <a href="index.html#type-channel">channel</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>send channel</code> sends an event along <code>channel</code>, to another domain which will be woken up</p></div></div><div><div class="spec value" id="val-listen" class="anchored"><a href="#val-listen" class="anchor"></a><code><span class="keyword">val</span> listen : int <span>&#45;&gt;</span> <a href="index.html#type-port">port</a> * <a href="index.html#type-channel">channel</a></code></div><div><p><code>listen domid</code> allocates a fresh port and event channel. The port may be supplied to <code>connect</code></p></div></div><div><div class="spec value" id="val-connect" class="anchored"><a href="#val-connect" class="anchor"></a><code><span class="keyword">val</span> connect : int <span>&#45;&gt;</span> <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> <a href="index.html#type-channel">channel</a></code></div><div><p><code>connect domid port</code> connects an event channel to <code>port</code> on <code>domid</code></p></div></div><div><div class="spec value" id="val-close" class="anchored"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <a href="index.html#type-channel">channel</a> <span>&#45;&gt;</span> unit</code></div><div><p><code>close channel</code> closes this side of an event channel</p></div></div></details></div></div></div><div><div class="spec value" id="val-assert_cleaned_up" class="anchored"><a href="#val-assert_cleaned_up" class="anchor"></a><code><span class="keyword">val</span> assert_cleaned_up : unit <span>&#45;&gt;</span> unit</code></div><div><p>Throws a Failure if there are any resources still in use. This is intended to be used by test cases to check everything has been properly closed.</p></div></div></div></body></html>