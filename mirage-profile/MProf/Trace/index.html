<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Trace (mirage-profile.MProf.Trace)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">mirage-profile</a> &#x00BB; <a href="../index.html">MProf</a> &#x00BB; Trace</nav><header><h1>Module <code>MProf.Trace</code></h1></header><nav class="toc"><ul><li><a href="#general-tracing-calls-for-libraries">General tracing calls for libraries</a></li><li><a href="#interface-for-the-main-loop">Interface for the main loop</a></li></ul></nav><div class="content"><aside><p>Functions that libraries can use to add events to the trace. * * If mirage-profile is compiled with tracing disabled, these are null-ops (or * call the underlying untraced operation, as appropriate). The compiler should * optimise them out in this case.</p></aside><h3 id="general-tracing-calls-for-libraries"><a href="#general-tracing-calls-for-libraries" class="anchor"></a>General tracing calls for libraries</h3><div><div class="spec value" id="val-label" class="anchored"><a href="#val-label" class="anchor"></a><code><span class="keyword">val</span> label : string <span>&#45;&gt;</span> unit</code></div><div><p>Attach a label/comment to the currently executing thread.</p></div></div><div><div class="spec value" id="val-named_wait" class="anchored"><a href="#val-named_wait" class="anchor"></a><code><span class="keyword">val</span> named_wait : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> * <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-u">Lwt.u</a></span></code></div><div><p>Wrapper for <code>Lwt.wait</code> that labels the new thread.</p></div></div><div><div class="spec value" id="val-named_task" class="anchored"><a href="#val-named_task" class="anchor"></a><code><span class="keyword">val</span> named_task : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> * <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-u">Lwt.u</a></span></code></div><div><p>Wrapper for <code>Lwt.task</code> that labels the new thread.</p></div></div><div><div class="spec value" id="val-named_condition" class="anchored"><a href="#val-named_condition" class="anchor"></a><code><span class="keyword">val</span> named_condition : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt_condition/index.html#type-t">Lwt_condition.t</a></span></code></div><div><p>Create a Lwt_condition that will label its thread with the given name.</p></div></div><div><div class="spec value" id="val-named_mvar_empty" class="anchored"><a href="#val-named_mvar_empty" class="anchor"></a><code><span class="keyword">val</span> named_mvar_empty : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt_mvar/index.html#type-t">Lwt_mvar.t</a></span></code></div><div><p>Create a Lwt_mvar that will label its threads with the given name.</p></div></div><div><div class="spec value" id="val-named_mvar" class="anchored"><a href="#val-named_mvar" class="anchor"></a><code><span class="keyword">val</span> named_mvar : string <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt_mvar/index.html#type-t">Lwt_mvar.t</a></span></code></div><div><p>Create a Lwt_mvar that will label its threads with the given name.</p></div></div><div class="spec value" id="val-note_increase" class="anchored"><a href="#val-note_increase" class="anchor"></a><code><span class="keyword">val</span> note_increase : string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></div><div><div class="spec value" id="val-note_counter_value" class="anchored"><a href="#val-note_counter_value" class="anchor"></a><code><span class="keyword">val</span> note_counter_value : string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></div><div><p>Records the current value of the named counter. * (for internal use: use Counter.set_value instead)</p></div></div><div><div class="spec value" id="val-should_resolve" class="anchored"><a href="#val-should_resolve" class="anchor"></a><code><span class="keyword">val</span> should_resolve : <span><span class="type-var">'a</span> <a href="../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span> <span>&#45;&gt;</span> unit</code></div><div><p>Add a hint that this thread is expected to resolve. * This is useful if a thread never completes and you want to find out why. * Without the hint, the viewer makes such threads almost invisible.</p></div></div><h3 id="interface-for-the-main-loop"><a href="#interface-for-the-main-loop" class="anchor"></a>Interface for the main loop</h3><div class="spec type" id="type-hiatus_reason" class="anchored"><a href="#type-hiatus_reason" class="anchor"></a><code><span class="keyword">type</span> hiatus_reason = </code><table><tr id="type-hiatus_reason.Wait_for_work" class="anchored"><td class="def variant constructor"><a href="#type-hiatus_reason.Wait_for_work" class="anchor"></a><code>| <span class="constructor">Wait_for_work</span></code></td></tr><tr id="type-hiatus_reason.Suspend" class="anchored"><td class="def variant constructor"><a href="#type-hiatus_reason.Suspend" class="anchor"></a><code>| <span class="constructor">Suspend</span></code></td></tr><tr id="type-hiatus_reason.Hibernate" class="anchored"><td class="def variant constructor"><a href="#type-hiatus_reason.Hibernate" class="anchor"></a><code>| <span class="constructor">Hibernate</span></code></td></tr></table></div><div><div class="spec value" id="val-note_hiatus" class="anchored"><a href="#val-note_hiatus" class="anchor"></a><code><span class="keyword">val</span> note_hiatus : <a href="index.html#type-hiatus_reason">hiatus_reason</a> <span>&#45;&gt;</span> unit</code></div><div><p>Record that the process is about to stop running for a while.</p></div></div><div><div class="spec value" id="val-note_resume" class="anchored"><a href="#val-note_resume" class="anchor"></a><code><span class="keyword">val</span> note_resume : unit <span>&#45;&gt;</span> unit</code></div><div><p>Record that the program has just resumed running.</p></div></div></div></body></html>