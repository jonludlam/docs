<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bin_prot__Blob (bin_prot.Bin_prot__Blob)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">bin_prot</a> &#x00BB; Bin_prot__Blob</nav><header><h1>Module <code>Bin_prot__Blob</code></h1><p><code>'a Blob.t</code> is type-equivalent to <code>'a</code>, but has different bin-prot serializers that prefix the representation with the size of <code>'a</code>.</p><p>To understand where this is useful, imagine we have an event type where many applications look at some parts of an event, but not all applications need to deal with all parts of an event. We might define:</p><pre><code>type 'a event =
  { time : Time.t
  ; source : string
  ; details : 'a
  } [@@deriving bin_io]</code></pre><p>Applications that need to understand all the details of an event could use:</p><pre><code>type concrete_event = Details.t Blob.t event [@@deriving bin_io] </code></pre><p>An application that filters events to downsteam consumers based on just <code>source</code> or <code>time</code> (but doesn't need to parse <code>details</code>) may use:</p><pre><code>type opaque_event = Blob.Opaque.Bigstring.t event [@@deriving bin_io] </code></pre><p>This has two advantages:</p><ul><li>(de)serializing messages is faster because potentially costly (de)serialization of <code>details</code> is avoided</li><li>the application can be compiled without any knowledge of any conrete <code>Details.t</code> type, so it's robust to changes in <code>Details.t</code></li></ul><p>An application that's happy to throw away <code>details</code> may use:</p><pre><code>type ignored_event = Blob.Ignored.t event [@@deriving bin_read] </code></pre><p>Whereas <code>opaque_event</code>s roundtrip, <code>ignored_event</code>s actually drop the bytes representing <code>details</code> when deserializing, and therefore do not roundtrip.</p></header><div class="content"></div></body></html>