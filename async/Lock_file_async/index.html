<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lock_file_async (async.Lock_file_async)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">async</a> &#x00BB; Lock_file_async</nav><header><h1>Module <code>Lock_file_async</code></h1><p><code>Lock_file_async</code> is a wrapper that provides Async equivalents for <span class="xref-unresolved"><code>Lock_file_blocking</code></span>.</p></header><div class="content"><div><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>?&#8288;message:string</span> <span>&#45;&gt;</span> <span>?&#8288;close_on_exec:bool</span> <span>&#45;&gt;</span> <span>?&#8288;unlink_on_exit:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>bool <a href="../Async/Deferred/index.html#type-t">Async.Deferred.t</a></span></code></div><div><p><code>create ?message path</code> tries to create a file at <code>path</code> containing the text <code>message</code>, pid if none provided. It returns true on success, false on failure. Note: there is no way to release the lock or the fd created inside! It will only be released when the process dies.</p></div></div><div><div class="spec value" id="val-create_exn" class="anchored"><a href="#val-create_exn" class="anchor"></a><code><span class="keyword">val</span> create_exn : <span>?&#8288;message:string</span> <span>&#45;&gt;</span> <span>?&#8288;close_on_exec:bool</span> <span>&#45;&gt;</span> <span>?&#8288;unlink_on_exit:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="../Async/Deferred/index.html#type-t">Async.Deferred.t</a></span></code></div><div><p><code>create_exn ?message path</code> is like <code>create</code> except that it throws an exception on failure instead of returning a boolean value.</p></div></div><div><div class="spec value" id="val-waiting_create" class="anchored"><a href="#val-waiting_create" class="anchor"></a><code><span class="keyword">val</span> waiting_create : <span>?&#8288;abort:<span>unit <a href="../Async/Deferred/index.html#type-t">Async.Deferred.t</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;message:string</span> <span>&#45;&gt;</span> <span>?&#8288;close_on_exec:bool</span> <span>&#45;&gt;</span> <span>?&#8288;unlink_on_exit:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="../Async/Deferred/index.html#type-t">Async.Deferred.t</a></span></code></div><div><p><code>waiting_create path</code> repeatedly tries to lock <code>path</code>, becoming determined when <code>path</code> is locked or raising when <code>abort</code> becomes determined. Similar to <code>Lock_file_blocking</code>.create.</p></div></div><div><div class="spec value" id="val-is_locked" class="anchored"><a href="#val-is_locked" class="anchor"></a><code><span class="keyword">val</span> is_locked : string <span>&#45;&gt;</span> <span>bool <a href="../Async/Deferred/index.html#type-t">Async.Deferred.t</a></span></code></div><div><p><code>is_locked path</code> returns true when the file at <code>path</code> exists and is locked, false otherwise.</p></div></div><div><div class="spec module" id="module-Nfs" class="anchored"><a href="#module-Nfs" class="anchor"></a><code><span class="keyword">module</span> <a href="Nfs/index.html">Nfs</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><p><code>Nfs</code> has analogs of functions in <code>Lock_file_blocking</code>.Nfs; see there for documentation. In addition to adding <code>Deferred</code>'s, <code>blocking_create</code> was renamed <code>waiting_create</code> to avoid the impression that it blocks Async.</p></div></div><div class="spec module" id="module-Flock" class="anchored"><a href="#module-Flock" class="anchor"></a><code><span class="keyword">module</span> <a href="Flock/index.html">Flock</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Symlink" class="anchored"><a href="#module-Symlink" class="anchor"></a><code><span class="keyword">module</span> <a href="Symlink/index.html">Symlink</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>